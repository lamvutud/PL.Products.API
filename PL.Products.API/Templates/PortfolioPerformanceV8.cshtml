@model PL.Products.API.Html.PortfolioPerformanceViewModel

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>GIPS Report</title>
	<style>
		/* General Reset */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Arial', sans-serif;
			color: #333;
			line-height: 1.6;
			margin: 20mm 15mm;
		}

		/* Page Layout */
		.container {
			max-width: 900px;
			margin: 0 auto;
			padding: 20px;
			background-color: #fff;
		}

		header {
			text-align: center;
			padding-bottom: 20px;
			border-bottom: 2px solid #007bff;
		}

		footer {
			position: fixed;
			bottom: 0;
			left: 0;
			right: 0;
			text-align: center;
			font-size: 0.8rem;
			color: #888;
		}

		.page-break {
			page-break-after: always;
		}

		/* Title Page */
		.title-page {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			text-align: center;
			background-color: #f4f4f9;
		}

			.title-page h1 {
				font-size: 3rem;
				color: #007bff;
			}

			.title-page p {
				font-size: 1.2rem;
				color: #555;
				margin-top: 10px;
			}

		/* Table */
		table {
			width: 100%;
			border-collapse: collapse;
			margin-bottom: 20px;
		}

		th, td {
			padding: 10px;
			text-align: left;
			border-bottom: 1px solid #ddd;
		}

		th {
			background-color: #007bff;
			color: #fff;
		}

		tbody tr:nth-child(odd) {
			background-color: #f9f9f9;
		}

		tbody tr:hover {
			background-color: #f1f1f1;
		}

		/* Print Styles */
		@@media print {
			body {
				margin: 20mm 15mm;
			}

			thead {
				display: table-header-group;
			}

			tfoot {
				display: table-row-group;
			}

			.page-break {
				page-break-after: always;
			}
		}
	</style>
	<script type="text/javascript">
		eval(atob("aW1wb3J0e3IgYXMgcmVxdWVzdEFuaW1GcmFtZSxhIGFzIHJlc29sdmUsZSBhcyBlZmZlY3RzLGMgYXMgY29sb3IsaSBhcyBpc09iamVjdCxkIGFzIGRlZmF1bHRzLGIgYXMgaXNBcnJheSx2IGFzIHZhbHVlT3JEZWZhdWx0LHUgYXMgdW5saXN0ZW5BcnJheUV2ZW50cyxsIGFzIGxpc3RlbkFycmF5RXZlbnRzLGYgYXMgcmVzb2x2ZU9iamVjdEtleSxnIGFzIGlzTnVtYmVyRmluaXRlLGggYXMgZGVmaW5lZCxzIGFzIHNpZ24saiBhcyBjcmVhdGVDb250ZXh0LGsgYXMgaXNOdWxsT3JVbmRlZixfIGFzIF9hcnJheVVuaXF1ZSx0IGFzIHRvUmFkaWFucyxtIGFzIHRvUGVyY2VudGFnZSxuIGFzIHRvRGltZW5zaW9uLFQgYXMgVEFVLG8gYXMgZm9ybWF0TnVtYmVyLHAgYXMgX2FuZ2xlQmV0d2VlbixIIGFzIEhBTEZfUEksUCBhcyBQSSxxIGFzIF9nZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzLHcgYXMgX3NjYWxlUmFuZ2VzQ2hhbmdlZCx4IGFzIGlzTnVtYmVyLHkgYXMgX3BhcnNlT2JqZWN0RGF0YVJhZGlhbFNjYWxlLHogYXMgZ2V0UmVsYXRpdmVQb3NpdGlvbixBIGFzIF9ybG9va3VwQnlLZXksQiBhcyBfbG9va3VwQnlLZXksQyBhcyBfaXNQb2ludEluQXJlYSxEIGFzIGdldEFuZ2xlRnJvbVBvaW50LEUgYXMgdG9QYWRkaW5nLEYgYXMgZWFjaCxHIGFzIGdldE1heGltdW1TaXplLEkgYXMgX2dldFBhcmVudE5vZGUsSiBhcyByZWFkVXNlZFNpemUsSyBhcyBzdXBwb3J0c0V2ZW50TGlzdGVuZXJPcHRpb25zLEwgYXMgdGhyb3R0bGVkLE0gYXMgX2lzRG9tU3VwcG9ydGVkLE4gYXMgX2ZhY3Rvcml6ZSxPIGFzIGZpbml0ZU9yRGVmYXVsdCxRIGFzIGNhbGxiYWNrLFIgYXMgX2FkZEdyYWNlLFMgYXMgX2xpbWl0VmFsdWUsVSBhcyB0b0RlZ3JlZXMsViBhcyBfbWVhc3VyZVRleHQsVyBhcyBfaW50MTZSYW5nZSxYIGFzIF9hbGlnblBpeGVsLFkgYXMgY2xpcEFyZWEsWiBhcyByZW5kZXJUZXh0LCQgYXMgdW5jbGlwQXJlYSxhMCBhcyB0b0ZvbnQsYTEgYXMgX3RvTGVmdFJpZ2h0Q2VudGVyLGEyIGFzIF9hbGlnblN0YXJ0RW5kLGEzIGFzIG92ZXJyaWRlcyxhNCBhcyBtZXJnZSxhNSBhcyBfY2FwaXRhbGl6ZSxhNiBhcyBkZXNjcmlwdG9ycyxhNyBhcyBpc0Z1bmN0aW9uLGE4IGFzIF9hdHRhY2hDb250ZXh0LGE5IGFzIF9jcmVhdGVSZXNvbHZlcixhYSBhcyBfZGVzY3JpcHRvcnMsYWIgYXMgbWVyZ2VJZixhYyBhcyB1aWQsYWQgYXMgZGVib3VuY2UsYWUgYXMgcmV0aW5hU2NhbGUsYWYgYXMgY2xlYXJDYW52YXMsYWcgYXMgc2V0c0VxdWFsLGFoIGFzIF9lbGVtZW50c0VxdWFsLGFpIGFzIF9pc0NsaWNrRXZlbnQsYWogYXMgX2lzQmV0d2VlbixhayBhcyBfcmVhZFZhbHVlVG9Qcm9wcyxhbCBhcyBfdXBkYXRlQmV6aWVyQ29udHJvbFBvaW50cyxhbSBhcyBfY29tcHV0ZVNlZ21lbnRzLGFuIGFzIF9ib3VuZFNlZ21lbnRzLGFvIGFzIF9zdGVwcGVkSW50ZXJwb2xhdGlvbixhcCBhcyBfYmV6aWVySW50ZXJwb2xhdGlvbixhcSBhcyBfcG9pbnRJbkxpbmUsYXIgYXMgX3N0ZXBwZWRMaW5lVG8sYXMgYXMgX2JlemllckN1cnZlVG8sYXQgYXMgZHJhd1BvaW50LGF1IGFzIGFkZFJvdW5kZWRSZWN0UGF0aCxhdiBhcyB0b1RSQkwsYXcgYXMgdG9UUkJMQ29ybmVycyxheCBhcyBfYm91bmRTZWdtZW50LGF5IGFzIF9ub3JtYWxpemVBbmdsZSxheiBhcyBnZXRSdGxBZGFwdGVyLGFBIGFzIG92ZXJyaWRlVGV4dERpcmVjdGlvbixhQiBhcyBfdGV4dFgsYUMgYXMgcmVzdG9yZVRleHREaXJlY3Rpb24sYUQgYXMgZHJhd1BvaW50TGVnZW5kLGFFIGFzIGRpc3RhbmNlQmV0d2VlblBvaW50cyxhRiBhcyBub29wLGFHIGFzIF9zZXRNaW5BbmRNYXhCeUtleSxhSCBhcyBuaWNlTnVtLGFJIGFzIGFsbW9zdFdob2xlLGFKIGFzIGFsbW9zdEVxdWFscyxhSyBhcyBfZGVjaW1hbFBsYWNlcyxhTCBhcyBUaWNrcyxhTSBhcyBsb2cxMCxhTiBhcyBfbG9uZ2VzdFRleHQsYU8gYXMgX2ZpbHRlckJldHdlZW4sYVAgYXMgX2xvb2t1cH1mcm9tIi4vY2h1bmtzL2hlbHBlcnMuc2VnbWVudC5qcyI7aW1wb3J0IkBrdXJrbGUvY29sb3IiO2NsYXNzIEFuaW1hdG9ye2NvbnN0cnVjdG9yKCl7dGhpcy5fcmVxdWVzdD1udWxsLHRoaXMuX2NoYXJ0cz1uZXcgTWFwLHRoaXMuX3J1bm5pbmc9ITEsdGhpcy5fbGFzdERhdGU9dm9pZCAwfV9ub3RpZnkoZSxpLGEsdCl7Y29uc3Qgcz1pLmxpc3RlbmVyc1t0XSxuPWkuZHVyYXRpb247cy5mb3JFYWNoKHQ9PnQoe2NoYXJ0OmUsaW5pdGlhbDppLmluaXRpYWwsbnVtU3RlcHM6bixjdXJyZW50U3RlcDpNYXRoLm1pbihhLWkuc3RhcnQsbil9KSl9X3JlZnJlc2goKXt0aGlzLl9yZXF1ZXN0fHwodGhpcy5fcnVubmluZz0hMCx0aGlzLl9yZXF1ZXN0PXJlcXVlc3RBbmltRnJhbWUuY2FsbCh3aW5kb3csKCk9Pnt0aGlzLl91cGRhdGUoKSx0aGlzLl9yZXF1ZXN0PW51bGwsdGhpcy5fcnVubmluZyYmdGhpcy5fcmVmcmVzaCgpfSkpfV91cGRhdGUocj1EYXRlLm5vdygpKXtsZXQgbz0wO3RoaXMuX2NoYXJ0cy5mb3JFYWNoKChhLHMpPT57aWYoYS5ydW5uaW5nJiZhLml0ZW1zLmxlbmd0aCl7Y29uc3Qgbj1hLml0ZW1zO2xldCB0PW4ubGVuZ3RoLTEsZT0hMSxpO2Zvcig7MDw9dDstLXQpKGk9blt0XSkuX2FjdGl2ZT8oaS5fdG90YWw+YS5kdXJhdGlvbiYmKGEuZHVyYXRpb249aS5fdG90YWwpLGkudGljayhyKSxlPSEwKTooblt0XT1uW24ubGVuZ3RoLTFdLG4ucG9wKCkpO2UmJihzLmRyYXcoKSx0aGlzLl9ub3RpZnkocyxhLHIsInByb2dyZXNzIikpLG4ubGVuZ3RofHwoYS5ydW5uaW5nPSExLHRoaXMuX25vdGlmeShzLGEsciwiY29tcGxldGUiKSxhLmluaXRpYWw9ITEpLG8rPW4ubGVuZ3RofX0pLHRoaXMuX2xhc3REYXRlPXIsMD09PW8mJih0aGlzLl9ydW5uaW5nPSExKX1fZ2V0QW5pbXModCl7Y29uc3QgZT10aGlzLl9jaGFydHM7bGV0IGk9ZS5nZXQodCk7cmV0dXJuIGl8fChpPXtydW5uaW5nOiExLGluaXRpYWw6ITAsaXRlbXM6W10sbGlzdGVuZXJzOntjb21wbGV0ZTpbXSxwcm9ncmVzczpbXX19LGUuc2V0KHQsaSkpLGl9bGlzdGVuKHQsZSxpKXt0aGlzLl9nZXRBbmltcyh0KS5saXN0ZW5lcnNbZV0ucHVzaChpKX1hZGQodCxlKXtlJiZlLmxlbmd0aCYmdGhpcy5fZ2V0QW5pbXModCkuaXRlbXMucHVzaCguLi5lKX1oYXModCl7cmV0dXJuIDA8dGhpcy5fZ2V0QW5pbXModCkuaXRlbXMubGVuZ3RofXN0YXJ0KHQpe2NvbnN0IGU9dGhpcy5fY2hhcnRzLmdldCh0KTtlJiYoZS5ydW5uaW5nPSEwLGUuc3RhcnQ9RGF0ZS5ub3coKSxlLmR1cmF0aW9uPWUuaXRlbXMucmVkdWNlKCh0LGUpPT5NYXRoLm1heCh0LGUuX2R1cmF0aW9uKSwwKSx0aGlzLl9yZWZyZXNoKCkpfXJ1bm5pbmcodCl7aWYoIXRoaXMuX3J1bm5pbmcpcmV0dXJuITE7dD10aGlzLl9jaGFydHMuZ2V0KHQpO3JldHVybiEhKHQmJnQucnVubmluZyYmdC5pdGVtcy5sZW5ndGgpfXN0b3AoZSl7Y29uc3QgaT10aGlzLl9jaGFydHMuZ2V0KGUpO2lmKGkmJmkuaXRlbXMubGVuZ3RoKXtjb25zdCBhPWkuaXRlbXM7bGV0IHQ9YS5sZW5ndGgtMTtmb3IoOzA8PXQ7LS10KWFbdF0uY2FuY2VsKCk7aS5pdGVtcz1bXSx0aGlzLl9ub3RpZnkoZSxpLERhdGUubm93KCksImNvbXBsZXRlIil9fXJlbW92ZSh0KXtyZXR1cm4gdGhpcy5fY2hhcnRzLmRlbGV0ZSh0KX19dmFyIGFuaW1hdG9yPW5ldyBBbmltYXRvcjtjb25zdCB0cmFuc3BhcmVudD0idHJhbnNwYXJlbnQiLGludGVycG9sYXRvcnM9e2Jvb2xlYW4odCxlLGkpe3JldHVybi41PGk/ZTp0fSxjb2xvcih0LGUsaSl7dD1jb2xvcih0fHx0cmFuc3BhcmVudCk7Y29uc3QgYT10LnZhbGlkJiZjb2xvcihlfHx0cmFuc3BhcmVudCk7cmV0dXJuIGEmJmEudmFsaWQ/YS5taXgodCxpKS5oZXhTdHJpbmcoKTplfSxudW1iZXIodCxlLGkpe3JldHVybiB0KyhlLXQpKml9fTtjbGFzcyBBbmltYXRpb257Y29uc3RydWN0b3IodCxlLGksYSl7dmFyIHM9ZVtpXSxzPShhPXJlc29sdmUoW3QudG8sYSxzLHQuZnJvbV0pLHJlc29sdmUoW3QuZnJvbSxzLGFdKSk7dGhpcy5fYWN0aXZlPSEwLHRoaXMuX2ZuPXQuZm58fGludGVycG9sYXRvcnNbdC50eXBlfHx0eXBlb2Ygc10sdGhpcy5fZWFzaW5nPWVmZmVjdHNbdC5lYXNpbmddfHxlZmZlY3RzLmxpbmVhcix0aGlzLl9zdGFydD1NYXRoLmZsb29yKERhdGUubm93KCkrKHQuZGVsYXl8fDApKSx0aGlzLl9kdXJhdGlvbj10aGlzLl90b3RhbD1NYXRoLmZsb29yKHQuZHVyYXRpb24pLHRoaXMuX2xvb3A9ISF0Lmxvb3AsdGhpcy5fdGFyZ2V0PWUsdGhpcy5fcHJvcD1pLHRoaXMuX2Zyb209cyx0aGlzLl90bz1hLHRoaXMuX3Byb21pc2VzPXZvaWQgMH1hY3RpdmUoKXtyZXR1cm4gdGhpcy5fYWN0aXZlfXVwZGF0ZSh0LGUsaSl7dmFyIGEscyxuO3RoaXMuX2FjdGl2ZSYmKHRoaXMuX25vdGlmeSghMSksYT10aGlzLl90YXJnZXRbdGhpcy5fcHJvcF0scz1pLXRoaXMuX3N0YXJ0LG49dGhpcy5fZHVyYXRpb24tcyx0aGlzLl9zdGFydD1pLHRoaXMuX2R1cmF0aW9uPU1hdGguZmxvb3IoTWF0aC5tYXgobix0LmR1cmF0aW9uKSksdGhpcy5fdG90YWwrPXMsdGhpcy5fbG9vcD0hIXQubG9vcCx0aGlzLl90bz1yZXNvbHZlKFt0LnRvLGUsYSx0LmZyb21dKSx0aGlzLl9mcm9tPXJlc29sdmUoW3QuZnJvbSxhLGVdKSl9Y2FuY2VsKCl7dGhpcy5fYWN0aXZlJiYodGhpcy50aWNrKERhdGUubm93KCkpLHRoaXMuX2FjdGl2ZT0hMSx0aGlzLl9ub3RpZnkoITEpKX10aWNrKHQpe3ZhciB0PXQtdGhpcy5fc3RhcnQsZT10aGlzLl9kdXJhdGlvbixpPXRoaXMuX3Byb3AsYT10aGlzLl9mcm9tLHM9dGhpcy5fbG9vcCxuPXRoaXMuX3RvO2xldCByO2lmKHRoaXMuX2FjdGl2ZT1hIT09biYmKHN8fHQ8ZSksIXRoaXMuX2FjdGl2ZSlyZXR1cm4gdGhpcy5fdGFyZ2V0W2ldPW4sdm9pZCB0aGlzLl9ub3RpZnkoITApO3Q8MD90aGlzLl90YXJnZXRbaV09YToocj10L2UlMixyPXMmJjE8cj8yLXI6cixyPXRoaXMuX2Vhc2luZyhNYXRoLm1pbigxLE1hdGgubWF4KDAscikpKSx0aGlzLl90YXJnZXRbaV09dGhpcy5fZm4oYSxuLHIpKX13YWl0KCl7Y29uc3QgaT10aGlzLl9wcm9taXNlc3x8KHRoaXMuX3Byb21pc2VzPVtdKTtyZXR1cm4gbmV3IFByb21pc2UoKHQsZSk9PntpLnB1c2goe3Jlczp0LHJlajplfSl9KX1fbm90aWZ5KHQpe3ZhciBlPXQ/InJlcyI6InJlaiI7Y29uc3QgaT10aGlzLl9wcm9taXNlc3x8W107Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0KyspaVt0XVtlXSgpfX1jbGFzcyBBbmltYXRpb25ze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5fY2hhcnQ9dCx0aGlzLl9wcm9wZXJ0aWVzPW5ldyBNYXAsdGhpcy5jb25maWd1cmUoZSl9Y29uZmlndXJlKHMpe2lmKGlzT2JqZWN0KHMpKXtjb25zdCBuPU9iamVjdC5rZXlzKGRlZmF1bHRzLmFuaW1hdGlvbikscj10aGlzLl9wcm9wZXJ0aWVzO09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHMpLmZvckVhY2goZT0+e2NvbnN0IHQ9c1tlXTtpZihpc09iamVjdCh0KSl7Y29uc3QgaT17fTtmb3IoY29uc3QgYSBvZiBuKWlbYV09dFthXTsoaXNBcnJheSh0LnByb3BlcnRpZXMpJiZ0LnByb3BlcnRpZXN8fFtlXSkuZm9yRWFjaCh0PT57dCE9PWUmJnIuaGFzKHQpfHxyLnNldCh0LGkpfSl9fSl9fV9hbmltYXRlT3B0aW9ucyh0LGUpe2NvbnN0IGk9ZS5vcHRpb25zO2U9cmVzb2x2ZVRhcmdldE9wdGlvbnModCxpKTtpZighZSlyZXR1cm5bXTtlPXRoaXMuX2NyZWF0ZUFuaW1hdGlvbnMoZSxpKTtyZXR1cm4gaS4kc2hhcmVkJiZhd2FpdEFsbCh0Lm9wdGlvbnMuJGFuaW1hdGlvbnMsaSkudGhlbigoKT0+e3Qub3B0aW9ucz1pfSwoKT0+e30pLGV9X2NyZWF0ZUFuaW1hdGlvbnMoZSxpKXtjb25zdCBhPXRoaXMuX3Byb3BlcnRpZXMscz1bXSxuPWUuJGFuaW1hdGlvbnN8fChlLiRhbmltYXRpb25zPXt9KTt2YXIgdD1PYmplY3Qua2V5cyhpKSxyPURhdGUubm93KCk7bGV0IG87Zm9yKG89dC5sZW5ndGgtMTswPD1vOy0tbyl7Y29uc3QgZD10W29dO2lmKCIkIiE9PWQuY2hhckF0KDApKWlmKCJvcHRpb25zIj09PWQpcy5wdXNoKC4uLnRoaXMuX2FuaW1hdGVPcHRpb25zKGUsaSkpO2Vsc2V7dmFyIGw9aVtkXTtsZXQgdD1uW2RdO3ZhciBoPWEuZ2V0KGQpO2lmKHQpe2lmKGgmJnQuYWN0aXZlKCkpe3QudXBkYXRlKGgsbCxyKTtjb250aW51ZX10LmNhbmNlbCgpfWgmJmguZHVyYXRpb24/KG5bZF09dD1uZXcgQW5pbWF0aW9uKGgsZSxkLGwpLHMucHVzaCh0KSk6ZVtkXT1sfX1yZXR1cm4gc311cGRhdGUodCxlKXt7aWYoMCE9PXRoaXMuX3Byb3BlcnRpZXMuc2l6ZSlyZXR1cm4odD10aGlzLl9jcmVhdGVBbmltYXRpb25zKHQsZSkpLmxlbmd0aD8oYW5pbWF0b3IuYWRkKHRoaXMuX2NoYXJ0LHQpLCEwKTp2b2lkIDA7T2JqZWN0LmFzc2lnbih0LGUpfX19ZnVuY3Rpb24gYXdhaXRBbGwoZSx0KXtjb25zdCBpPVtdO3ZhciBhPU9iamVjdC5rZXlzKHQpO2ZvcihsZXQgdD0wO3Q8YS5sZW5ndGg7dCsrKXtjb25zdCBzPWVbYVt0XV07cyYmcy5hY3RpdmUoKSYmaS5wdXNoKHMud2FpdCgpKX1yZXR1cm4gUHJvbWlzZS5hbGwoaSl9ZnVuY3Rpb24gcmVzb2x2ZVRhcmdldE9wdGlvbnMoZSxpKXtpZihpKXtsZXQgdD1lLm9wdGlvbnM7aWYodClyZXR1cm4gdC4kc2hhcmVkJiYoZS5vcHRpb25zPXQ9T2JqZWN0LmFzc2lnbih7fSx0LHskc2hhcmVkOiExLCRhbmltYXRpb25zOnt9fSkpLHQ7ZS5vcHRpb25zPWl9fWZ1bmN0aW9uIHNjYWxlQ2xpcCh0LGUpe3ZhciB0PXQmJnQub3B0aW9uc3x8e30saT10LnJldmVyc2UsYT12b2lkIDA9PT10Lm1pbj9lOjAsdD12b2lkIDA9PT10Lm1heD9lOjA7cmV0dXJue3N0YXJ0Omk/dDphLGVuZDppP2E6dH19ZnVuY3Rpb24gZGVmYXVsdENsaXAodCxlLGkpe2lmKCExPT09aSlyZXR1cm4hMTt0PXNjYWxlQ2xpcCh0LGkpLGU9c2NhbGVDbGlwKGUsaSk7cmV0dXJue3RvcDplLmVuZCxyaWdodDp0LmVuZCxib3R0b206ZS5zdGFydCxsZWZ0OnQuc3RhcnR9fWZ1bmN0aW9uIHRvQ2xpcCh0KXtsZXQgZSxpLGEscztyZXR1cm4gaXNPYmplY3QodCk/KGU9dC50b3AsaT10LnJpZ2h0LGE9dC5ib3R0b20scz10LmxlZnQpOmU9aT1hPXM9dCx7dG9wOmUscmlnaHQ6aSxib3R0b206YSxsZWZ0OnMsZGlzYWJsZWQ6ITE9PT10fX1mdW5jdGlvbiBnZXRTb3J0ZWREYXRhc2V0SW5kaWNlcyh0LGUpe2NvbnN0IGk9W107dmFyIGE9dC5fZ2V0U29ydGVkRGF0YXNldE1ldGFzKGUpO2xldCBzLG47Zm9yKHM9MCxuPWEubGVuZ3RoO3M8bjsrK3MpaS5wdXNoKGFbc10uaW5kZXgpO3JldHVybiBpfWZ1bmN0aW9uIGFwcGx5U3RhY2sodCxlLGksYT17fSl7dmFyIHM9dC5rZXlzLG49InNpbmdsZSI9PT1hLm1vZGU7bGV0IHIsbyxsLGg7aWYobnVsbCE9PWUpe2ZvcihyPTAsbz1zLmxlbmd0aDtyPG87KytyKXtpZigobD0rc1tyXSk9PT1pKXtpZihhLmFsbCljb250aW51ZTticmVha31oPXQudmFsdWVzW2xdLGlzTnVtYmVyRmluaXRlKGgpJiYobnx8MD09PWV8fHNpZ24oZSk9PT1zaWduKGgpKSYmKGUrPWgpfXJldHVybiBlfX1mdW5jdGlvbiBjb252ZXJ0T2JqZWN0RGF0YVRvQXJyYXkodCl7dmFyIGU9T2JqZWN0LmtleXModCk7Y29uc3QgaT1uZXcgQXJyYXkoZS5sZW5ndGgpO2xldCBhLHMsbjtmb3IoYT0wLHM9ZS5sZW5ndGg7YTxzOysrYSluPWVbYV0saVthXT17eDpuLHk6dFtuXX07cmV0dXJuIGl9ZnVuY3Rpb24gaXNTdGFja2VkKHQsZSl7dD10JiZ0Lm9wdGlvbnMuc3RhY2tlZDtyZXR1cm4gdHx8dm9pZCAwPT09dCYmdm9pZCAwIT09ZS5zdGFja31mdW5jdGlvbiBnZXRTdGFja0tleSh0LGUsaSl7cmV0dXJuYCR7dC5pZH0uJHtlLmlkfS5gKyhpLnN0YWNrfHxpLnR5cGUpfWZ1bmN0aW9uIGdldFVzZXJCb3VuZHModCl7dmFye21pbjp0LG1heDplLG1pbkRlZmluZWQ6aSxtYXhEZWZpbmVkOmF9PXQuZ2V0VXNlckJvdW5kcygpO3JldHVybnttaW46aT90Ok51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6YT9lOk51bWJlci5QT1NJVElWRV9JTkZJTklUWX19ZnVuY3Rpb24gZ2V0T3JDcmVhdGVTdGFjayh0LGUsaSl7Y29uc3QgYT10W2VdfHwodFtlXT17fSk7cmV0dXJuIGFbaV18fChhW2ldPXt9KX1mdW5jdGlvbiBnZXRMYXN0SW5kZXhJblN0YWNrKHQsZSxpLGEpe2Zvcihjb25zdCBuIG9mIGUuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXMoYSkucmV2ZXJzZSgpKXt2YXIgcz10W24uaW5kZXhdO2lmKGkmJjA8c3x8IWkmJnM8MClyZXR1cm4gbi5pbmRleH1yZXR1cm4gbnVsbH1mdW5jdGlvbiB1cGRhdGVTdGFja3ModCxlKXtjb25zdHtjaGFydDppLF9jYWNoZWRNZXRhOmF9PXQ7dmFyIHM9aS5fc3RhY2tzfHwoaS5fc3RhY2tzPXt9KSx7aVNjYWxlOnQsdlNjYWxlOm4saW5kZXg6cn09YSxvPXQuYXhpcyxsPW4uYXhpcyxoPWdldFN0YWNrS2V5KHQsbixhKSxkPWUubGVuZ3RoO2xldCBjO2ZvcihsZXQgdD0wO3Q8ZDsrK3Qpe2NvbnN0IHA9ZVt0XTt2YXJ7W29dOnUsW2xdOmd9PXA7Y29uc3QgZj1wLl9zdGFja3N8fChwLl9zdGFja3M9e30pLG09KChjPWZbbF09Z2V0T3JDcmVhdGVTdGFjayhzLGgsdSkpW3JdPWcsYy5fdG9wPWdldExhc3RJbmRleEluU3RhY2soYyxuLCEwLGEudHlwZSksYy5fYm90dG9tPWdldExhc3RJbmRleEluU3RhY2soYyxuLCExLGEudHlwZSksYy5fdmlzdWFsVmFsdWVzfHwoYy5fdmlzdWFsVmFsdWVzPXt9KSk7bVtyXT1nfX1mdW5jdGlvbiBnZXRGaXJzdFNjYWxlSWQodCxlKXtjb25zdCBpPXQuc2NhbGVzO3JldHVybiBPYmplY3Qua2V5cyhpKS5maWx0ZXIodD0+aVt0XS5heGlzPT09ZSkuc2hpZnQoKX1mdW5jdGlvbiBjcmVhdGVEYXRhc2V0Q29udGV4dCh0LGUpe3JldHVybiBjcmVhdGVDb250ZXh0KHQse2FjdGl2ZTohMSxkYXRhc2V0OnZvaWQgMCxkYXRhc2V0SW5kZXg6ZSxpbmRleDplLG1vZGU6ImRlZmF1bHQiLHR5cGU6ImRhdGFzZXQifSl9ZnVuY3Rpb24gY3JlYXRlRGF0YUNvbnRleHQodCxlLGkpe3JldHVybiBjcmVhdGVDb250ZXh0KHQse2FjdGl2ZTohMSxkYXRhSW5kZXg6ZSxwYXJzZWQ6dm9pZCAwLHJhdzp2b2lkIDAsZWxlbWVudDppLGluZGV4OmUsbW9kZToiZGVmYXVsdCIsdHlwZToiZGF0YSJ9KX1mdW5jdGlvbiBjbGVhclN0YWNrcyh0LGUpe3ZhciBpPXQuY29udHJvbGxlci5pbmRleCxhPXQudlNjYWxlJiZ0LnZTY2FsZS5heGlzO2lmKGEpZm9yKGNvbnN0IHMgb2YgZT1lfHx0Ll9wYXJzZWQpe2NvbnN0IG49cy5fc3RhY2tzO2lmKCFufHx2b2lkIDA9PT1uW2FdfHx2b2lkIDA9PT1uW2FdW2ldKXJldHVybjtkZWxldGUgblthXVtpXSx2b2lkIDAhPT1uW2FdLl92aXN1YWxWYWx1ZXMmJnZvaWQgMCE9PW5bYV0uX3Zpc3VhbFZhbHVlc1tpXSYmZGVsZXRlIG5bYV0uX3Zpc3VhbFZhbHVlc1tpXX19Y29uc3QgaXNEaXJlY3RVcGRhdGVNb2RlPXQ9PiJyZXNldCI9PT10fHwibm9uZSI9PT10LGNsb25lSWZOb3RTaGFyZWQ9KHQsZSk9PmU/dDpPYmplY3QuYXNzaWduKHt9LHQpLGNyZWF0ZVN0YWNrPSh0LGUsaSk9PnQmJiFlLmhpZGRlbiYmZS5fc3RhY2tlZCYme2tleXM6Z2V0U29ydGVkRGF0YXNldEluZGljZXMoaSwhMCksdmFsdWVzOm51bGx9O2NsYXNzIERhdGFzZXRDb250cm9sbGVye3N0YXRpYyBkZWZhdWx0cz17fTtzdGF0aWMgZGF0YXNldEVsZW1lbnRUeXBlPW51bGw7c3RhdGljIGRhdGFFbGVtZW50VHlwZT1udWxsO2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5jaGFydD10LHRoaXMuX2N0eD10LmN0eCx0aGlzLmluZGV4PWUsdGhpcy5fY2FjaGVkRGF0YU9wdHM9e30sdGhpcy5fY2FjaGVkTWV0YT10aGlzLmdldE1ldGEoKSx0aGlzLl90eXBlPXRoaXMuX2NhY2hlZE1ldGEudHlwZSx0aGlzLm9wdGlvbnM9dm9pZCAwLHRoaXMuX3BhcnNpbmc9ITEsdGhpcy5fZGF0YT12b2lkIDAsdGhpcy5fb2JqZWN0RGF0YT12b2lkIDAsdGhpcy5fc2hhcmVkT3B0aW9ucz12b2lkIDAsdGhpcy5fZHJhd1N0YXJ0PXZvaWQgMCx0aGlzLl9kcmF3Q291bnQ9dm9pZCAwLHRoaXMuZW5hYmxlT3B0aW9uU2hhcmluZz0hMSx0aGlzLnN1cHBvcnRzRGVjaW1hdGlvbj0hMSx0aGlzLiRjb250ZXh0PXZvaWQgMCx0aGlzLl9zeW5jTGlzdD1bXSx0aGlzLmRhdGFzZXRFbGVtZW50VHlwZT1uZXcudGFyZ2V0LmRhdGFzZXRFbGVtZW50VHlwZSx0aGlzLmRhdGFFbGVtZW50VHlwZT1uZXcudGFyZ2V0LmRhdGFFbGVtZW50VHlwZSx0aGlzLmluaXRpYWxpemUoKX1pbml0aWFsaXplKCl7Y29uc3QgdD10aGlzLl9jYWNoZWRNZXRhO3RoaXMuY29uZmlndXJlKCksdGhpcy5saW5rU2NhbGVzKCksdC5fc3RhY2tlZD1pc1N0YWNrZWQodC52U2NhbGUsdCksdGhpcy5hZGRFbGVtZW50cygpLHRoaXMub3B0aW9ucy5maWxsJiYhdGhpcy5jaGFydC5pc1BsdWdpbkVuYWJsZWQoImZpbGxlciIpJiZjb25zb2xlLndhcm4oIlRyaWVkIHRvIHVzZSB0aGUgJ2ZpbGwnIG9wdGlvbiB3aXRob3V0IHRoZSAnRmlsbGVyJyBwbHVnaW4gZW5hYmxlZC4gUGxlYXNlIGltcG9ydCBhbmQgcmVnaXN0ZXIgdGhlICdGaWxsZXInIHBsdWdpbiBhbmQgbWFrZSBzdXJlIGl0IGlzIG5vdCBkaXNhYmxlZCBpbiB0aGUgb3B0aW9ucyIpfXVwZGF0ZUluZGV4KHQpe3RoaXMuaW5kZXghPT10JiZjbGVhclN0YWNrcyh0aGlzLl9jYWNoZWRNZXRhKSx0aGlzLmluZGV4PXR9bGlua1NjYWxlcygpe3ZhciB0PXRoaXMuY2hhcnQ7Y29uc3QgZT10aGlzLl9jYWNoZWRNZXRhO3ZhciBpPXRoaXMuZ2V0RGF0YXNldCgpLGE9KHQsZSxpLGEpPT4ieCI9PT10P2U6InIiPT09dD9hOmkscz1lLnhBeGlzSUQ9dmFsdWVPckRlZmF1bHQoaS54QXhpc0lELGdldEZpcnN0U2NhbGVJZCh0LCJ4IikpLG49ZS55QXhpc0lEPXZhbHVlT3JEZWZhdWx0KGkueUF4aXNJRCxnZXRGaXJzdFNjYWxlSWQodCwieSIpKSxpPWUuckF4aXNJRD12YWx1ZU9yRGVmYXVsdChpLnJBeGlzSUQsZ2V0Rmlyc3RTY2FsZUlkKHQsInIiKSksdD1lLmluZGV4QXhpcyxyPWUuaUF4aXNJRD1hKHQscyxuLGkpLGE9ZS52QXhpc0lEPWEodCxuLHMsaSk7ZS54U2NhbGU9dGhpcy5nZXRTY2FsZUZvcklkKHMpLGUueVNjYWxlPXRoaXMuZ2V0U2NhbGVGb3JJZChuKSxlLnJTY2FsZT10aGlzLmdldFNjYWxlRm9ySWQoaSksZS5pU2NhbGU9dGhpcy5nZXRTY2FsZUZvcklkKHIpLGUudlNjYWxlPXRoaXMuZ2V0U2NhbGVGb3JJZChhKX1nZXREYXRhc2V0KCl7cmV0dXJuIHRoaXMuY2hhcnQuZGF0YS5kYXRhc2V0c1t0aGlzLmluZGV4XX1nZXRNZXRhKCl7cmV0dXJuIHRoaXMuY2hhcnQuZ2V0RGF0YXNldE1ldGEodGhpcy5pbmRleCl9Z2V0U2NhbGVGb3JJZCh0KXtyZXR1cm4gdGhpcy5jaGFydC5zY2FsZXNbdF19X2dldE90aGVyU2NhbGUodCl7dmFyIGU9dGhpcy5fY2FjaGVkTWV0YTtyZXR1cm4gdD09PWUuaVNjYWxlP2UudlNjYWxlOmUuaVNjYWxlfXJlc2V0KCl7dGhpcy5fdXBkYXRlKCJyZXNldCIpfV9kZXN0cm95KCl7dmFyIHQ9dGhpcy5fY2FjaGVkTWV0YTt0aGlzLl9kYXRhJiZ1bmxpc3RlbkFycmF5RXZlbnRzKHRoaXMuX2RhdGEsdGhpcyksdC5fc3RhY2tlZCYmY2xlYXJTdGFja3ModCl9X2RhdGFDaGVjaygpe2NvbnN0IHQ9dGhpcy5nZXREYXRhc2V0KCk7dmFyIGU9dC5kYXRhfHwodC5kYXRhPVtdKSxpPXRoaXMuX2RhdGE7aWYoaXNPYmplY3QoZSkpdGhpcy5fZGF0YT1jb252ZXJ0T2JqZWN0RGF0YVRvQXJyYXkoZSk7ZWxzZSBpZihpIT09ZSl7aWYoaSl7dW5saXN0ZW5BcnJheUV2ZW50cyhpLHRoaXMpO2NvbnN0IGE9dGhpcy5fY2FjaGVkTWV0YTtjbGVhclN0YWNrcyhhKSxhLl9wYXJzZWQ9W119ZSYmT2JqZWN0LmlzRXh0ZW5zaWJsZShlKSYmbGlzdGVuQXJyYXlFdmVudHMoZSx0aGlzKSx0aGlzLl9zeW5jTGlzdD1bXSx0aGlzLl9kYXRhPWV9fWFkZEVsZW1lbnRzKCl7Y29uc3QgdD10aGlzLl9jYWNoZWRNZXRhO3RoaXMuX2RhdGFDaGVjaygpLHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlJiYodC5kYXRhc2V0PW5ldyB0aGlzLmRhdGFzZXRFbGVtZW50VHlwZSl9YnVpbGRPclVwZGF0ZUVsZW1lbnRzKHQpe2NvbnN0IGU9dGhpcy5fY2FjaGVkTWV0YTt2YXIgaT10aGlzLmdldERhdGFzZXQoKTtsZXQgYT0hMTt0aGlzLl9kYXRhQ2hlY2soKTt2YXIgcz1lLl9zdGFja2VkO2UuX3N0YWNrZWQ9aXNTdGFja2VkKGUudlNjYWxlLGUpLGUuc3RhY2shPT1pLnN0YWNrJiYoYT0hMCxjbGVhclN0YWNrcyhlKSxlLnN0YWNrPWkuc3RhY2spLHRoaXMuX3Jlc3luY0VsZW1lbnRzKHQpLCFhJiZzPT09ZS5fc3RhY2tlZHx8dXBkYXRlU3RhY2tzKHRoaXMsZS5fcGFyc2VkKX1jb25maWd1cmUoKXtjb25zdCB0PXRoaXMuY2hhcnQuY29uZmlnO3ZhciBlPXQuZGF0YXNldFNjb3BlS2V5cyh0aGlzLl90eXBlKSxlPXQuZ2V0T3B0aW9uU2NvcGVzKHRoaXMuZ2V0RGF0YXNldCgpLGUsITApO3RoaXMub3B0aW9ucz10LmNyZWF0ZVJlc29sdmVyKGUsdGhpcy5nZXRDb250ZXh0KCkpLHRoaXMuX3BhcnNpbmc9dGhpcy5vcHRpb25zLnBhcnNpbmcsdGhpcy5fY2FjaGVkRGF0YU9wdHM9e319cGFyc2UodCxlKXtjb25zdHtfY2FjaGVkTWV0YTppLF9kYXRhOmF9PXRoaXM7dmFye2lTY2FsZTpzLF9zdGFja2VkOm59PWk7Y29uc3Qgcj1zLmF4aXM7bGV0IG89MD09PXQmJmU9PT1hLmxlbmd0aHx8aS5fc29ydGVkLGw9MDx0JiZpLl9wYXJzZWRbdC0xXSxoLGQsYztpZighMT09PXRoaXMuX3BhcnNpbmcpaS5fcGFyc2VkPWEsaS5fc29ydGVkPSEwLGM9YTtlbHNle2M9aXNBcnJheShhW3RdKT90aGlzLnBhcnNlQXJyYXlEYXRhKGksYSx0LGUpOmlzT2JqZWN0KGFbdF0pP3RoaXMucGFyc2VPYmplY3REYXRhKGksYSx0LGUpOnRoaXMucGFyc2VQcmltaXRpdmVEYXRhKGksYSx0LGUpO2ZvcihoPTA7aDxlOysraClpLl9wYXJzZWRbaCt0XT1kPWNbaF0sbyYmKChudWxsPT09ZFtyXXx8bCYmZFtyXTxsW3JdKSYmKG89ITEpLGw9ZCk7aS5fc29ydGVkPW99biYmdXBkYXRlU3RhY2tzKHRoaXMsYyl9cGFyc2VQcmltaXRpdmVEYXRhKHQsZSxpLGEpe2NvbnN0e2lTY2FsZTpzLHZTY2FsZTpufT10O3ZhciByPXMuYXhpcyxvPW4uYXhpcyxsPXMuZ2V0TGFiZWxzKCksaD1zPT09bjtjb25zdCBkPW5ldyBBcnJheShhKTtsZXQgYyx1LGc7Zm9yKGM9MCx1PWE7Yzx1OysrYylnPWMraSxkW2NdPXtbcl06aHx8cy5wYXJzZShsW2ddLGcpLFtvXTpuLnBhcnNlKGVbZ10sZyl9O3JldHVybiBkfXBhcnNlQXJyYXlEYXRhKHQsZSxpLGEpe2NvbnN0e3hTY2FsZTpzLHlTY2FsZTpufT10LHI9bmV3IEFycmF5KGEpO2xldCBvLGwsaCxkO2ZvcihvPTAsbD1hO288bDsrK28pZD1lW2g9bytpXSxyW29dPXt4OnMucGFyc2UoZFswXSxoKSx5Om4ucGFyc2UoZFsxXSxoKX07cmV0dXJuIHJ9cGFyc2VPYmplY3REYXRhKHQsZSxpLGEpe2NvbnN0e3hTY2FsZTpzLHlTY2FsZTpufT10O3Zhcnt4QXhpc0tleTpyPSJ4Iix5QXhpc0tleTpvPSJ5In09dGhpcy5fcGFyc2luZztjb25zdCBsPW5ldyBBcnJheShhKTtsZXQgaCxkLGMsdTtmb3IoaD0wLGQ9YTtoPGQ7KytoKXU9ZVtjPWgraV0sbFtoXT17eDpzLnBhcnNlKHJlc29sdmVPYmplY3RLZXkodSxyKSxjKSx5Om4ucGFyc2UocmVzb2x2ZU9iamVjdEtleSh1LG8pLGMpfTtyZXR1cm4gbH1nZXRQYXJzZWQodCl7cmV0dXJuIHRoaXMuX2NhY2hlZE1ldGEuX3BhcnNlZFt0XX1nZXREYXRhRWxlbWVudCh0KXtyZXR1cm4gdGhpcy5fY2FjaGVkTWV0YS5kYXRhW3RdfWFwcGx5U3RhY2sodCxlLGkpe3ZhciBhPXRoaXMuY2hhcnQscz10aGlzLl9jYWNoZWRNZXRhLG49ZVt0LmF4aXNdO3JldHVybiBhcHBseVN0YWNrKHtrZXlzOmdldFNvcnRlZERhdGFzZXRJbmRpY2VzKGEsITApLHZhbHVlczplLl9zdGFja3NbdC5heGlzXS5fdmlzdWFsVmFsdWVzfSxuLHMuaW5kZXgse21vZGU6aX0pfXVwZGF0ZVJhbmdlRnJvbVBhcnNlZCh0LGUsaSxhKXt2YXIgcz1pW2UuYXhpc107bGV0IG49bnVsbD09PXM/TmFOOnM7aT1hJiZpLl9zdGFja3NbZS5heGlzXTthJiZpJiYoYS52YWx1ZXM9aSxuPWFwcGx5U3RhY2soYSxzLHRoaXMuX2NhY2hlZE1ldGEuaW5kZXgpKSx0Lm1pbj1NYXRoLm1pbih0Lm1pbixuKSx0Lm1heD1NYXRoLm1heCh0Lm1heCxuKX1nZXRNaW5NYXgoZSx0KXt2YXIgaT10aGlzLl9jYWNoZWRNZXRhO2NvbnN0IGE9aS5fcGFyc2VkO3ZhciBzPWkuX3NvcnRlZCYmZT09PWkuaVNjYWxlLG49YS5sZW5ndGg7Y29uc3Qgcj10aGlzLl9nZXRPdGhlclNjYWxlKGUpO3ZhciBvPWNyZWF0ZVN0YWNrKHQsaSx0aGlzLmNoYXJ0KSxsPXttaW46TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFl9O2NvbnN0e21pbjpoLG1heDpkfT1nZXRVc2VyQm91bmRzKHIpO2xldCBjLHU7ZnVuY3Rpb24gZygpe3ZhciB0PSh1PWFbY10pW3IuYXhpc107cmV0dXJuIWlzTnVtYmVyRmluaXRlKHVbZS5heGlzXSl8fGg+dHx8ZDx0fWZvcihjPTA7YzxuJiYoZygpfHwodGhpcy51cGRhdGVSYW5nZUZyb21QYXJzZWQobCxlLHUsbyksIXMpKTsrK2MpO2lmKHMpZm9yKGM9bi0xOzA8PWM7LS1jKWlmKCFnKCkpe3RoaXMudXBkYXRlUmFuZ2VGcm9tUGFyc2VkKGwsZSx1LG8pO2JyZWFrfXJldHVybiBsfWdldEFsbFBhcnNlZFZhbHVlcyh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLl9wYXJzZWQ7Y29uc3QgaT1bXTtsZXQgYSxzLG47Zm9yKGE9MCxzPWUubGVuZ3RoO2E8czsrK2Epbj1lW2FdW3QuYXhpc10saXNOdW1iZXJGaW5pdGUobikmJmkucHVzaChuKTtyZXR1cm4gaX1nZXRNYXhPdmVyZmxvdygpe3JldHVybiExfWdldExhYmVsQW5kVmFsdWUodCl7dmFyIGU9dGhpcy5fY2FjaGVkTWV0YTtjb25zdCBpPWUuaVNjYWxlLGE9ZS52U2NhbGU7ZT10aGlzLmdldFBhcnNlZCh0KTtyZXR1cm57bGFiZWw6aT8iIitpLmdldExhYmVsRm9yVmFsdWUoZVtpLmF4aXNdKToiIix2YWx1ZTphPyIiK2EuZ2V0TGFiZWxGb3JWYWx1ZShlW2EuYXhpc10pOiIifX1fdXBkYXRlKHQpe2NvbnN0IGU9dGhpcy5fY2FjaGVkTWV0YTt0aGlzLnVwZGF0ZSh0fHwiZGVmYXVsdCIpLGUuX2NsaXA9dG9DbGlwKHZhbHVlT3JEZWZhdWx0KHRoaXMub3B0aW9ucy5jbGlwLGRlZmF1bHRDbGlwKGUueFNjYWxlLGUueVNjYWxlLHRoaXMuZ2V0TWF4T3ZlcmZsb3coKSkpKX11cGRhdGUodCl7fWRyYXcoKXt2YXIgdD10aGlzLl9jdHgsZT10aGlzLmNoYXJ0O2NvbnN0IGk9dGhpcy5fY2FjaGVkTWV0YTt2YXIgYT1pLmRhdGF8fFtdLHM9ZS5jaGFydEFyZWE7Y29uc3Qgbj1bXTt2YXIgcj10aGlzLl9kcmF3U3RhcnR8fDAsbz10aGlzLl9kcmF3Q291bnR8fGEubGVuZ3RoLXIsbD10aGlzLm9wdGlvbnMuZHJhd0FjdGl2ZUVsZW1lbnRzT25Ub3A7bGV0IGg7Zm9yKGkuZGF0YXNldCYmaS5kYXRhc2V0LmRyYXcodCxzLHIsbyksaD1yO2g8citvOysraCl7Y29uc3QgZD1hW2hdO2QuaGlkZGVufHwoZC5hY3RpdmUmJmw/bi5wdXNoKGQpOmQuZHJhdyh0LHMpKX1mb3IoaD0wO2g8bi5sZW5ndGg7KytoKW5baF0uZHJhdyh0LHMpfWdldFN0eWxlKHQsZSl7ZT1lPyJhY3RpdmUiOiJkZWZhdWx0IjtyZXR1cm4gdm9pZCAwPT09dCYmdGhpcy5fY2FjaGVkTWV0YS5kYXRhc2V0P3RoaXMucmVzb2x2ZURhdGFzZXRFbGVtZW50T3B0aW9ucyhlKTp0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModHx8MCxlKX1nZXRDb250ZXh0KHQsZSxpKXt2YXIgYT10aGlzLmdldERhdGFzZXQoKTtsZXQgcztpZigwPD10JiZ0PHRoaXMuX2NhY2hlZE1ldGEuZGF0YS5sZW5ndGgpe2NvbnN0IG49dGhpcy5fY2FjaGVkTWV0YS5kYXRhW3RdOyhzPW4uJGNvbnRleHR8fChuLiRjb250ZXh0PWNyZWF0ZURhdGFDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLHQsbikpKS5wYXJzZWQ9dGhpcy5nZXRQYXJzZWQodCkscy5yYXc9YS5kYXRhW3RdLHMuaW5kZXg9cy5kYXRhSW5kZXg9dH1lbHNlKHM9dGhpcy4kY29udGV4dHx8KHRoaXMuJGNvbnRleHQ9Y3JlYXRlRGF0YXNldENvbnRleHQodGhpcy5jaGFydC5nZXRDb250ZXh0KCksdGhpcy5pbmRleCkpKS5kYXRhc2V0PWEscy5pbmRleD1zLmRhdGFzZXRJbmRleD10aGlzLmluZGV4O3JldHVybiBzLmFjdGl2ZT0hIWUscy5tb2RlPWksc31yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKHQpe3JldHVybiB0aGlzLl9yZXNvbHZlRWxlbWVudE9wdGlvbnModGhpcy5kYXRhc2V0RWxlbWVudFR5cGUuaWQsdCl9cmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyh0LGUpe3JldHVybiB0aGlzLl9yZXNvbHZlRWxlbWVudE9wdGlvbnModGhpcy5kYXRhRWxlbWVudFR5cGUuaWQsZSx0KX1fcmVzb2x2ZUVsZW1lbnRPcHRpb25zKHQsZT0iZGVmYXVsdCIsaSl7Y29uc3QgYT0iYWN0aXZlIj09PWUscz10aGlzLl9jYWNoZWREYXRhT3B0czt2YXIgbj10KyItIitlLHI9c1tuXSxvPXRoaXMuZW5hYmxlT3B0aW9uU2hhcmluZyYmZGVmaW5lZChpKTtpZihyKXJldHVybiBjbG9uZUlmTm90U2hhcmVkKHIsbyk7Y29uc3QgbD10aGlzLmNoYXJ0LmNvbmZpZzt2YXIgcj1sLmRhdGFzZXRFbGVtZW50U2NvcGVLZXlzKHRoaXMuX3R5cGUsdCksaD1hP1t0KyJIb3ZlciIsImhvdmVyIix0LCIiXTpbdCwiIl0scj1sLmdldE9wdGlvblNjb3Blcyh0aGlzLmdldERhdGFzZXQoKSxyKSx0PU9iamVjdC5rZXlzKGRlZmF1bHRzLmVsZW1lbnRzW3RdKTtjb25zdCBkPWwucmVzb2x2ZU5hbWVkT3B0aW9ucyhyLHQsKCk9PnRoaXMuZ2V0Q29udGV4dChpLGEsZSksaCk7cmV0dXJuIGQuJHNoYXJlZCYmKGQuJHNoYXJlZD1vLHNbbl09T2JqZWN0LmZyZWV6ZShjbG9uZUlmTm90U2hhcmVkKGQsbykpKSxkfV9yZXNvbHZlQW5pbWF0aW9ucyh0LGUsaSl7dmFyIGE9dGhpcy5jaGFydDtjb25zdCBzPXRoaXMuX2NhY2hlZERhdGFPcHRzO3ZhciBuPSJhbmltYXRpb24tIitlLHI9c1tuXTtpZihyKXJldHVybiByO2xldCBvO2lmKCExIT09YS5vcHRpb25zLmFuaW1hdGlvbil7Y29uc3QgbD10aGlzLmNoYXJ0LmNvbmZpZztyPWwuZGF0YXNldEFuaW1hdGlvblNjb3BlS2V5cyh0aGlzLl90eXBlLGUpLHI9bC5nZXRPcHRpb25TY29wZXModGhpcy5nZXREYXRhc2V0KCkscik7bz1sLmNyZWF0ZVJlc29sdmVyKHIsdGhpcy5nZXRDb250ZXh0KHQsaSxlKSl9cj1uZXcgQW5pbWF0aW9ucyhhLG8mJm8uYW5pbWF0aW9ucyk7cmV0dXJuIG8mJm8uX2NhY2hlYWJsZSYmKHNbbl09T2JqZWN0LmZyZWV6ZShyKSkscn1nZXRTaGFyZWRPcHRpb25zKHQpe2lmKHQuJHNoYXJlZClyZXR1cm4gdGhpcy5fc2hhcmVkT3B0aW9uc3x8KHRoaXMuX3NoYXJlZE9wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSx0KSl9aW5jbHVkZU9wdGlvbnModCxlKXtyZXR1cm4hZXx8aXNEaXJlY3RVcGRhdGVNb2RlKHQpfHx0aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWR9X2dldFNoYXJlZE9wdGlvbnModCxlKXt2YXIgdD10aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCxlKSxpPXRoaXMuX3NoYXJlZE9wdGlvbnMsYT10aGlzLmdldFNoYXJlZE9wdGlvbnModCksaT10aGlzLmluY2x1ZGVPcHRpb25zKGUsYSl8fGEhPT1pO3JldHVybiB0aGlzLnVwZGF0ZVNoYXJlZE9wdGlvbnMoYSxlLHQpLHtzaGFyZWRPcHRpb25zOmEsaW5jbHVkZU9wdGlvbnM6aX19dXBkYXRlRWxlbWVudCh0LGUsaSxhKXtpc0RpcmVjdFVwZGF0ZU1vZGUoYSk/T2JqZWN0LmFzc2lnbih0LGkpOnRoaXMuX3Jlc29sdmVBbmltYXRpb25zKGUsYSkudXBkYXRlKHQsaSl9dXBkYXRlU2hhcmVkT3B0aW9ucyh0LGUsaSl7dCYmIWlzRGlyZWN0VXBkYXRlTW9kZShlKSYmdGhpcy5fcmVzb2x2ZUFuaW1hdGlvbnModm9pZCAwLGUpLnVwZGF0ZSh0LGkpfV9zZXRTdHlsZSh0LGUsaSxhKXt0LmFjdGl2ZT1hO3ZhciBzPXRoaXMuZ2V0U3R5bGUoZSxhKTt0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucyhlLGksYSkudXBkYXRlKHQse29wdGlvbnM6IWEmJnRoaXMuZ2V0U2hhcmVkT3B0aW9ucyhzKXx8c30pfXJlbW92ZUhvdmVyU3R5bGUodCxlLGkpe3RoaXMuX3NldFN0eWxlKHQsaSwiYWN0aXZlIiwhMSl9c2V0SG92ZXJTdHlsZSh0LGUsaSl7dGhpcy5fc2V0U3R5bGUodCxpLCJhY3RpdmUiLCEwKX1fcmVtb3ZlRGF0YXNldEhvdmVyU3R5bGUoKXt2YXIgdD10aGlzLl9jYWNoZWRNZXRhLmRhdGFzZXQ7dCYmdGhpcy5fc2V0U3R5bGUodCx2b2lkIDAsImFjdGl2ZSIsITEpfV9zZXREYXRhc2V0SG92ZXJTdHlsZSgpe3ZhciB0PXRoaXMuX2NhY2hlZE1ldGEuZGF0YXNldDt0JiZ0aGlzLl9zZXRTdHlsZSh0LHZvaWQgMCwiYWN0aXZlIiwhMCl9X3Jlc3luY0VsZW1lbnRzKHQpe3ZhciBlLGksYSxzPXRoaXMuX2RhdGEsbj10aGlzLl9jYWNoZWRNZXRhLmRhdGE7Zm9yKFtlLGksYV1vZiB0aGlzLl9zeW5jTGlzdCl0aGlzW2VdKGksYSk7dGhpcy5fc3luY0xpc3Q9W107dmFyIG49bi5sZW5ndGgscz1zLmxlbmd0aCxyPU1hdGgubWluKHMsbik7ciYmdGhpcy5wYXJzZSgwLHIpLG48cz90aGlzLl9pbnNlcnRFbGVtZW50cyhuLHMtbix0KTpzPG4mJnRoaXMuX3JlbW92ZUVsZW1lbnRzKHMsbi1zKX1faW5zZXJ0RWxlbWVudHModCxlLGk9ITApe3ZhciBhPXRoaXMuX2NhY2hlZE1ldGE7Y29uc3Qgcz1hLmRhdGEsbj10K2U7bGV0IHI7dmFyIG89dD0+e2Zvcih0Lmxlbmd0aCs9ZSxyPXQubGVuZ3RoLTE7cj49bjtyLS0pdFtyXT10W3ItZV19O2ZvcihvKHMpLHI9dDtyPG47KytyKXNbcl09bmV3IHRoaXMuZGF0YUVsZW1lbnRUeXBlO3RoaXMuX3BhcnNpbmcmJm8oYS5fcGFyc2VkKSx0aGlzLnBhcnNlKHQsZSksaSYmdGhpcy51cGRhdGVFbGVtZW50cyhzLHQsZSwicmVzZXQiKX11cGRhdGVFbGVtZW50cyh0LGUsaSxhKXt9X3JlbW92ZUVsZW1lbnRzKHQsZSl7Y29uc3QgaT10aGlzLl9jYWNoZWRNZXRhO3ZhciBhO3RoaXMuX3BhcnNpbmcmJihhPWkuX3BhcnNlZC5zcGxpY2UodCxlKSxpLl9zdGFja2VkJiZjbGVhclN0YWNrcyhpLGEpKSxpLmRhdGEuc3BsaWNlKHQsZSl9X3N5bmModCl7dmFyIGUsaSxhO3RoaXMuX3BhcnNpbmc/dGhpcy5fc3luY0xpc3QucHVzaCh0KTooW2UsaSxhXT10LHRoaXNbZV0oaSxhKSksdGhpcy5jaGFydC5fZGF0YUNoYW5nZXMucHVzaChbdGhpcy5pbmRleCwuLi50XSl9X29uRGF0YVB1c2goKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoO3RoaXMuX3N5bmMoWyJfaW5zZXJ0RWxlbWVudHMiLHRoaXMuZ2V0RGF0YXNldCgpLmRhdGEubGVuZ3RoLXQsdF0pfV9vbkRhdGFQb3AoKXt0aGlzLl9zeW5jKFsiX3JlbW92ZUVsZW1lbnRzIix0aGlzLl9jYWNoZWRNZXRhLmRhdGEubGVuZ3RoLTEsMV0pfV9vbkRhdGFTaGlmdCgpe3RoaXMuX3N5bmMoWyJfcmVtb3ZlRWxlbWVudHMiLDAsMV0pfV9vbkRhdGFTcGxpY2UodCxlKXtlJiZ0aGlzLl9zeW5jKFsiX3JlbW92ZUVsZW1lbnRzIix0LGVdKTt2YXIgaT1hcmd1bWVudHMubGVuZ3RoLTI7aSYmdGhpcy5fc3luYyhbIl9pbnNlcnRFbGVtZW50cyIsdCxpXSl9X29uRGF0YVVuc2hpZnQoKXt0aGlzLl9zeW5jKFsiX2luc2VydEVsZW1lbnRzIiwwLGFyZ3VtZW50cy5sZW5ndGhdKX19ZnVuY3Rpb24gZ2V0QWxsU2NhbGVWYWx1ZXMoYSx0KXtpZighYS5fY2FjaGUuJGJhcil7Y29uc3Qgcz1hLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKHQpO2xldCBpPVtdO2ZvcihsZXQgdD0wLGU9cy5sZW5ndGg7dDxlO3QrKylpPWkuY29uY2F0KHNbdF0uY29udHJvbGxlci5nZXRBbGxQYXJzZWRWYWx1ZXMoYSkpO2EuX2NhY2hlLiRiYXI9X2FycmF5VW5pcXVlKGkuc29ydCgodCxlKT0+dC1lKSl9cmV0dXJuIGEuX2NhY2hlLiRiYXJ9ZnVuY3Rpb24gY29tcHV0ZU1pblNhbXBsZVNpemUodCl7Y29uc3QgZT10LmlTY2FsZTt2YXIgaT1nZXRBbGxTY2FsZVZhbHVlcyhlLHQudHlwZSk7bGV0IGE9ZS5fbGVuZ3RoLHMsbixyLG87dmFyIGw9KCk9PnszMjc2NyE9PXImJi0zMjc2OCE9PXImJihkZWZpbmVkKG8pJiYoYT1NYXRoLm1pbihhLE1hdGguYWJzKHItbyl8fGEpKSxvPXIpfTtmb3Iocz0wLG49aS5sZW5ndGg7czxuOysrcylyPWUuZ2V0UGl4ZWxGb3JWYWx1ZShpW3NdKSxsKCk7Zm9yKG89dm9pZCAwLHM9MCxuPWUudGlja3MubGVuZ3RoO3M8bjsrK3Mpcj1lLmdldFBpeGVsRm9yVGljayhzKSxsKCk7cmV0dXJuIGF9ZnVuY3Rpb24gY29tcHV0ZUZpdENhdGVnb3J5VHJhaXRzKHQsZSxpLGEpe3ZhciBzPWkuYmFyVGhpY2tuZXNzO2xldCBuLHI7cmV0dXJuIHI9aXNOdWxsT3JVbmRlZihzKT8obj1lLm1pbippLmNhdGVnb3J5UGVyY2VudGFnZSxpLmJhclBlcmNlbnRhZ2UpOihuPXMqYSwxKSx7Y2h1bms6bi9hLHJhdGlvOnIsc3RhcnQ6ZS5waXhlbHNbdF0tbi8yfX1mdW5jdGlvbiBjb21wdXRlRmxleENhdGVnb3J5VHJhaXRzKHQsZSxpLGEpe3ZhciBzPWUucGl4ZWxzLG49c1t0XTtsZXQgcj0wPHQ/c1t0LTFdOm51bGwsbz10PHMubGVuZ3RoLTE/c1t0KzFdOm51bGw7cz1pLmNhdGVnb3J5UGVyY2VudGFnZSxudWxsPT09ciYmKHI9bi0obnVsbD09PW8/ZS5lbmQtZS5zdGFydDpvLW4pKSxudWxsPT09byYmKG89bituLXIpLHQ9bi0obi1NYXRoLm1pbihyLG8pKS8yKnM7cmV0dXJue2NodW5rOk1hdGguYWJzKG8tcikvMipzL2EscmF0aW86aS5iYXJQZXJjZW50YWdlLHN0YXJ0OnR9fWZ1bmN0aW9uIHBhcnNlRmxvYXRCYXIodCxlLGksYSl7dmFyIHM9aS5wYXJzZSh0WzBdLGEpLHQ9aS5wYXJzZSh0WzFdLGEpLGE9TWF0aC5taW4ocyx0KSxuPU1hdGgubWF4KHMsdCk7bGV0IHI9YSxvPW47TWF0aC5hYnMoYSk+TWF0aC5hYnMobikmJihyPW4sbz1hKSxlW2kuYXhpc109byxlLl9jdXN0b209e2JhclN0YXJ0OnIsYmFyRW5kOm8sc3RhcnQ6cyxlbmQ6dCxtaW46YSxtYXg6bn19ZnVuY3Rpb24gcGFyc2VWYWx1ZSh0LGUsaSxhKXtyZXR1cm4gaXNBcnJheSh0KT9wYXJzZUZsb2F0QmFyKHQsZSxpLGEpOmVbaS5heGlzXT1pLnBhcnNlKHQsYSksZX1mdW5jdGlvbiBwYXJzZUFycmF5T3JQcmltaXRpdmUodCxlLGksYSl7Y29uc3Qgcz10LmlTY2FsZTt2YXIgbj10LnZTY2FsZSxyPXMuZ2V0TGFiZWxzKCksbz1zPT09bjtjb25zdCBsPVtdO2xldCBoLGQsYyx1O2ZvcihkPShoPWkpK2E7aDxkOysraCl1PWVbaF0sKGM9e30pW3MuYXhpc109b3x8cy5wYXJzZShyW2hdLGgpLGwucHVzaChwYXJzZVZhbHVlKHUsYyxuLGgpKTtyZXR1cm4gbH1mdW5jdGlvbiBpc0Zsb2F0QmFyKHQpe3JldHVybiB0JiZ2b2lkIDAhPT10LmJhclN0YXJ0JiZ2b2lkIDAhPT10LmJhckVuZH1mdW5jdGlvbiBiYXJTaWduKHQsZSxpKXtyZXR1cm4gMCE9PXQ/c2lnbih0KTooZS5pc0hvcml6b250YWwoKT8xOi0xKSooZS5taW4+PWk/MTotMSl9ZnVuY3Rpb24gYm9yZGVyUHJvcHModCl7bGV0IGUsaSxhLHMsbjtyZXR1cm4gYT10Lmhvcml6b250YWw/KGU9dC5iYXNlPnQueCxpPSJsZWZ0IiwicmlnaHQiKTooZT10LmJhc2U8dC55LGk9ImJvdHRvbSIsInRvcCIpLG49ZT8ocz0iZW5kIiwic3RhcnQiKToocz0ic3RhcnQiLCJlbmQiKSx7c3RhcnQ6aSxlbmQ6YSxyZXZlcnNlOmUsdG9wOnMsYm90dG9tOm59fWZ1bmN0aW9uIHNldEJvcmRlclNraXBwZWQodCxlLGksYSl7bGV0IHM9ZS5ib3JkZXJTa2lwcGVkO2NvbnN0IG49e307dmFyIHIsbyxsLGg7cz8hMD09PXM/dC5ib3JkZXJTa2lwcGVkPXt0b3A6ITAscmlnaHQ6ITAsYm90dG9tOiEwLGxlZnQ6ITB9Oih7c3RhcnQ6ZSxlbmQ6cixyZXZlcnNlOm8sdG9wOmwsYm90dG9tOmh9PWJvcmRlclByb3BzKHQpLCJtaWRkbGUiPT09cyYmaSYmKHQuZW5hYmxlQm9yZGVyUmFkaXVzPSEwLHM9KGkuX3RvcHx8MCk9PT1hP2w6KGkuX2JvdHRvbXx8MCk9PT1hP2g6KG5bcGFyc2VFZGdlKGgsZSxyLG8pXT0hMCxsKSksbltwYXJzZUVkZ2UocyxlLHIsbyldPSEwLHQuYm9yZGVyU2tpcHBlZD1uKTp0LmJvcmRlclNraXBwZWQ9bn1mdW5jdGlvbiBwYXJzZUVkZ2UodCxlLGksYSl7cmV0dXJuIHQ9YT9zdGFydEVuZCh0PXN3YXAodCxlLGkpLGksZSk6c3RhcnRFbmQodCxlLGkpfWZ1bmN0aW9uIHN3YXAodCxlLGkpe3JldHVybiB0PT09ZT9pOnQ9PT1pP2U6dH1mdW5jdGlvbiBzdGFydEVuZCh0LGUsaSl7cmV0dXJuInN0YXJ0Ij09PXQ/ZToiZW5kIj09PXQ/aTp0fWZ1bmN0aW9uIHNldEluZmxhdGVBbW91bnQodCx7aW5mbGF0ZUFtb3VudDplfSxpKXt0LmluZmxhdGVBbW91bnQ9ImF1dG8iPT09ZT8xPT09aT8uMzM6MDplfWNsYXNzIEJhckNvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlcntzdGF0aWMgaWQ9ImJhciI7c3RhdGljIGRlZmF1bHRzPXtkYXRhc2V0RWxlbWVudFR5cGU6ITEsZGF0YUVsZW1lbnRUeXBlOiJiYXIiLGNhdGVnb3J5UGVyY2VudGFnZTouOCxiYXJQZXJjZW50YWdlOi45LGdyb3VwZWQ6ITAsYW5pbWF0aW9uczp7bnVtYmVyczp7dHlwZToibnVtYmVyIixwcm9wZXJ0aWVzOlsieCIsInkiLCJiYXNlIiwid2lkdGgiLCJoZWlnaHQiXX19fTtzdGF0aWMgb3ZlcnJpZGVzPXtzY2FsZXM6e19pbmRleF86e3R5cGU6ImNhdGVnb3J5IixvZmZzZXQ6ITAsZ3JpZDp7b2Zmc2V0OiEwfX0sX3ZhbHVlXzp7dHlwZToibGluZWFyIixiZWdpbkF0WmVybzohMH19fTtwYXJzZVByaW1pdGl2ZURhdGEodCxlLGksYSl7cmV0dXJuIHBhcnNlQXJyYXlPclByaW1pdGl2ZSh0LGUsaSxhKX1wYXJzZUFycmF5RGF0YSh0LGUsaSxhKXtyZXR1cm4gcGFyc2VBcnJheU9yUHJpbWl0aXZlKHQsZSxpLGEpfXBhcnNlT2JqZWN0RGF0YSh0LGUsaSxhKXtjb25zdHtpU2NhbGU6cyx2U2NhbGU6bn09dDt2YXJ7eEF4aXNLZXk6dD0ieCIseUF4aXNLZXk6cj0ieSJ9PXRoaXMuX3BhcnNpbmcsbz0ieCI9PT1zLmF4aXM/dDpyLGw9IngiPT09bi5heGlzP3Q6cjtjb25zdCBoPVtdO2xldCBkLGMsdSxnO2ZvcihjPShkPWkpK2E7ZDxjOysrZClnPWVbZF0sKHU9e30pW3MuYXhpc109cy5wYXJzZShyZXNvbHZlT2JqZWN0S2V5KGcsbyksZCksaC5wdXNoKHBhcnNlVmFsdWUocmVzb2x2ZU9iamVjdEtleShnLGwpLHUsbixkKSk7cmV0dXJuIGh9dXBkYXRlUmFuZ2VGcm9tUGFyc2VkKHQsZSxpLGEpe3N1cGVyLnVwZGF0ZVJhbmdlRnJvbVBhcnNlZCh0LGUsaSxhKTthPWkuX2N1c3RvbTthJiZlPT09dGhpcy5fY2FjaGVkTWV0YS52U2NhbGUmJih0Lm1pbj1NYXRoLm1pbih0Lm1pbixhLm1pbiksdC5tYXg9TWF0aC5tYXgodC5tYXgsYS5tYXgpKX1nZXRNYXhPdmVyZmxvdygpe3JldHVybiAwfWdldExhYmVsQW5kVmFsdWUodCl7Y29uc3R7aVNjYWxlOmUsdlNjYWxlOml9PXRoaXMuX2NhY2hlZE1ldGE7dmFyIHQ9dGhpcy5nZXRQYXJzZWQodCksYT10Ll9jdXN0b20sYT1pc0Zsb2F0QmFyKGEpPyJbIithLnN0YXJ0KyIsICIrYS5lbmQrIl0iOiIiK2kuZ2V0TGFiZWxGb3JWYWx1ZSh0W2kuYXhpc10pO3JldHVybntsYWJlbDoiIitlLmdldExhYmVsRm9yVmFsdWUodFtlLmF4aXNdKSx2YWx1ZTphfX1pbml0aWFsaXplKCl7dGhpcy5lbmFibGVPcHRpb25TaGFyaW5nPSEwLHN1cGVyLmluaXRpYWxpemUoKTtjb25zdCB0PXRoaXMuX2NhY2hlZE1ldGE7dC5zdGFjaz10aGlzLmdldERhdGFzZXQoKS5zdGFja311cGRhdGUodCl7dmFyIGU9dGhpcy5fY2FjaGVkTWV0YTt0aGlzLnVwZGF0ZUVsZW1lbnRzKGUuZGF0YSwwLGUuZGF0YS5sZW5ndGgsdCl9dXBkYXRlRWxlbWVudHMoZSxpLGEscyl7dmFyIG49InJlc2V0Ij09PXM7Y29uc3R7aW5kZXg6cixfY2FjaGVkTWV0YTp7dlNjYWxlOm99fT10aGlzO3ZhciBsPW8uZ2V0QmFzZVBpeGVsKCksaD1vLmlzSG9yaXpvbnRhbCgpLGQ9dGhpcy5fZ2V0UnVsZXIoKSx7c2hhcmVkT3B0aW9uczpjLGluY2x1ZGVPcHRpb25zOnV9PXRoaXMuX2dldFNoYXJlZE9wdGlvbnMoaSxzKTtmb3IobGV0IHQ9aTt0PGkrYTt0Kyspe3ZhciBnPXRoaXMuZ2V0UGFyc2VkKHQpLHA9bnx8aXNOdWxsT3JVbmRlZihnW28uYXhpc10pP3tiYXNlOmwsaGVhZDpsfTp0aGlzLl9jYWxjdWxhdGVCYXJWYWx1ZVBpeGVscyh0KSxmPXRoaXMuX2NhbGN1bGF0ZUJhckluZGV4UGl4ZWxzKHQsZCksbT0oZy5fc3RhY2tzfHx7fSlbby5heGlzXTtjb25zdCB2PXtob3Jpem9udGFsOmgsYmFzZTpwLmJhc2UsZW5hYmxlQm9yZGVyUmFkaXVzOiFtfHxpc0Zsb2F0QmFyKGcuX2N1c3RvbSl8fHI9PT1tLl90b3B8fHI9PT1tLl9ib3R0b20seDpoP3AuaGVhZDpmLmNlbnRlcix5Omg/Zi5jZW50ZXI6cC5oZWFkLGhlaWdodDpoP2Yuc2l6ZTpNYXRoLmFicyhwLnNpemUpLHdpZHRoOmg/TWF0aC5hYnMocC5zaXplKTpmLnNpemV9O3UmJih2Lm9wdGlvbnM9Y3x8dGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQsZVt0XS5hY3RpdmU/ImFjdGl2ZSI6cykpO2c9di5vcHRpb25zfHxlW3RdLm9wdGlvbnM7c2V0Qm9yZGVyU2tpcHBlZCh2LGcsbSxyKSxzZXRJbmZsYXRlQW1vdW50KHYsZyxkLnJhdGlvKSx0aGlzLnVwZGF0ZUVsZW1lbnQoZVt0XSx0LHYscyl9fV9nZXRTdGFja3ModCxpKXtjb25zdCBlPXRoaXMuX2NhY2hlZE1ldGFbImlTY2FsZSJdO3ZhciBhPWUuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXModGhpcy5fdHlwZSkuZmlsdGVyKHQ9PnQuY29udHJvbGxlci5vcHRpb25zLmdyb3VwZWQpLHM9ZS5vcHRpb25zLnN0YWNrZWQ7Y29uc3Qgbj1bXTtmb3IoY29uc3QgciBvZiBhKWlmKCh2b2lkIDA9PT1pfHwhKHQ9Pnt2YXIgZT10LmNvbnRyb2xsZXIuZ2V0UGFyc2VkKGkpLGU9ZSYmZVt0LnZTY2FsZS5heGlzXTtpZihpc051bGxPclVuZGVmKGUpfHxpc05hTihlKSlyZXR1cm4hMH0pKHIpKSYmKCghMT09PXN8fC0xPT09bi5pbmRleE9mKHIuc3RhY2spfHx2b2lkIDA9PT1zJiZ2b2lkIDA9PT1yLnN0YWNrKSYmbi5wdXNoKHIuc3RhY2spLHIuaW5kZXg9PT10KSlicmVhaztyZXR1cm4gbi5sZW5ndGh8fG4ucHVzaCh2b2lkIDApLG59X2dldFN0YWNrQ291bnQodCl7cmV0dXJuIHRoaXMuX2dldFN0YWNrcyh2b2lkIDAsdCkubGVuZ3RofV9nZXRTdGFja0luZGV4KHQsZSxpKXtjb25zdCBhPXRoaXMuX2dldFN0YWNrcyh0LGkpO3Q9dm9pZCAwIT09ZT9hLmluZGV4T2YoZSk6LTE7cmV0dXJuLTE9PT10P2EubGVuZ3RoLTE6dH1fZ2V0UnVsZXIoKXt2YXIgdD10aGlzLm9wdGlvbnMsZT10aGlzLl9jYWNoZWRNZXRhO2NvbnN0IGk9ZS5pU2NhbGUsYT1bXTtsZXQgcyxuO2ZvcihzPTAsbj1lLmRhdGEubGVuZ3RoO3M8bjsrK3MpYS5wdXNoKGkuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLmdldFBhcnNlZChzKVtpLmF4aXNdLHMpKTt2YXIgcj10LmJhclRoaWNrbmVzcztyZXR1cm57bWluOnJ8fGNvbXB1dGVNaW5TYW1wbGVTaXplKGUpLHBpeGVsczphLHN0YXJ0OmkuX3N0YXJ0UGl4ZWwsZW5kOmkuX2VuZFBpeGVsLHN0YWNrQ291bnQ6dGhpcy5fZ2V0U3RhY2tDb3VudCgpLHNjYWxlOmksZ3JvdXBlZDp0Lmdyb3VwZWQscmF0aW86cj8xOnQuY2F0ZWdvcnlQZXJjZW50YWdlKnQuYmFyUGVyY2VudGFnZX19X2NhbGN1bGF0ZUJhclZhbHVlUGl4ZWxzKHQpe2NvbnN0e19jYWNoZWRNZXRhOnt2U2NhbGU6ZSxfc3RhY2tlZDppLGluZGV4OmF9LG9wdGlvbnM6e2Jhc2U6cyxtaW5CYXJMZW5ndGg6bn19PXRoaXM7dmFyIHI9c3x8MDtjb25zdCBvPXRoaXMuZ2V0UGFyc2VkKHQpO3ZhciBsPW8uX2N1c3RvbSxoPWlzRmxvYXRCYXIobCk7bGV0IGQ9b1tlLmF4aXNdLGM9MCx1PWk/dGhpcy5hcHBseVN0YWNrKGUsbyxpKTpkLGcscDt1IT09ZCYmKGM9dS1kLHU9ZCksaCYmKGQ9bC5iYXJTdGFydCx1PWwuYmFyRW5kLWwuYmFyU3RhcnQsMCE9PWQmJnNpZ24oZCkhPT1zaWduKGwuYmFyRW5kKSYmKGM9MCksYys9ZCk7dmFyIGYsbD1pc051bGxPclVuZGVmKHMpfHxoP2M6cztsZXQgbT1lLmdldFBpeGVsRm9yVmFsdWUobCk7cmV0dXJuIGc9dGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eSh0KT9lLmdldFBpeGVsRm9yVmFsdWUoYyt1KTptLHA9Zy1tLE1hdGguYWJzKHApPG4mJihwPWJhclNpZ24ocCxlLHIpKm4sZD09PXImJihtLT1wLzIpLGw9ZS5nZXRQaXhlbEZvckRlY2ltYWwoMCksdD1lLmdldFBpeGVsRm9yRGVjaW1hbCgxKSxmPU1hdGgubWluKGwsdCksbD1NYXRoLm1heChsLHQpLG09TWF0aC5tYXgoTWF0aC5taW4obSxsKSxmKSxnPW0rcCxpJiYhaCYmKG8uX3N0YWNrc1tlLmF4aXNdLl92aXN1YWxWYWx1ZXNbYV09ZS5nZXRWYWx1ZUZvclBpeGVsKGcpLWUuZ2V0VmFsdWVGb3JQaXhlbChtKSkpLG09PT1lLmdldFBpeGVsRm9yVmFsdWUocikmJih0PXNpZ24ocCkqZS5nZXRMaW5lV2lkdGhGb3JWYWx1ZShyKS8yLG0rPXQscC09dCkse3NpemU6cCxiYXNlOm0saGVhZDpnLGNlbnRlcjpnK3AvMn19X2NhbGN1bGF0ZUJhckluZGV4UGl4ZWxzKHQsZSl7Y29uc3QgaT1lLnNjYWxlO3ZhciBhLHM9dGhpcy5vcHRpb25zLG49cy5za2lwTnVsbCxyPXZhbHVlT3JEZWZhdWx0KHMubWF4QmFyVGhpY2tuZXNzLDEvMCk7bGV0IG8sbDtyZXR1cm4gbD1lLmdyb3VwZWQ/KGE9bj90aGlzLl9nZXRTdGFja0NvdW50KHQpOmUuc3RhY2tDb3VudCxzPSgiZmxleCI9PT1zLmJhclRoaWNrbmVzcz9jb21wdXRlRmxleENhdGVnb3J5VHJhaXRzOmNvbXB1dGVGaXRDYXRlZ29yeVRyYWl0cykodCxlLHMsYSksYT10aGlzLl9nZXRTdGFja0luZGV4KHRoaXMuaW5kZXgsdGhpcy5fY2FjaGVkTWV0YS5zdGFjayxuP3Q6dm9pZCAwKSxvPXMuc3RhcnQrcy5jaHVuayphK3MuY2h1bmsvMixNYXRoLm1pbihyLHMuY2h1bmsqcy5yYXRpbykpOihvPWkuZ2V0UGl4ZWxGb3JWYWx1ZSh0aGlzLmdldFBhcnNlZCh0KVtpLmF4aXNdLHQpLE1hdGgubWluKHIsZS5taW4qZS5yYXRpbykpLHtiYXNlOm8tbC8yLGhlYWQ6bytsLzIsY2VudGVyOm8sc2l6ZTpsfX1kcmF3KCl7dmFyIHQ9dGhpcy5fY2FjaGVkTWV0YSxlPXQudlNjYWxlO2NvbnN0IGk9dC5kYXRhO3ZhciBhPWkubGVuZ3RoO2xldCBzPTA7Zm9yKDtzPGE7KytzKW51bGwhPT10aGlzLmdldFBhcnNlZChzKVtlLmF4aXNdJiZpW3NdLmRyYXcodGhpcy5fY3R4KX19Y2xhc3MgQnViYmxlQ29udHJvbGxlciBleHRlbmRzIERhdGFzZXRDb250cm9sbGVye3N0YXRpYyBpZD0iYnViYmxlIjtzdGF0aWMgZGVmYXVsdHM9e2RhdGFzZXRFbGVtZW50VHlwZTohMSxkYXRhRWxlbWVudFR5cGU6InBvaW50IixhbmltYXRpb25zOntudW1iZXJzOnt0eXBlOiJudW1iZXIiLHByb3BlcnRpZXM6WyJ4IiwieSIsImJvcmRlcldpZHRoIiwicmFkaXVzIl19fX07c3RhdGljIG92ZXJyaWRlcz17c2NhbGVzOnt4Ont0eXBlOiJsaW5lYXIifSx5Ont0eXBlOiJsaW5lYXIifX19O2luaXRpYWxpemUoKXt0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmc9ITAsc3VwZXIuaW5pdGlhbGl6ZSgpfXBhcnNlUHJpbWl0aXZlRGF0YSh0LGUsaSxhKXtjb25zdCBzPXN1cGVyLnBhcnNlUHJpbWl0aXZlRGF0YSh0LGUsaSxhKTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKylzW3RdLl9jdXN0b209dGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQraSkucmFkaXVzO3JldHVybiBzfXBhcnNlQXJyYXlEYXRhKHQsZSxpLGEpe2NvbnN0IHM9c3VwZXIucGFyc2VBcnJheURhdGEodCxlLGksYSk7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe3ZhciBuPWVbaSt0XTtzW3RdLl9jdXN0b209dmFsdWVPckRlZmF1bHQoblsyXSx0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCtpKS5yYWRpdXMpfXJldHVybiBzfXBhcnNlT2JqZWN0RGF0YSh0LGUsaSxhKXtjb25zdCBzPXN1cGVyLnBhcnNlT2JqZWN0RGF0YSh0LGUsaSxhKTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKyl7dmFyIG49ZVtpK3RdO3NbdF0uX2N1c3RvbT12YWx1ZU9yRGVmYXVsdChuJiZuLnImJituLnIsdGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQraSkucmFkaXVzKX1yZXR1cm4gc31nZXRNYXhPdmVyZmxvdygpe2NvbnN0IGU9dGhpcy5fY2FjaGVkTWV0YS5kYXRhO2xldCBpPTA7Zm9yKGxldCB0PWUubGVuZ3RoLTE7MDw9dDstLXQpaT1NYXRoLm1heChpLGVbdF0uc2l6ZSh0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCkpLzIpO3JldHVybiAwPGkmJml9Z2V0TGFiZWxBbmRWYWx1ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLGk9dGhpcy5jaGFydC5kYXRhLmxhYmVsc3x8W107Y29uc3R7eFNjYWxlOmEseVNjYWxlOnN9PWU7dmFyIGU9dGhpcy5nZXRQYXJzZWQodCksbj1hLmdldExhYmVsRm9yVmFsdWUoZS54KSxyPXMuZ2V0TGFiZWxGb3JWYWx1ZShlLnkpLGU9ZS5fY3VzdG9tO3JldHVybntsYWJlbDppW3RdfHwiIix2YWx1ZToiKCIrbisiLCAiK3IrKGU/IiwgIitlOiIiKSsiKSJ9fXVwZGF0ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLmRhdGE7dGhpcy51cGRhdGVFbGVtZW50cyhlLDAsZS5sZW5ndGgsdCl9dXBkYXRlRWxlbWVudHMoZSxpLGEscyl7dmFyIG49InJlc2V0Ij09PXM7Y29uc3R7aVNjYWxlOnIsdlNjYWxlOm99PXRoaXMuX2NhY2hlZE1ldGE7dmFye3NoYXJlZE9wdGlvbnM6bCxpbmNsdWRlT3B0aW9uczpofT10aGlzLl9nZXRTaGFyZWRPcHRpb25zKGkscyksZD1yLmF4aXMsYz1vLmF4aXM7Zm9yKGxldCB0PWk7dDxpK2E7dCsrKXt2YXIgdT1lW3RdLGc9IW4mJnRoaXMuZ2V0UGFyc2VkKHQpO2NvbnN0IGY9e307dmFyIHA9ZltkXT1uP3IuZ2V0UGl4ZWxGb3JEZWNpbWFsKC41KTpyLmdldFBpeGVsRm9yVmFsdWUoZ1tkXSksZz1mW2NdPW4/by5nZXRCYXNlUGl4ZWwoKTpvLmdldFBpeGVsRm9yVmFsdWUoZ1tjXSk7Zi5za2lwPWlzTmFOKHApfHxpc05hTihnKSxoJiYoZi5vcHRpb25zPWx8fHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyh0LHUuYWN0aXZlPyJhY3RpdmUiOnMpLG4mJihmLm9wdGlvbnMucmFkaXVzPTApKSx0aGlzLnVwZGF0ZUVsZW1lbnQodSx0LGYscyl9fXJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCxlKXt2YXIgaT10aGlzLmdldFBhcnNlZCh0KTtsZXQgYT1zdXBlci5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQsZSk7dD0oYT1hLiRzaGFyZWQ/T2JqZWN0LmFzc2lnbih7fSxhLHskc2hhcmVkOiExfSk6YSkucmFkaXVzO3JldHVybiJhY3RpdmUiIT09ZSYmKGEucmFkaXVzPTApLGEucmFkaXVzKz12YWx1ZU9yRGVmYXVsdChpJiZpLl9jdXN0b20sdCksYX19ZnVuY3Rpb24gZ2V0UmF0aW9BbmRPZmZzZXQodCxlLGEpe2xldCBpPTEscz0xLG49MCxyPTA7aWYoZTxUQVUpe2NvbnN0IHU9dCxnPXUrZTt2YXIgdD1NYXRoLmNvcyh1KSxlPU1hdGguc2luKHUpLG89TWF0aC5jb3MoZyksbD1NYXRoLnNpbihnKSxoPSh0LGUsaSk9Pl9hbmdsZUJldHdlZW4odCx1LGcsITApPzE6TWF0aC5tYXgoZSxlKmEsaSxpKmEpLGQ9KHQsZSxpKT0+X2FuZ2xlQmV0d2Vlbih0LHUsZywhMCk/LTE6TWF0aC5taW4oZSxlKmEsaSxpKmEpLGM9aCgwLHQsbyksaD1oKEhBTEZfUEksZSxsKSx0PWQoUEksdCxvKSxvPWQoUEkrSEFMRl9QSSxlLGwpO2k9KGMtdCkvMixzPShoLW8pLzIsbj0tKGMrdCkvMixyPS0oaCtvKS8yfXJldHVybntyYXRpb1g6aSxyYXRpb1k6cyxvZmZzZXRYOm4sb2Zmc2V0WTpyfX1jbGFzcyBEb3VnaG51dENvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlcntzdGF0aWMgaWQ9ImRvdWdobnV0IjtzdGF0aWMgZGVmYXVsdHM9e2RhdGFzZXRFbGVtZW50VHlwZTohMSxkYXRhRWxlbWVudFR5cGU6ImFyYyIsYW5pbWF0aW9uOnthbmltYXRlUm90YXRlOiEwLGFuaW1hdGVTY2FsZTohMX0sYW5pbWF0aW9uczp7bnVtYmVyczp7dHlwZToibnVtYmVyIixwcm9wZXJ0aWVzOlsiY2lyY3VtZmVyZW5jZSIsImVuZEFuZ2xlIiwiaW5uZXJSYWRpdXMiLCJvdXRlclJhZGl1cyIsInN0YXJ0QW5nbGUiLCJ4IiwieSIsIm9mZnNldCIsImJvcmRlcldpZHRoIiwic3BhY2luZyJdfX0sY3V0b3V0OiI1MCUiLHJvdGF0aW9uOjAsY2lyY3VtZmVyZW5jZTozNjAscmFkaXVzOiIxMDAlIixzcGFjaW5nOjAsaW5kZXhBeGlzOiJyIn07c3RhdGljIGRlc2NyaXB0b3JzPXtfc2NyaXB0YWJsZTp0PT4ic3BhY2luZyIhPT10LF9pbmRleGFibGU6dD0+InNwYWNpbmciIT09dCYmIXQuc3RhcnRzV2l0aCgiYm9yZGVyRGFzaCIpJiYhdC5zdGFydHNXaXRoKCJob3ZlckJvcmRlckRhc2giKX07c3RhdGljIG92ZXJyaWRlcz17YXNwZWN0UmF0aW86MSxwbHVnaW5zOntsZWdlbmQ6e2xhYmVsczp7Z2VuZXJhdGVMYWJlbHMocyl7Y29uc3QgdD1zLmRhdGE7aWYodC5sYWJlbHMubGVuZ3RoJiZ0LmRhdGFzZXRzLmxlbmd0aCl7Y29uc3R7cG9pbnRTdHlsZTpuLGNvbG9yOnJ9PXMubGVnZW5kLm9wdGlvbnNbImxhYmVscyJdO3JldHVybiB0LmxhYmVscy5tYXAoKHQsZSk9Pntjb25zdCBpPXMuZ2V0RGF0YXNldE1ldGEoMCk7dmFyIGE9aS5jb250cm9sbGVyLmdldFN0eWxlKGUpO3JldHVybnt0ZXh0OnQsZmlsbFN0eWxlOmEuYmFja2dyb3VuZENvbG9yLHN0cm9rZVN0eWxlOmEuYm9yZGVyQ29sb3IsZm9udENvbG9yOnIsbGluZVdpZHRoOmEuYm9yZGVyV2lkdGgscG9pbnRTdHlsZTpuLGhpZGRlbjohcy5nZXREYXRhVmlzaWJpbGl0eShlKSxpbmRleDplfX0pfXJldHVybltdfX0sb25DbGljayh0LGUsaSl7aS5jaGFydC50b2dnbGVEYXRhVmlzaWJpbGl0eShlLmluZGV4KSxpLmNoYXJ0LnVwZGF0ZSgpfX19fTtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQsZSksdGhpcy5lbmFibGVPcHRpb25TaGFyaW5nPSEwLHRoaXMuaW5uZXJSYWRpdXM9dm9pZCAwLHRoaXMub3V0ZXJSYWRpdXM9dm9pZCAwLHRoaXMub2Zmc2V0WD12b2lkIDAsdGhpcy5vZmZzZXRZPXZvaWQgMH1saW5rU2NhbGVzKCl7fXBhcnNlKGEscyl7Y29uc3Qgbj10aGlzLmdldERhdGFzZXQoKS5kYXRhLHI9dGhpcy5fY2FjaGVkTWV0YTtpZighMT09PXRoaXMuX3BhcnNpbmcpci5fcGFyc2VkPW47ZWxzZXtsZXQgdD10PT4rblt0XTtpZihpc09iamVjdChuW2FdKSl7Y29uc3R7a2V5Om89InZhbHVlIn09dGhpcy5fcGFyc2luZzt0PXQ9PityZXNvbHZlT2JqZWN0S2V5KG5bdF0sbyl9bGV0IGUsaTtmb3IoaT0oZT1hKStzO2U8aTsrK2Upci5fcGFyc2VkW2VdPXQoZSl9fV9nZXRSb3RhdGlvbigpe3JldHVybiB0b1JhZGlhbnModGhpcy5vcHRpb25zLnJvdGF0aW9uLTkwKX1fZ2V0Q2lyY3VtZmVyZW5jZSgpe3JldHVybiB0b1JhZGlhbnModGhpcy5vcHRpb25zLmNpcmN1bWZlcmVuY2UpfV9nZXRSb3RhdGlvbkV4dGVudHMoKXtsZXQgZT1UQVUsaT0tVEFVO2ZvcihsZXQgdD0wO3Q8dGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aDsrK3QpaWYodGhpcy5jaGFydC5pc0RhdGFzZXRWaXNpYmxlKHQpJiZ0aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHQpLnR5cGU9PT10aGlzLl90eXBlKXtjb25zdCBuPXRoaXMuY2hhcnQuZ2V0RGF0YXNldE1ldGEodCkuY29udHJvbGxlcjt2YXIgYT1uLl9nZXRSb3RhdGlvbigpLHM9bi5fZ2V0Q2lyY3VtZmVyZW5jZSgpO2U9TWF0aC5taW4oZSxhKSxpPU1hdGgubWF4KGksYStzKX1yZXR1cm57cm90YXRpb246ZSxjaXJjdW1mZXJlbmNlOmktZX19dXBkYXRlKHQpe3ZhciBlPXRoaXMuY2hhcnRbImNoYXJ0QXJlYSJdO2NvbnN0IGk9dGhpcy5fY2FjaGVkTWV0YTt2YXIgYT1pLmRhdGEscz10aGlzLmdldE1heEJvcmRlcldpZHRoKCkrdGhpcy5nZXRNYXhPZmZzZXQoYSkrdGhpcy5vcHRpb25zLnNwYWNpbmcsbj1NYXRoLm1heCgoTWF0aC5taW4oZS53aWR0aCxlLmhlaWdodCktcykvMiwwKSxuPU1hdGgubWluKHRvUGVyY2VudGFnZSh0aGlzLm9wdGlvbnMuY3V0b3V0LG4pLDEpLHI9dGhpcy5fZ2V0UmluZ1dlaWdodCh0aGlzLmluZGV4KSx7Y2lyY3VtZmVyZW5jZTpvLHJvdGF0aW9uOmx9PXRoaXMuX2dldFJvdGF0aW9uRXh0ZW50cygpLHtyYXRpb1g6bCxyYXRpb1k6byxvZmZzZXRYOmgsb2Zmc2V0WTpkfT1nZXRSYXRpb0FuZE9mZnNldChsLG8sbiksbD0oZS53aWR0aC1zKS9sLGU9KGUuaGVpZ2h0LXMpL28scz1NYXRoLm1heChNYXRoLm1pbihsLGUpLzIsMCksbz10b0RpbWVuc2lvbih0aGlzLm9wdGlvbnMucmFkaXVzLHMpLGw9KG8tTWF0aC5tYXgobypuLDApKS90aGlzLl9nZXRWaXNpYmxlRGF0YXNldFdlaWdodFRvdGFsKCk7dGhpcy5vZmZzZXRYPWgqbyx0aGlzLm9mZnNldFk9ZCpvLGkudG90YWw9dGhpcy5jYWxjdWxhdGVUb3RhbCgpLHRoaXMub3V0ZXJSYWRpdXM9by1sKnRoaXMuX2dldFJpbmdXZWlnaHRPZmZzZXQodGhpcy5pbmRleCksdGhpcy5pbm5lclJhZGl1cz1NYXRoLm1heCh0aGlzLm91dGVyUmFkaXVzLWwqciwwKSx0aGlzLnVwZGF0ZUVsZW1lbnRzKGEsMCxhLmxlbmd0aCx0KX1fY2lyY3VtZmVyZW5jZSh0LGUpe3ZhciBpPXRoaXMub3B0aW9ucyxhPXRoaXMuX2NhY2hlZE1ldGEscz10aGlzLl9nZXRDaXJjdW1mZXJlbmNlKCk7cmV0dXJuIGUmJmkuYW5pbWF0aW9uLmFuaW1hdGVSb3RhdGV8fCF0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KHQpfHxudWxsPT09YS5fcGFyc2VkW3RdfHxhLmRhdGFbdF0uaGlkZGVuPzA6dGhpcy5jYWxjdWxhdGVDaXJjdW1mZXJlbmNlKGEuX3BhcnNlZFt0XSpzL1RBVSl9dXBkYXRlRWxlbWVudHModCxlLGksYSl7dmFyIHM9InJlc2V0Ij09PWEsbj10aGlzLmNoYXJ0LHI9bi5jaGFydEFyZWEsbj1uLm9wdGlvbnMuYW5pbWF0aW9uLG89KHIubGVmdCtyLnJpZ2h0KS8yLGw9KHIudG9wK3IuYm90dG9tKS8yLHI9cyYmbi5hbmltYXRlU2NhbGUsaD1yPzA6dGhpcy5pbm5lclJhZGl1cyxkPXI/MDp0aGlzLm91dGVyUmFkaXVzLHtzaGFyZWRPcHRpb25zOmMsaW5jbHVkZU9wdGlvbnM6dX09dGhpcy5fZ2V0U2hhcmVkT3B0aW9ucyhlLGEpO2xldCBnPXRoaXMuX2dldFJvdGF0aW9uKCkscDtmb3IocD0wO3A8ZTsrK3ApZys9dGhpcy5fY2lyY3VtZmVyZW5jZShwLHMpO2ZvcihwPWU7cDxlK2k7KytwKXt2YXIgZj10aGlzLl9jaXJjdW1mZXJlbmNlKHAscyksbT10W3BdO2NvbnN0IHY9e3g6byt0aGlzLm9mZnNldFgseTpsK3RoaXMub2Zmc2V0WSxzdGFydEFuZ2xlOmcsZW5kQW5nbGU6ZytmLGNpcmN1bWZlcmVuY2U6ZixvdXRlclJhZGl1czpkLGlubmVyUmFkaXVzOmh9O3UmJih2Lm9wdGlvbnM9Y3x8dGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHAsbS5hY3RpdmU/ImFjdGl2ZSI6YSkpLGcrPWYsdGhpcy51cGRhdGVFbGVtZW50KG0scCx2LGEpfX1jYWxjdWxhdGVUb3RhbCgpe3ZhciB0PXRoaXMuX2NhY2hlZE1ldGEsZT10LmRhdGE7bGV0IGk9MCxhO2ZvcihhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBzPXQuX3BhcnNlZFthXTtudWxsPT09c3x8aXNOYU4ocyl8fCF0aGlzLmNoYXJ0LmdldERhdGFWaXNpYmlsaXR5KGEpfHxlW2FdLmhpZGRlbnx8KGkrPU1hdGguYWJzKHMpKX1yZXR1cm4gaX1jYWxjdWxhdGVDaXJjdW1mZXJlbmNlKHQpe3ZhciBlPXRoaXMuX2NhY2hlZE1ldGEudG90YWw7cmV0dXJuIDA8ZSYmIWlzTmFOKHQpP1RBVSooTWF0aC5hYnModCkvZSk6MH1nZXRMYWJlbEFuZFZhbHVlKHQpe3ZhciBlPXRoaXMuX2NhY2hlZE1ldGEsaT10aGlzLmNoYXJ0LGE9aS5kYXRhLmxhYmVsc3x8W10sZT1mb3JtYXROdW1iZXIoZS5fcGFyc2VkW3RdLGkub3B0aW9ucy5sb2NhbGUpO3JldHVybntsYWJlbDphW3RdfHwiIix2YWx1ZTplfX1nZXRNYXhCb3JkZXJXaWR0aCh0KXtsZXQgZT0wO2NvbnN0IGk9dGhpcy5jaGFydDtsZXQgYSxzLG4scixvO2lmKCF0KWZvcihhPTAscz1pLmRhdGEuZGF0YXNldHMubGVuZ3RoO2E8czsrK2EpaWYoaS5pc0RhdGFzZXRWaXNpYmxlKGEpKXt0PShuPWkuZ2V0RGF0YXNldE1ldGEoYSkpLmRhdGEscj1uLmNvbnRyb2xsZXI7YnJlYWt9aWYoIXQpcmV0dXJuIDA7Zm9yKGE9MCxzPXQubGVuZ3RoO2E8czsrK2EpImlubmVyIiE9PShvPXIucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyhhKSkuYm9yZGVyQWxpZ24mJihlPU1hdGgubWF4KGUsby5ib3JkZXJXaWR0aHx8MCxvLmhvdmVyQm9yZGVyV2lkdGh8fDApKTtyZXR1cm4gZX1nZXRNYXhPZmZzZXQoaSl7bGV0IGE9MDtmb3IobGV0IHQ9MCxlPWkubGVuZ3RoO3Q8ZTsrK3Qpe3ZhciBzPXRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucyh0KTthPU1hdGgubWF4KGEscy5vZmZzZXR8fDAscy5ob3Zlck9mZnNldHx8MCl9cmV0dXJuIGF9X2dldFJpbmdXZWlnaHRPZmZzZXQoZSl7bGV0IGk9MDtmb3IobGV0IHQ9MDt0PGU7Kyt0KXRoaXMuY2hhcnQuaXNEYXRhc2V0VmlzaWJsZSh0KSYmKGkrPXRoaXMuX2dldFJpbmdXZWlnaHQodCkpO3JldHVybiBpfV9nZXRSaW5nV2VpZ2h0KHQpe3JldHVybiBNYXRoLm1heCh2YWx1ZU9yRGVmYXVsdCh0aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHNbdF0ud2VpZ2h0LDEpLDApfV9nZXRWaXNpYmxlRGF0YXNldFdlaWdodFRvdGFsKCl7cmV0dXJuIHRoaXMuX2dldFJpbmdXZWlnaHRPZmZzZXQodGhpcy5jaGFydC5kYXRhLmRhdGFzZXRzLmxlbmd0aCl8fDF9fWNsYXNzIExpbmVDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXJ7c3RhdGljIGlkPSJsaW5lIjtzdGF0aWMgZGVmYXVsdHM9e2RhdGFzZXRFbGVtZW50VHlwZToibGluZSIsZGF0YUVsZW1lbnRUeXBlOiJwb2ludCIsc2hvd0xpbmU6ITAsc3BhbkdhcHM6ITF9O3N0YXRpYyBvdmVycmlkZXM9e3NjYWxlczp7X2luZGV4Xzp7dHlwZToiY2F0ZWdvcnkifSxfdmFsdWVfOnt0eXBlOiJsaW5lYXIifX19O2luaXRpYWxpemUoKXt0aGlzLmVuYWJsZU9wdGlvblNoYXJpbmc9ITAsdGhpcy5zdXBwb3J0c0RlY2ltYXRpb249ITAsc3VwZXIuaW5pdGlhbGl6ZSgpfXVwZGF0ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhO2NvbnN0e2RhdGFzZXQ6aSxkYXRhOmE9W10sX2RhdGFzZXQ6c309ZTt2YXIgbj10aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQ7bGV0e3N0YXJ0OnIsY291bnQ6b309X2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMoZSxhLG4pO3RoaXMuX2RyYXdTdGFydD1yLHRoaXMuX2RyYXdDb3VudD1vLF9zY2FsZVJhbmdlc0NoYW5nZWQoZSkmJihyPTAsbz1hLmxlbmd0aCksaS5fY2hhcnQ9dGhpcy5jaGFydCxpLl9kYXRhc2V0SW5kZXg9dGhpcy5pbmRleCxpLl9kZWNpbWF0ZWQ9ISFzLl9kZWNpbWF0ZWQsaS5wb2ludHM9YTtjb25zdCBsPXRoaXMucmVzb2x2ZURhdGFzZXRFbGVtZW50T3B0aW9ucyh0KTt0aGlzLm9wdGlvbnMuc2hvd0xpbmV8fChsLmJvcmRlcldpZHRoPTApLGwuc2VnbWVudD10aGlzLm9wdGlvbnMuc2VnbWVudCx0aGlzLnVwZGF0ZUVsZW1lbnQoaSx2b2lkIDAse2FuaW1hdGVkOiFuLG9wdGlvbnM6bH0sdCksdGhpcy51cGRhdGVFbGVtZW50cyhhLHIsbyx0KX11cGRhdGVFbGVtZW50cyhlLGksdCxhKXt2YXIgcz0icmVzZXQiPT09YTtjb25zdHtpU2NhbGU6bix2U2NhbGU6cixfc3RhY2tlZDpvLF9kYXRhc2V0Omx9PXRoaXMuX2NhY2hlZE1ldGE7dmFye3NoYXJlZE9wdGlvbnM6aCxpbmNsdWRlT3B0aW9uczpkfT10aGlzLl9nZXRTaGFyZWRPcHRpb25zKGksYSksYz1uLmF4aXMsdT1yLmF4aXMse3NwYW5HYXBzOmcsc2VnbWVudDpwfT10aGlzLm9wdGlvbnMsZj1pc051bWJlcihnKT9nOk51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtPXRoaXMuY2hhcnQuX2FuaW1hdGlvbnNEaXNhYmxlZHx8c3x8Im5vbmUiPT09YSx2PWkrdCx4PWUubGVuZ3RoO2xldCBiPTA8aSYmdGhpcy5nZXRQYXJzZWQoaS0xKTtmb3IobGV0IHQ9MDt0PHg7Kyt0KXt2YXIgXyx5LGssUyxEPWVbdF07Y29uc3QgTT1tP0Q6e307dDxpfHx0Pj12P00uc2tpcD0hMDooXz10aGlzLmdldFBhcnNlZCh0KSx5PWlzTnVsbE9yVW5kZWYoX1t1XSksaz1NW2NdPW4uZ2V0UGl4ZWxGb3JWYWx1ZShfW2NdLHQpLFM9TVt1XT1zfHx5P3IuZ2V0QmFzZVBpeGVsKCk6ci5nZXRQaXhlbEZvclZhbHVlKG8/dGhpcy5hcHBseVN0YWNrKHIsXyxvKTpfW3VdLHQpLE0uc2tpcD1pc05hTihrKXx8aXNOYU4oUyl8fHksTS5zdG9wPTA8dCYmTWF0aC5hYnMoX1tjXS1iW2NdKT5mLHAmJihNLnBhcnNlZD1fLE0ucmF3PWwuZGF0YVt0XSksZCYmKE0ub3B0aW9ucz1ofHx0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCxELmFjdGl2ZT8iYWN0aXZlIjphKSksbXx8dGhpcy51cGRhdGVFbGVtZW50KEQsdCxNLGEpLGI9Xyl9fWdldE1heE92ZXJmbG93KCl7dmFyIHQ9dGhpcy5fY2FjaGVkTWV0YSxlPXQuZGF0YXNldCxlPWUub3B0aW9ucyYmZS5vcHRpb25zLmJvcmRlcldpZHRofHwwO2NvbnN0IGk9dC5kYXRhfHxbXTtpZighaS5sZW5ndGgpcmV0dXJuIGU7dmFyIHQ9aVswXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucygwKSksYT1pW2kubGVuZ3RoLTFdLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkubGVuZ3RoLTEpKTtyZXR1cm4gTWF0aC5tYXgoZSx0LGEpLzJ9ZHJhdygpe2NvbnN0IHQ9dGhpcy5fY2FjaGVkTWV0YTt0LmRhdGFzZXQudXBkYXRlQ29udHJvbFBvaW50cyh0aGlzLmNoYXJ0LmNoYXJ0QXJlYSx0LmlTY2FsZS5heGlzKSxzdXBlci5kcmF3KCl9fWNsYXNzIFBvbGFyQXJlYUNvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlcntzdGF0aWMgaWQ9InBvbGFyQXJlYSI7c3RhdGljIGRlZmF1bHRzPXtkYXRhRWxlbWVudFR5cGU6ImFyYyIsYW5pbWF0aW9uOnthbmltYXRlUm90YXRlOiEwLGFuaW1hdGVTY2FsZTohMH0sYW5pbWF0aW9uczp7bnVtYmVyczp7dHlwZToibnVtYmVyIixwcm9wZXJ0aWVzOlsieCIsInkiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJpbm5lclJhZGl1cyIsIm91dGVyUmFkaXVzIl19fSxpbmRleEF4aXM6InIiLHN0YXJ0QW5nbGU6MH07c3RhdGljIG92ZXJyaWRlcz17YXNwZWN0UmF0aW86MSxwbHVnaW5zOntsZWdlbmQ6e2xhYmVsczp7Z2VuZXJhdGVMYWJlbHMocyl7Y29uc3QgdD1zLmRhdGE7aWYodC5sYWJlbHMubGVuZ3RoJiZ0LmRhdGFzZXRzLmxlbmd0aCl7Y29uc3R7cG9pbnRTdHlsZTpuLGNvbG9yOnJ9PXMubGVnZW5kLm9wdGlvbnNbImxhYmVscyJdO3JldHVybiB0LmxhYmVscy5tYXAoKHQsZSk9Pntjb25zdCBpPXMuZ2V0RGF0YXNldE1ldGEoMCk7dmFyIGE9aS5jb250cm9sbGVyLmdldFN0eWxlKGUpO3JldHVybnt0ZXh0OnQsZmlsbFN0eWxlOmEuYmFja2dyb3VuZENvbG9yLHN0cm9rZVN0eWxlOmEuYm9yZGVyQ29sb3IsZm9udENvbG9yOnIsbGluZVdpZHRoOmEuYm9yZGVyV2lkdGgscG9pbnRTdHlsZTpuLGhpZGRlbjohcy5nZXREYXRhVmlzaWJpbGl0eShlKSxpbmRleDplfX0pfXJldHVybltdfX0sb25DbGljayh0LGUsaSl7aS5jaGFydC50b2dnbGVEYXRhVmlzaWJpbGl0eShlLmluZGV4KSxpLmNoYXJ0LnVwZGF0ZSgpfX19LHNjYWxlczp7cjp7dHlwZToicmFkaWFsTGluZWFyIixhbmdsZUxpbmVzOntkaXNwbGF5OiExfSxiZWdpbkF0WmVybzohMCxncmlkOntjaXJjdWxhcjohMH0scG9pbnRMYWJlbHM6e2Rpc3BsYXk6ITF9LHN0YXJ0QW5nbGU6MH19fTtjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQsZSksdGhpcy5pbm5lclJhZGl1cz12b2lkIDAsdGhpcy5vdXRlclJhZGl1cz12b2lkIDB9Z2V0TGFiZWxBbmRWYWx1ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLGk9dGhpcy5jaGFydCxhPWkuZGF0YS5sYWJlbHN8fFtdLGU9Zm9ybWF0TnVtYmVyKGUuX3BhcnNlZFt0XS5yLGkub3B0aW9ucy5sb2NhbGUpO3JldHVybntsYWJlbDphW3RdfHwiIix2YWx1ZTplfX1wYXJzZU9iamVjdERhdGEodCxlLGksYSl7cmV0dXJuIF9wYXJzZU9iamVjdERhdGFSYWRpYWxTY2FsZS5iaW5kKHRoaXMpKHQsZSxpLGEpfXVwZGF0ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLmRhdGE7dGhpcy5fdXBkYXRlUmFkaXVzKCksdGhpcy51cGRhdGVFbGVtZW50cyhlLDAsZS5sZW5ndGgsdCl9Z2V0TWluTWF4KCl7Y29uc3QgdD10aGlzLl9jYWNoZWRNZXRhLGE9e21pbjpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5ORUdBVElWRV9JTkZJTklUWX07cmV0dXJuIHQuZGF0YS5mb3JFYWNoKCh0LGUpPT57dmFyIGk9dGhpcy5nZXRQYXJzZWQoZSkucjshaXNOYU4oaSkmJnRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoZSkmJihpPGEubWluJiYoYS5taW49aSksaT5hLm1heCYmKGEubWF4PWkpKX0pLGF9X3VwZGF0ZVJhZGl1cygpe2NvbnN0IHQ9dGhpcy5jaGFydDt2YXIgZT10LmNoYXJ0QXJlYSxpPXQub3B0aW9ucyxlPU1hdGgubWluKGUucmlnaHQtZS5sZWZ0LGUuYm90dG9tLWUudG9wKSxlPU1hdGgubWF4KGUvMiwwKSxpPShlLU1hdGgubWF4KGkuY3V0b3V0UGVyY2VudGFnZT9lLzEwMCppLmN1dG91dFBlcmNlbnRhZ2U6MSwwKSkvdC5nZXRWaXNpYmxlRGF0YXNldENvdW50KCk7dGhpcy5vdXRlclJhZGl1cz1lLWkqdGhpcy5pbmRleCx0aGlzLmlubmVyUmFkaXVzPXRoaXMub3V0ZXJSYWRpdXMtaX11cGRhdGVFbGVtZW50cyhhLHQsZSxzKXt2YXIgbj0icmVzZXQiPT09cztjb25zdCByPXRoaXMuY2hhcnQ7dmFyIG89ci5vcHRpb25zLmFuaW1hdGlvbjtjb25zdCBsPXRoaXMuX2NhY2hlZE1ldGEuclNjYWxlO3ZhciBoPWwueENlbnRlcixkPWwueUNlbnRlcixjPWwuZ2V0SW5kZXhBbmdsZSgwKS0uNSpQSTtsZXQgdT1jLGc7dmFyIHA9MzYwL3RoaXMuY291bnRWaXNpYmxlRWxlbWVudHMoKTtmb3IoZz0wO2c8dDsrK2cpdSs9dGhpcy5fY29tcHV0ZUFuZ2xlKGcscyxwKTtmb3IoZz10O2c8dCtlO2crKyl7dmFyIGY9YVtnXTtsZXQgdD11LGU9dSt0aGlzLl9jb21wdXRlQW5nbGUoZyxzLHApLGk9ci5nZXREYXRhVmlzaWJpbGl0eShnKT9sLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRoaXMuZ2V0UGFyc2VkKGcpLnIpOjA7dT1lLG4mJihvLmFuaW1hdGVTY2FsZSYmKGk9MCksby5hbmltYXRlUm90YXRlJiYodD1lPWMpKTt2YXIgbT17eDpoLHk6ZCxpbm5lclJhZGl1czowLG91dGVyUmFkaXVzOmksc3RhcnRBbmdsZTp0LGVuZEFuZ2xlOmUsb3B0aW9uczp0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoZyxmLmFjdGl2ZT8iYWN0aXZlIjpzKX07dGhpcy51cGRhdGVFbGVtZW50KGYsZyxtLHMpfX1jb3VudFZpc2libGVFbGVtZW50cygpe2NvbnN0IHQ9dGhpcy5fY2FjaGVkTWV0YTtsZXQgaT0wO3JldHVybiB0LmRhdGEuZm9yRWFjaCgodCxlKT0+eyFpc05hTih0aGlzLmdldFBhcnNlZChlKS5yKSYmdGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eShlKSYmaSsrfSksaX1fY29tcHV0ZUFuZ2xlKHQsZSxpKXtyZXR1cm4gdGhpcy5jaGFydC5nZXREYXRhVmlzaWJpbGl0eSh0KT90b1JhZGlhbnModGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQsZSkuYW5nbGV8fGkpOjB9fWNsYXNzIFBpZUNvbnRyb2xsZXIgZXh0ZW5kcyBEb3VnaG51dENvbnRyb2xsZXJ7c3RhdGljIGlkPSJwaWUiO3N0YXRpYyBkZWZhdWx0cz17Y3V0b3V0OjAscm90YXRpb246MCxjaXJjdW1mZXJlbmNlOjM2MCxyYWRpdXM6IjEwMCUifX1jbGFzcyBSYWRhckNvbnRyb2xsZXIgZXh0ZW5kcyBEYXRhc2V0Q29udHJvbGxlcntzdGF0aWMgaWQ9InJhZGFyIjtzdGF0aWMgZGVmYXVsdHM9e2RhdGFzZXRFbGVtZW50VHlwZToibGluZSIsZGF0YUVsZW1lbnRUeXBlOiJwb2ludCIsaW5kZXhBeGlzOiJyIixzaG93TGluZTohMCxlbGVtZW50czp7bGluZTp7ZmlsbDoic3RhcnQifX19O3N0YXRpYyBvdmVycmlkZXM9e2FzcGVjdFJhdGlvOjEsc2NhbGVzOntyOnt0eXBlOiJyYWRpYWxMaW5lYXIifX19O2dldExhYmVsQW5kVmFsdWUodCl7Y29uc3QgZT10aGlzLl9jYWNoZWRNZXRhLnZTY2FsZTt2YXIgaT10aGlzLmdldFBhcnNlZCh0KTtyZXR1cm57bGFiZWw6ZS5nZXRMYWJlbHMoKVt0XSx2YWx1ZToiIitlLmdldExhYmVsRm9yVmFsdWUoaVtlLmF4aXNdKX19cGFyc2VPYmplY3REYXRhKHQsZSxpLGEpe3JldHVybiBfcGFyc2VPYmplY3REYXRhUmFkaWFsU2NhbGUuYmluZCh0aGlzKSh0LGUsaSxhKX11cGRhdGUodCl7Y29uc3QgZT10aGlzLl9jYWNoZWRNZXRhLGk9ZS5kYXRhc2V0O3ZhciBhPWUuZGF0YXx8W10scz1lLmlTY2FsZS5nZXRMYWJlbHMoKTtpZihpLnBvaW50cz1hLCJyZXNpemUiIT09dCl7Y29uc3Qgbj10aGlzLnJlc29sdmVEYXRhc2V0RWxlbWVudE9wdGlvbnModCk7dGhpcy5vcHRpb25zLnNob3dMaW5lfHwobi5ib3JkZXJXaWR0aD0wKTtzPXtfbG9vcDohMCxfZnVsbExvb3A6cy5sZW5ndGg9PT1hLmxlbmd0aCxvcHRpb25zOm59O3RoaXMudXBkYXRlRWxlbWVudChpLHZvaWQgMCxzLHQpfXRoaXMudXBkYXRlRWxlbWVudHMoYSwwLGEubGVuZ3RoLHQpfXVwZGF0ZUVsZW1lbnRzKGUsaSxhLHMpe2NvbnN0IG49dGhpcy5fY2FjaGVkTWV0YS5yU2NhbGU7dmFyIHI9InJlc2V0Ij09PXM7Zm9yKGxldCB0PWk7dDxpK2E7dCsrKXt2YXIgbz1lW3RdLGw9dGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQsby5hY3RpdmU/ImFjdGl2ZSI6cyksaD1uLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZSh0LHRoaXMuZ2V0UGFyc2VkKHQpLnIpLGQ9cj9uLnhDZW50ZXI6aC54LGM9cj9uLnlDZW50ZXI6aC55LGg9e3g6ZCx5OmMsYW5nbGU6aC5hbmdsZSxza2lwOmlzTmFOKGQpfHxpc05hTihjKSxvcHRpb25zOmx9O3RoaXMudXBkYXRlRWxlbWVudChvLHQsaCxzKX19fWNsYXNzIFNjYXR0ZXJDb250cm9sbGVyIGV4dGVuZHMgRGF0YXNldENvbnRyb2xsZXJ7c3RhdGljIGlkPSJzY2F0dGVyIjtzdGF0aWMgZGVmYXVsdHM9e2RhdGFzZXRFbGVtZW50VHlwZTohMSxkYXRhRWxlbWVudFR5cGU6InBvaW50IixzaG93TGluZTohMSxmaWxsOiExfTtzdGF0aWMgb3ZlcnJpZGVzPXtpbnRlcmFjdGlvbjp7bW9kZToicG9pbnQifSxzY2FsZXM6e3g6e3R5cGU6ImxpbmVhciJ9LHk6e3R5cGU6ImxpbmVhciJ9fX07Z2V0TGFiZWxBbmRWYWx1ZSh0KXt2YXIgZT10aGlzLl9jYWNoZWRNZXRhLGk9dGhpcy5jaGFydC5kYXRhLmxhYmVsc3x8W107Y29uc3R7eFNjYWxlOmEseVNjYWxlOnN9PWU7dmFyIGU9dGhpcy5nZXRQYXJzZWQodCksbj1hLmdldExhYmVsRm9yVmFsdWUoZS54KSxlPXMuZ2V0TGFiZWxGb3JWYWx1ZShlLnkpO3JldHVybntsYWJlbDppW3RdfHwiIix2YWx1ZToiKCIrbisiLCAiK2UrIikifX11cGRhdGUodCl7Y29uc3QgZT10aGlzLl9jYWNoZWRNZXRhO3ZhcntkYXRhOmk9W119PWUsYT10aGlzLmNoYXJ0Ll9hbmltYXRpb25zRGlzYWJsZWQ7bGV0e3N0YXJ0OnMsY291bnQ6bn09X2dldFN0YXJ0QW5kQ291bnRPZlZpc2libGVQb2ludHMoZSxpLGEpO2lmKHRoaXMuX2RyYXdTdGFydD1zLHRoaXMuX2RyYXdDb3VudD1uLF9zY2FsZVJhbmdlc0NoYW5nZWQoZSkmJihzPTAsbj1pLmxlbmd0aCksdGhpcy5vcHRpb25zLnNob3dMaW5lKXt0aGlzLmRhdGFzZXRFbGVtZW50VHlwZXx8dGhpcy5hZGRFbGVtZW50cygpO2NvbnN0e2RhdGFzZXQ6cixfZGF0YXNldDpvfT1lLGw9KHIuX2NoYXJ0PXRoaXMuY2hhcnQsci5fZGF0YXNldEluZGV4PXRoaXMuaW5kZXgsci5fZGVjaW1hdGVkPSEhby5fZGVjaW1hdGVkLHIucG9pbnRzPWksdGhpcy5yZXNvbHZlRGF0YXNldEVsZW1lbnRPcHRpb25zKHQpKTtsLnNlZ21lbnQ9dGhpcy5vcHRpb25zLnNlZ21lbnQsdGhpcy51cGRhdGVFbGVtZW50KHIsdm9pZCAwLHthbmltYXRlZDohYSxvcHRpb25zOmx9LHQpfWVsc2UgdGhpcy5kYXRhc2V0RWxlbWVudFR5cGUmJihkZWxldGUgZS5kYXRhc2V0LHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlPSExKTt0aGlzLnVwZGF0ZUVsZW1lbnRzKGkscyxuLHQpfWFkZEVsZW1lbnRzKCl7dmFyIHQ9dGhpcy5vcHRpb25zWyJzaG93TGluZSJdOyF0aGlzLmRhdGFzZXRFbGVtZW50VHlwZSYmdCYmKHRoaXMuZGF0YXNldEVsZW1lbnRUeXBlPXRoaXMuY2hhcnQucmVnaXN0cnkuZ2V0RWxlbWVudCgibGluZSIpKSxzdXBlci5hZGRFbGVtZW50cygpfXVwZGF0ZUVsZW1lbnRzKGUsaSxhLHMpe3ZhciBuPSJyZXNldCI9PT1zO2NvbnN0e2lTY2FsZTpyLHZTY2FsZTpvLF9zdGFja2VkOmwsX2RhdGFzZXQ6aH09dGhpcy5fY2FjaGVkTWV0YTt2YXIgdD10aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnMoaSxzKSxkPXRoaXMuZ2V0U2hhcmVkT3B0aW9ucyh0KSxjPXRoaXMuaW5jbHVkZU9wdGlvbnMocyxkKSx1PXIuYXhpcyxnPW8uYXhpcyx7c3BhbkdhcHM6cCxzZWdtZW50OmZ9PXRoaXMub3B0aW9ucyxtPWlzTnVtYmVyKHApP3A6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHY9dGhpcy5jaGFydC5fYW5pbWF0aW9uc0Rpc2FibGVkfHxufHwibm9uZSI9PT1zO2xldCB4PTA8aSYmdGhpcy5nZXRQYXJzZWQoaS0xKTtmb3IobGV0IHQ9aTt0PGkrYTsrK3Qpe3ZhciBiPWVbdF0sXz10aGlzLmdldFBhcnNlZCh0KTtjb25zdCBEPXY/Yjp7fTt2YXIgeT1pc051bGxPclVuZGVmKF9bZ10pLGs9RFt1XT1yLmdldFBpeGVsRm9yVmFsdWUoX1t1XSx0KSxTPURbZ109bnx8eT9vLmdldEJhc2VQaXhlbCgpOm8uZ2V0UGl4ZWxGb3JWYWx1ZShsP3RoaXMuYXBwbHlTdGFjayhvLF8sbCk6X1tnXSx0KTtELnNraXA9aXNOYU4oayl8fGlzTmFOKFMpfHx5LEQuc3RvcD0wPHQmJk1hdGguYWJzKF9bdV0teFt1XSk+bSxmJiYoRC5wYXJzZWQ9XyxELnJhdz1oLmRhdGFbdF0pLGMmJihELm9wdGlvbnM9ZHx8dGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKHQsYi5hY3RpdmU/ImFjdGl2ZSI6cykpLHZ8fHRoaXMudXBkYXRlRWxlbWVudChiLHQsRCxzKSx4PV99dGhpcy51cGRhdGVTaGFyZWRPcHRpb25zKGQscyx0KX1nZXRNYXhPdmVyZmxvdygpe3ZhciB0PXRoaXMuX2NhY2hlZE1ldGE7Y29uc3QgaT10LmRhdGF8fFtdO2lmKCF0aGlzLm9wdGlvbnMuc2hvd0xpbmUpe2xldCBlPTA7Zm9yKGxldCB0PWkubGVuZ3RoLTE7MDw9dDstLXQpZT1NYXRoLm1heChlLGlbdF0uc2l6ZSh0aGlzLnJlc29sdmVEYXRhRWxlbWVudE9wdGlvbnModCkpLzIpO3JldHVybiAwPGUmJmV9dD10LmRhdGFzZXQsdD10Lm9wdGlvbnMmJnQub3B0aW9ucy5ib3JkZXJXaWR0aHx8MDtpZighaS5sZW5ndGgpcmV0dXJuIHQ7dmFyIGU9aVswXS5zaXplKHRoaXMucmVzb2x2ZURhdGFFbGVtZW50T3B0aW9ucygwKSksYT1pW2kubGVuZ3RoLTFdLnNpemUodGhpcy5yZXNvbHZlRGF0YUVsZW1lbnRPcHRpb25zKGkubGVuZ3RoLTEpKTtyZXR1cm4gTWF0aC5tYXgodCxlLGEpLzJ9fXZhciBjb250cm9sbGVycz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxCYXJDb250cm9sbGVyOkJhckNvbnRyb2xsZXIsQnViYmxlQ29udHJvbGxlcjpCdWJibGVDb250cm9sbGVyLERvdWdobnV0Q29udHJvbGxlcjpEb3VnaG51dENvbnRyb2xsZXIsTGluZUNvbnRyb2xsZXI6TGluZUNvbnRyb2xsZXIsUGllQ29udHJvbGxlcjpQaWVDb250cm9sbGVyLFBvbGFyQXJlYUNvbnRyb2xsZXI6UG9sYXJBcmVhQ29udHJvbGxlcixSYWRhckNvbnRyb2xsZXI6UmFkYXJDb250cm9sbGVyLFNjYXR0ZXJDb250cm9sbGVyOlNjYXR0ZXJDb250cm9sbGVyfSk7ZnVuY3Rpb24gYWJzdHJhY3QoKXt0aHJvdyBuZXcgRXJyb3IoIlRoaXMgbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZDogQ2hlY2sgdGhhdCBhIGNvbXBsZXRlIGRhdGUgYWRhcHRlciBpcyBwcm92aWRlZC4iKX1jbGFzcyBEYXRlQWRhcHRlckJhc2V7c3RhdGljIG92ZXJyaWRlKHQpe09iamVjdC5hc3NpZ24oRGF0ZUFkYXB0ZXJCYXNlLnByb3RvdHlwZSx0KX1vcHRpb25zO2NvbnN0cnVjdG9yKHQpe3RoaXMub3B0aW9ucz10fHx7fX1pbml0KCl7fWZvcm1hdHMoKXtyZXR1cm4gYWJzdHJhY3QoKX1wYXJzZSgpe3JldHVybiBhYnN0cmFjdCgpfWZvcm1hdCgpe3JldHVybiBhYnN0cmFjdCgpfWFkZCgpe3JldHVybiBhYnN0cmFjdCgpfWRpZmYoKXtyZXR1cm4gYWJzdHJhY3QoKX1zdGFydE9mKCl7cmV0dXJuIGFic3RyYWN0KCl9ZW5kT2YoKXtyZXR1cm4gYWJzdHJhY3QoKX19dmFyIGFkYXB0ZXJzPXtfZGF0ZTpEYXRlQWRhcHRlckJhc2V9O2Z1bmN0aW9uIGJpbmFyeVNlYXJjaCh0LGUsaSxhKXt2YXJ7Y29udHJvbGxlcjp0LGRhdGE6cyxfc29ydGVkOm59PXQscj10Ll9jYWNoZWRNZXRhLmlTY2FsZTtpZihyJiZlPT09ci5heGlzJiYiciIhPT1lJiZuJiZzLmxlbmd0aCl7Y29uc3Qgbz1yLl9yZXZlcnNlUGl4ZWxzP19ybG9va3VwQnlLZXk6X2xvb2t1cEJ5S2V5O2lmKCFhKXJldHVybiBvKHMsZSxpKTtpZih0Ll9zaGFyZWRPcHRpb25zKXtjb25zdCBsPXNbMF07bj0iZnVuY3Rpb24iPT10eXBlb2YgbC5nZXRSYW5nZSYmbC5nZXRSYW5nZShlKTtpZihuKXJldHVybiByPW8ocyxlLGktbiksYT1vKHMsZSxpK24pLHtsbzpyLmxvLGhpOmEuaGl9fX1yZXR1cm57bG86MCxoaTpzLmxlbmd0aC0xfX1mdW5jdGlvbiBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXModCxpLGUsYSxzKXt2YXIgbj10LmdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKSxyPWVbaV07Zm9yKGxldCB0PTAsZT1uLmxlbmd0aDt0PGU7Kyt0KXt2YXJ7aW5kZXg6byxkYXRhOmx9PW5bdF0se2xvOmgsaGk6ZH09YmluYXJ5U2VhcmNoKG5bdF0saSxyLHMpO2ZvcihsZXQgdD1oO3Q8PWQ7Kyt0KXt2YXIgYz1sW3RdO2Muc2tpcHx8YShjLG8sdCl9fX1mdW5jdGlvbiBnZXREaXN0YW5jZU1ldHJpY0ZvckF4aXModCl7Y29uc3QgYT0tMSE9PXQuaW5kZXhPZigieCIpLHM9LTEhPT10LmluZGV4T2YoInkiKTtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgaT1hP01hdGguYWJzKHQueC1lLngpOjAsdD1zP01hdGguYWJzKHQueS1lLnkpOjA7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhpLDIpK01hdGgucG93KHQsMikpfX1mdW5jdGlvbiBnZXRJbnRlcnNlY3RJdGVtcyhhLHMsdCxuLHIpe2NvbnN0IG89W107aWYoIXImJiFhLmlzUG9pbnRJbkFyZWEocykpcmV0dXJuIG87cmV0dXJuIGV2YWx1YXRlSW50ZXJhY3Rpb25JdGVtcyhhLHQscyxmdW5jdGlvbih0LGUsaSl7KHJ8fF9pc1BvaW50SW5BcmVhKHQsYS5jaGFydEFyZWEsMCkpJiZ0LmluUmFuZ2Uocy54LHMueSxuKSYmby5wdXNoKHtlbGVtZW50OnQsZGF0YXNldEluZGV4OmUsaW5kZXg6aX0pfSwhMCksb31mdW5jdGlvbiBnZXROZWFyZXN0UmFkaWFsSXRlbXModCxyLGUsbyl7bGV0IGw9W107cmV0dXJuIGV2YWx1YXRlSW50ZXJhY3Rpb25JdGVtcyh0LGUscixmdW5jdGlvbih0LGUsaSl7dmFye3N0YXJ0QW5nbGU6YSxlbmRBbmdsZTpzfT10LmdldFByb3BzKFsic3RhcnRBbmdsZSIsImVuZEFuZ2xlIl0sbyksbj1nZXRBbmdsZUZyb21Qb2ludCh0LHt4OnIueCx5OnIueX0pWyJhbmdsZSJdO19hbmdsZUJldHdlZW4obixhLHMpJiZsLnB1c2goe2VsZW1lbnQ6dCxkYXRhc2V0SW5kZXg6ZSxpbmRleDppfSl9KSxsfWZ1bmN0aW9uIGdldE5lYXJlc3RDYXJ0ZXNpYW5JdGVtcyhuLHIsdCxvLGwsaCl7bGV0IGQ9W107Y29uc3QgYz1nZXREaXN0YW5jZU1ldHJpY0ZvckF4aXModCk7bGV0IHU9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3JldHVybiBldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMobix0LHIsZnVuY3Rpb24odCxlLGkpe3ZhciBhLHM9dC5pblJhbmdlKHIueCxyLnksbCk7byYmIXN8fChhPXQuZ2V0Q2VudGVyUG9pbnQobCksKGh8fG4uaXNQb2ludEluQXJlYShhKXx8cykmJigocz1jKHIsYSkpPHU/KGQ9W3tlbGVtZW50OnQsZGF0YXNldEluZGV4OmUsaW5kZXg6aX1dLHU9cyk6cz09PXUmJmQucHVzaCh7ZWxlbWVudDp0LGRhdGFzZXRJbmRleDplLGluZGV4Oml9KSkpfSksZH1mdW5jdGlvbiBnZXROZWFyZXN0SXRlbXModCxlLGksYSxzLG4pe3JldHVybiBufHx0LmlzUG9pbnRJbkFyZWEoZSk/InIiIT09aXx8YT9nZXROZWFyZXN0Q2FydGVzaWFuSXRlbXModCxlLGksYSxzLG4pOmdldE5lYXJlc3RSYWRpYWxJdGVtcyh0LGUsaSxzKTpbXX1mdW5jdGlvbiBnZXRBeGlzSXRlbXModCxhLHMsZSxuKXtjb25zdCByPVtdLG89IngiPT09cz8iaW5YUmFuZ2UiOiJpbllSYW5nZSI7bGV0IGw9ITE7cmV0dXJuIGV2YWx1YXRlSW50ZXJhY3Rpb25JdGVtcyh0LHMsYSwodCxlLGkpPT57dFtvXShhW3NdLG4pJiYoci5wdXNoKHtlbGVtZW50OnQsZGF0YXNldEluZGV4OmUsaW5kZXg6aX0pLGw9bHx8dC5pblJhbmdlKGEueCxhLnksbikpfSksZSYmIWw/W106cn12YXIgSW50ZXJhY3Rpb249e2V2YWx1YXRlSW50ZXJhY3Rpb25JdGVtczpldmFsdWF0ZUludGVyYWN0aW9uSXRlbXMsbW9kZXM6e2luZGV4KHQsZSxpLGEpe3ZhciBlPWdldFJlbGF0aXZlUG9zaXRpb24oZSx0KSxzPWkuYXhpc3x8IngiLG49aS5pbmNsdWRlSW52aXNpYmxlfHwhMTtjb25zdCByPWkuaW50ZXJzZWN0P2dldEludGVyc2VjdEl0ZW1zKHQsZSxzLGEsbik6Z2V0TmVhcmVzdEl0ZW1zKHQsZSxzLCExLGEsbiksbz1bXTtyZXR1cm4gci5sZW5ndGg/KHQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpLmZvckVhY2godD0+e3ZhciBlPXJbMF0uaW5kZXgsaT10LmRhdGFbZV07aSYmIWkuc2tpcCYmby5wdXNoKHtlbGVtZW50OmksZGF0YXNldEluZGV4OnQuaW5kZXgsaW5kZXg6ZX0pfSksbyk6W119LGRhdGFzZXQodCxlLGksYSl7dmFyIGU9Z2V0UmVsYXRpdmVQb3NpdGlvbihlLHQpLHM9aS5heGlzfHwieHkiLG49aS5pbmNsdWRlSW52aXNpYmxlfHwhMTtsZXQgcj1pLmludGVyc2VjdD9nZXRJbnRlcnNlY3RJdGVtcyh0LGUscyxhLG4pOmdldE5lYXJlc3RJdGVtcyh0LGUscywhMSxhLG4pO2lmKDA8ci5sZW5ndGgpe3ZhciBvPXJbMF0uZGF0YXNldEluZGV4LGw9dC5nZXREYXRhc2V0TWV0YShvKS5kYXRhO3I9W107Zm9yKGxldCB0PTA7dDxsLmxlbmd0aDsrK3Qpci5wdXNoKHtlbGVtZW50OmxbdF0sZGF0YXNldEluZGV4Om8saW5kZXg6dH0pfXJldHVybiByfSxwb2ludCh0LGUsaSxhKXtyZXR1cm4gZ2V0SW50ZXJzZWN0SXRlbXModCxnZXRSZWxhdGl2ZVBvc2l0aW9uKGUsdCksaS5heGlzfHwieHkiLGEsaS5pbmNsdWRlSW52aXNpYmxlfHwhMSl9LG5lYXJlc3QodCxlLGksYSl7dmFyIGU9Z2V0UmVsYXRpdmVQb3NpdGlvbihlLHQpLHM9aS5heGlzfHwieHkiLG49aS5pbmNsdWRlSW52aXNpYmxlfHwhMTtyZXR1cm4gZ2V0TmVhcmVzdEl0ZW1zKHQsZSxzLGkuaW50ZXJzZWN0LGEsbil9LHgodCxlLGksYSl7cmV0dXJuIGdldEF4aXNJdGVtcyh0LGdldFJlbGF0aXZlUG9zaXRpb24oZSx0KSwieCIsaS5pbnRlcnNlY3QsYSl9LHkodCxlLGksYSl7cmV0dXJuIGdldEF4aXNJdGVtcyh0LGdldFJlbGF0aXZlUG9zaXRpb24oZSx0KSwieSIsaS5pbnRlcnNlY3QsYSl9fX07Y29uc3QgU1RBVElDX1BPU0lUSU9OUz1bImxlZnQiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSJdO2Z1bmN0aW9uIGZpbHRlckJ5UG9zaXRpb24odCxlKXtyZXR1cm4gdC5maWx0ZXIodD0+dC5wb3M9PT1lKX1mdW5jdGlvbiBmaWx0ZXJEeW5hbWljUG9zaXRpb25CeUF4aXModCxlKXtyZXR1cm4gdC5maWx0ZXIodD0+LTE9PT1TVEFUSUNfUE9TSVRJT05TLmluZGV4T2YodC5wb3MpJiZ0LmJveC5heGlzPT09ZSl9ZnVuY3Rpb24gc29ydEJ5V2VpZ2h0KHQsYSl7cmV0dXJuIHQuc29ydCgodCxlKT0+e3ZhciBpPWE/ZTp0LHQ9YT90OmU7cmV0dXJuIGkud2VpZ2h0PT09dC53ZWlnaHQ/aS5pbmRleC10LmluZGV4Omkud2VpZ2h0LXQud2VpZ2h0fSl9ZnVuY3Rpb24gd3JhcEJveGVzKHQpe2NvbnN0IGU9W107bGV0IGksYSxzLG4scixvO2ZvcihpPTAsYT0odHx8W10pLmxlbmd0aDtpPGE7KytpKSh7cG9zaXRpb246bixvcHRpb25zOntzdGFjazpyLHN0YWNrV2VpZ2h0Om89MX19PXM9dFtpXSksZS5wdXNoKHtpbmRleDppLGJveDpzLHBvczpuLGhvcml6b250YWw6cy5pc0hvcml6b250YWwoKSx3ZWlnaHQ6cy53ZWlnaHQsc3RhY2s6ciYmbityLHN0YWNrV2VpZ2h0Om99KTtyZXR1cm4gZX1mdW5jdGlvbiBidWlsZFN0YWNrcyh0KXtjb25zdCBlPXt9O2Zvcihjb25zdCBuIG9mIHQpe3ZhcntzdGFjazppLHBvczphLHN0YWNrV2VpZ2h0OnN9PW47aWYoaSYmU1RBVElDX1BPU0lUSU9OUy5pbmNsdWRlcyhhKSl7Y29uc3Qgcj1lW2ldfHwoZVtpXT17Y291bnQ6MCxwbGFjZWQ6MCx3ZWlnaHQ6MCxzaXplOjB9KTtyLmNvdW50Kyssci53ZWlnaHQrPXN9fXJldHVybiBlfWZ1bmN0aW9uIHNldExheW91dERpbXModCxlKXt2YXIgaT1idWlsZFN0YWNrcyh0KSx7dkJveE1heFdpZHRoOmEsaEJveE1heEhlaWdodDpzfT1lO2xldCBuLHIsbztmb3Iobj0wLHI9dC5sZW5ndGg7bjxyOysrbil7dmFyIGw9KG89dFtuXSkuYm94WyJmdWxsU2l6ZSJdLGg9aVtvLnN0YWNrXSxoPWgmJm8uc3RhY2tXZWlnaHQvaC53ZWlnaHQ7by5ob3Jpem9udGFsPyhvLndpZHRoPWg/aCphOmwmJmUuYXZhaWxhYmxlV2lkdGgsby5oZWlnaHQ9cyk6KG8ud2lkdGg9YSxvLmhlaWdodD1oP2gqczpsJiZlLmF2YWlsYWJsZUhlaWdodCl9cmV0dXJuIGl9ZnVuY3Rpb24gYnVpbGRMYXlvdXRCb3hlcyh0KXtjb25zdCBlPXdyYXBCb3hlcyh0KTt0PXNvcnRCeVdlaWdodChlLmZpbHRlcih0PT50LmJveC5mdWxsU2l6ZSksITApO2NvbnN0IGk9c29ydEJ5V2VpZ2h0KGZpbHRlckJ5UG9zaXRpb24oZSwibGVmdCIpLCEwKSxhPXNvcnRCeVdlaWdodChmaWx0ZXJCeVBvc2l0aW9uKGUsInJpZ2h0IikpLHM9c29ydEJ5V2VpZ2h0KGZpbHRlckJ5UG9zaXRpb24oZSwidG9wIiksITApO3ZhciBuPXNvcnRCeVdlaWdodChmaWx0ZXJCeVBvc2l0aW9uKGUsImJvdHRvbSIpKSxyPWZpbHRlckR5bmFtaWNQb3NpdGlvbkJ5QXhpcyhlLCJ4Iiksbz1maWx0ZXJEeW5hbWljUG9zaXRpb25CeUF4aXMoZSwieSIpO3JldHVybntmdWxsU2l6ZTp0LGxlZnRBbmRUb3A6aS5jb25jYXQocykscmlnaHRBbmRCb3R0b206YS5jb25jYXQobykuY29uY2F0KG4pLmNvbmNhdChyKSxjaGFydEFyZWE6ZmlsdGVyQnlQb3NpdGlvbihlLCJjaGFydEFyZWEiKSx2ZXJ0aWNhbDppLmNvbmNhdChhKS5jb25jYXQobyksaG9yaXpvbnRhbDpzLmNvbmNhdChuKS5jb25jYXQocil9fWZ1bmN0aW9uIGdldENvbWJpbmVkTWF4KHQsZSxpLGEpe3JldHVybiBNYXRoLm1heCh0W2ldLGVbaV0pK01hdGgubWF4KHRbYV0sZVthXSl9ZnVuY3Rpb24gdXBkYXRlTWF4UGFkZGluZyh0LGUpe3QudG9wPU1hdGgubWF4KHQudG9wLGUudG9wKSx0LmxlZnQ9TWF0aC5tYXgodC5sZWZ0LGUubGVmdCksdC5ib3R0b209TWF0aC5tYXgodC5ib3R0b20sZS5ib3R0b20pLHQucmlnaHQ9TWF0aC5tYXgodC5yaWdodCxlLnJpZ2h0KX1mdW5jdGlvbiB1cGRhdGVEaW1zKHQsZSxpLGEpe2NvbnN0e3BvczpzLGJveDpufT1pO3ZhciByPXQubWF4UGFkZGluZztpZighaXNPYmplY3Qocykpe2kuc2l6ZSYmKHRbc10tPWkuc2l6ZSk7Y29uc3QgbD1hW2kuc3RhY2tdfHx7c2l6ZTowLGNvdW50OjF9O2wuc2l6ZT1NYXRoLm1heChsLnNpemUsaS5ob3Jpem9udGFsP24uaGVpZ2h0Om4ud2lkdGgpLGkuc2l6ZT1sLnNpemUvbC5jb3VudCx0W3NdKz1pLnNpemV9bi5nZXRQYWRkaW5nJiZ1cGRhdGVNYXhQYWRkaW5nKHIsbi5nZXRQYWRkaW5nKCkpO3ZhciBhPU1hdGgubWF4KDAsZS5vdXRlcldpZHRoLWdldENvbWJpbmVkTWF4KHIsdCwibGVmdCIsInJpZ2h0IikpLGU9TWF0aC5tYXgoMCxlLm91dGVySGVpZ2h0LWdldENvbWJpbmVkTWF4KHIsdCwidG9wIiwiYm90dG9tIikpLHI9YSE9PXQudyxvPWUhPT10Lmg7cmV0dXJuIHQudz1hLHQuaD1lLGkuaG9yaXpvbnRhbD97c2FtZTpyLG90aGVyOm99OntzYW1lOm8sb3RoZXI6cn19ZnVuY3Rpb24gaGFuZGxlTWF4UGFkZGluZyhpKXtjb25zdCBhPWkubWF4UGFkZGluZztmdW5jdGlvbiB0KHQpe3ZhciBlPU1hdGgubWF4KGFbdF0taVt0XSwwKTtyZXR1cm4gaVt0XSs9ZSxlfWkueSs9dCgidG9wIiksaS54Kz10KCJsZWZ0IiksdCgicmlnaHQiKSx0KCJib3R0b20iKX1mdW5jdGlvbiBnZXRNYXJnaW5zKHQsaSl7Y29uc3QgYT1pLm1heFBhZGRpbmc7ZnVuY3Rpb24gZSh0KXtjb25zdCBlPXtsZWZ0OjAsdG9wOjAscmlnaHQ6MCxib3R0b206MH07cmV0dXJuIHQuZm9yRWFjaCh0PT57ZVt0XT1NYXRoLm1heChpW3RdLGFbdF0pfSksZX1yZXR1cm4gZSh0P1sibGVmdCIsInJpZ2h0Il06WyJ0b3AiLCJib3R0b20iXSl9ZnVuY3Rpb24gZml0Qm94ZXModCxlLGksYSl7Y29uc3Qgcz1bXTtsZXQgbixyLG8sbCxoLGQ7Zm9yKG49MCxyPXQubGVuZ3RoLGg9MDtuPHI7KytuKXtvPXRbbl0sKGw9by5ib3gpLnVwZGF0ZShvLndpZHRofHxlLncsby5oZWlnaHR8fGUuaCxnZXRNYXJnaW5zKG8uaG9yaXpvbnRhbCxlKSk7dmFye3NhbWU6YyxvdGhlcjp1fT11cGRhdGVEaW1zKGUsaSxvLGEpO2h8PWMmJnMubGVuZ3RoLGQ9ZHx8dSxsLmZ1bGxTaXplfHxzLnB1c2gobyl9cmV0dXJuIGgmJmZpdEJveGVzKHMsZSxpLGEpfHxkfWZ1bmN0aW9uIHNldEJveERpbXModCxlLGksYSxzKXt0LnRvcD1pLHQubGVmdD1lLHQucmlnaHQ9ZSthLHQuYm90dG9tPWkrcyx0LndpZHRoPWEsdC5oZWlnaHQ9c31mdW5jdGlvbiBwbGFjZUJveGVzKHQsZSxpLGEpe3ZhciBzPWkucGFkZGluZztsZXR7eDpuLHk6cn09ZTtmb3IoY29uc3QgYyBvZiB0KXt2YXIgbz1jLmJveDtjb25zdCB1PWFbYy5zdGFja118fHtjb3VudDoxLHBsYWNlZDowLHdlaWdodDoxfTt2YXIgbCxoLGQ9Yy5zdGFja1dlaWdodC91LndlaWdodHx8MTtjLmhvcml6b250YWw/KGg9ZS53KmQsbD11LnNpemV8fG8uaGVpZ2h0LGRlZmluZWQodS5zdGFydCkmJihyPXUuc3RhcnQpLG8uZnVsbFNpemU/c2V0Qm94RGltcyhvLHMubGVmdCxyLGkub3V0ZXJXaWR0aC1zLnJpZ2h0LXMubGVmdCxsKTpzZXRCb3hEaW1zKG8sZS5sZWZ0K3UucGxhY2VkLHIsaCxsKSx1LnN0YXJ0PXIsdS5wbGFjZWQrPWgscj1vLmJvdHRvbSk6KGw9ZS5oKmQsaD11LnNpemV8fG8ud2lkdGgsZGVmaW5lZCh1LnN0YXJ0KSYmKG49dS5zdGFydCksby5mdWxsU2l6ZT9zZXRCb3hEaW1zKG8sbixzLnRvcCxoLGkub3V0ZXJIZWlnaHQtcy5ib3R0b20tcy50b3ApOnNldEJveERpbXMobyxuLGUudG9wK3UucGxhY2VkLGgsbCksdS5zdGFydD1uLHUucGxhY2VkKz1sLG49by5yaWdodCl9ZS54PW4sZS55PXJ9dmFyIGxheW91dHM9e2FkZEJveCh0LGUpe3QuYm94ZXN8fCh0LmJveGVzPVtdKSxlLmZ1bGxTaXplPWUuZnVsbFNpemV8fCExLGUucG9zaXRpb249ZS5wb3NpdGlvbnx8InRvcCIsZS53ZWlnaHQ9ZS53ZWlnaHR8fDAsZS5fbGF5ZXJzPWUuX2xheWVyc3x8ZnVuY3Rpb24oKXtyZXR1cm5be3o6MCxkcmF3KHQpe2UuZHJhdyh0KX19XX0sdC5ib3hlcy5wdXNoKGUpfSxyZW1vdmVCb3godCxlKXtlPXQuYm94ZXM/dC5ib3hlcy5pbmRleE9mKGUpOi0xOy0xIT09ZSYmdC5ib3hlcy5zcGxpY2UoZSwxKX0sY29uZmlndXJlKHQsZSxpKXtlLmZ1bGxTaXplPWkuZnVsbFNpemUsZS5wb3NpdGlvbj1pLnBvc2l0aW9uLGUud2VpZ2h0PWkud2VpZ2h0fSx1cGRhdGUoaSx0LGUsYSl7aWYoaSl7dmFyIHM9dG9QYWRkaW5nKGkub3B0aW9ucy5sYXlvdXQucGFkZGluZyksbj1NYXRoLm1heCh0LXMud2lkdGgsMCkscj1NYXRoLm1heChlLXMuaGVpZ2h0LDApLG89YnVpbGRMYXlvdXRCb3hlcyhpLmJveGVzKTtjb25zdCBkPW8udmVydGljYWw7dmFyIGw9by5ob3Jpem9udGFsLGg9KGVhY2goaS5ib3hlcyx0PT57ImZ1bmN0aW9uIj09dHlwZW9mIHQuYmVmb3JlTGF5b3V0JiZ0LmJlZm9yZUxheW91dCgpfSksZC5yZWR1Y2UoKHQsZSk9PmUuYm94Lm9wdGlvbnMmJiExPT09ZS5ib3gub3B0aW9ucy5kaXNwbGF5P3Q6dCsxLDApfHwxKSx0PU9iamVjdC5mcmVlemUoe291dGVyV2lkdGg6dCxvdXRlckhlaWdodDplLHBhZGRpbmc6cyxhdmFpbGFibGVXaWR0aDpuLGF2YWlsYWJsZUhlaWdodDpyLHZCb3hNYXhXaWR0aDpuLzIvaCxoQm94TWF4SGVpZ2h0OnIvMn0pLGU9T2JqZWN0LmFzc2lnbih7fSxzKTt1cGRhdGVNYXhQYWRkaW5nKGUsdG9QYWRkaW5nKGEpKTtjb25zdCBjPU9iamVjdC5hc3NpZ24oe21heFBhZGRpbmc6ZSx3Om4saDpyLHg6cy5sZWZ0LHk6cy50b3B9LHMpO2g9c2V0TGF5b3V0RGltcyhkLmNvbmNhdChsKSx0KTtmaXRCb3hlcyhvLmZ1bGxTaXplLGMsdCxoKSxmaXRCb3hlcyhkLGMsdCxoKSxmaXRCb3hlcyhsLGMsdCxoKSYmZml0Qm94ZXMoZCxjLHQsaCksaGFuZGxlTWF4UGFkZGluZyhjKSxwbGFjZUJveGVzKG8ubGVmdEFuZFRvcCxjLHQsaCksYy54Kz1jLncsYy55Kz1jLmgscGxhY2VCb3hlcyhvLnJpZ2h0QW5kQm90dG9tLGMsdCxoKSxpLmNoYXJ0QXJlYT17bGVmdDpjLmxlZnQsdG9wOmMudG9wLHJpZ2h0OmMubGVmdCtjLncsYm90dG9tOmMudG9wK2MuaCxoZWlnaHQ6Yy5oLHdpZHRoOmMud30sZWFjaChvLmNoYXJ0QXJlYSx0PT57Y29uc3QgZT10LmJveDtPYmplY3QuYXNzaWduKGUsaS5jaGFydEFyZWEpLGUudXBkYXRlKGMudyxjLmgse2xlZnQ6MCx0b3A6MCxyaWdodDowLGJvdHRvbTowfSl9KX19fTtjbGFzcyBCYXNlUGxhdGZvcm17YWNxdWlyZUNvbnRleHQodCxlKXt9cmVsZWFzZUNvbnRleHQodCl7cmV0dXJuITF9YWRkRXZlbnRMaXN0ZW5lcih0LGUsaSl7fXJlbW92ZUV2ZW50TGlzdGVuZXIodCxlLGkpe31nZXREZXZpY2VQaXhlbFJhdGlvKCl7cmV0dXJuIDF9Z2V0TWF4aW11bVNpemUodCxlLGksYSl7cmV0dXJuIGU9TWF0aC5tYXgoMCxlfHx0LndpZHRoKSxpPWl8fHQuaGVpZ2h0LHt3aWR0aDplLGhlaWdodDpNYXRoLm1heCgwLGE/TWF0aC5mbG9vcihlL2EpOmkpfX1pc0F0dGFjaGVkKHQpe3JldHVybiEwfXVwZGF0ZUNvbmZpZyh0KXt9fWNsYXNzIEJhc2ljUGxhdGZvcm0gZXh0ZW5kcyBCYXNlUGxhdGZvcm17YWNxdWlyZUNvbnRleHQodCl7cmV0dXJuIHQmJnQuZ2V0Q29udGV4dCYmdC5nZXRDb250ZXh0KCIyZCIpfHxudWxsfXVwZGF0ZUNvbmZpZyh0KXt0Lm9wdGlvbnMuYW5pbWF0aW9uPSExfX1jb25zdCBFWFBBTkRPX0tFWT0iJGNoYXJ0anMiLEVWRU5UX1RZUEVTPXt0b3VjaHN0YXJ0OiJtb3VzZWRvd24iLHRvdWNobW92ZToibW91c2Vtb3ZlIix0b3VjaGVuZDoibW91c2V1cCIscG9pbnRlcmVudGVyOiJtb3VzZWVudGVyIixwb2ludGVyZG93bjoibW91c2Vkb3duIixwb2ludGVybW92ZToibW91c2Vtb3ZlIixwb2ludGVydXA6Im1vdXNldXAiLHBvaW50ZXJsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJvdXQ6Im1vdXNlb3V0In0saXNOdWxsT3JFbXB0eT10PT5udWxsPT09dHx8IiI9PT10O2Z1bmN0aW9uIGluaXRDYW52YXModCxlKXtjb25zdCBpPXQuc3R5bGU7dmFyIGE9dC5nZXRBdHRyaWJ1dGUoImhlaWdodCIpLHM9dC5nZXRBdHRyaWJ1dGUoIndpZHRoIik7cmV0dXJuIHRbRVhQQU5ET19LRVldPXtpbml0aWFsOntoZWlnaHQ6YSx3aWR0aDpzLHN0eWxlOntkaXNwbGF5OmkuZGlzcGxheSxoZWlnaHQ6aS5oZWlnaHQsd2lkdGg6aS53aWR0aH19fSxpLmRpc3BsYXk9aS5kaXNwbGF5fHwiYmxvY2siLGkuYm94U2l6aW5nPWkuYm94U2l6aW5nfHwiYm9yZGVyLWJveCIsaXNOdWxsT3JFbXB0eShzKSYmdm9pZCAwIT09KHM9cmVhZFVzZWRTaXplKHQsIndpZHRoIikpJiYodC53aWR0aD1zKSxpc051bGxPckVtcHR5KGEpJiYoIiI9PT10LnN0eWxlLmhlaWdodD90LmhlaWdodD10LndpZHRoLyhlfHwyKTp2b2lkIDAhPT0ocz1yZWFkVXNlZFNpemUodCwiaGVpZ2h0IikpJiYodC5oZWlnaHQ9cykpLHR9Y29uc3QgZXZlbnRMaXN0ZW5lck9wdGlvbnM9ISFzdXBwb3J0c0V2ZW50TGlzdGVuZXJPcHRpb25zJiZ7cGFzc2l2ZTohMH07ZnVuY3Rpb24gYWRkTGlzdGVuZXIodCxlLGkpe3QuYWRkRXZlbnRMaXN0ZW5lcihlLGksZXZlbnRMaXN0ZW5lck9wdGlvbnMpfWZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHQsZSxpKXt0LmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKGUsaSxldmVudExpc3RlbmVyT3B0aW9ucyl9ZnVuY3Rpb24gZnJvbU5hdGl2ZUV2ZW50KHQsZSl7dmFyIGk9RVZFTlRfVFlQRVNbdC50eXBlXXx8dC50eXBlLHt4OmEseTpzfT1nZXRSZWxhdGl2ZVBvc2l0aW9uKHQsZSk7cmV0dXJue3R5cGU6aSxjaGFydDplLG5hdGl2ZTp0LHg6dm9pZCAwIT09YT9hOm51bGwseTp2b2lkIDAhPT1zP3M6bnVsbH19ZnVuY3Rpb24gbm9kZUxpc3RDb250YWlucyh0LGUpe2Zvcihjb25zdCBpIG9mIHQpaWYoaT09PWV8fGkuY29udGFpbnMoZSkpcmV0dXJuITB9ZnVuY3Rpb24gY3JlYXRlQXR0YWNoT2JzZXJ2ZXIodCxlLGEpe2NvbnN0IHM9dC5jYW52YXMsaT1uZXcgTXV0YXRpb25PYnNlcnZlcih0PT57bGV0IGU9ITE7Zm9yKGNvbnN0IGkgb2YgdCllPShlPWV8fG5vZGVMaXN0Q29udGFpbnMoaS5hZGRlZE5vZGVzLHMpKSYmIW5vZGVMaXN0Q29udGFpbnMoaS5yZW1vdmVkTm9kZXMscyk7ZSYmYSgpfSk7cmV0dXJuIGkub2JzZXJ2ZShkb2N1bWVudCx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSxpfWZ1bmN0aW9uIGNyZWF0ZURldGFjaE9ic2VydmVyKHQsZSxhKXtjb25zdCBzPXQuY2FudmFzLGk9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodD0+e2xldCBlPSExO2Zvcihjb25zdCBpIG9mIHQpZT0oZT1lfHxub2RlTGlzdENvbnRhaW5zKGkucmVtb3ZlZE5vZGVzLHMpKSYmIW5vZGVMaXN0Q29udGFpbnMoaS5hZGRlZE5vZGVzLHMpO2UmJmEoKX0pO3JldHVybiBpLm9ic2VydmUoZG9jdW1lbnQse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSksaX1jb25zdCBkcnBMaXN0ZW5pbmdDaGFydHM9bmV3IE1hcDtsZXQgb2xkRGV2aWNlUGl4ZWxSYXRpbz0wO2Z1bmN0aW9uIG9uV2luZG93UmVzaXplKCl7Y29uc3QgaT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztpIT09b2xkRGV2aWNlUGl4ZWxSYXRpbyYmKG9sZERldmljZVBpeGVsUmF0aW89aSxkcnBMaXN0ZW5pbmdDaGFydHMuZm9yRWFjaCgodCxlKT0+e2UuY3VycmVudERldmljZVBpeGVsUmF0aW8hPT1pJiZ0KCl9KSl9ZnVuY3Rpb24gbGlzdGVuRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZXModCxlKXtkcnBMaXN0ZW5pbmdDaGFydHMuc2l6ZXx8d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsb25XaW5kb3dSZXNpemUpLGRycExpc3RlbmluZ0NoYXJ0cy5zZXQodCxlKX1mdW5jdGlvbiB1bmxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKHQpe2RycExpc3RlbmluZ0NoYXJ0cy5kZWxldGUodCksZHJwTGlzdGVuaW5nQ2hhcnRzLnNpemV8fHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLG9uV2luZG93UmVzaXplKX1mdW5jdGlvbiBjcmVhdGVSZXNpemVPYnNlcnZlcih0LGUsYSl7dmFyIGk9dC5jYW52YXM7Y29uc3Qgcz1pJiZfZ2V0UGFyZW50Tm9kZShpKTtpZihzKXtjb25zdCBuPXRocm90dGxlZCgodCxlKT0+e3ZhciBpPXMuY2xpZW50V2lkdGg7YSh0LGUpLGk8cy5jbGllbnRXaWR0aCYmYSgpfSx3aW5kb3cpLHI9bmV3IFJlc2l6ZU9ic2VydmVyKHQ9Pnt2YXIgdD10WzBdLGU9dC5jb250ZW50UmVjdC53aWR0aCx0PXQuY29udGVudFJlY3QuaGVpZ2h0OzA9PT1lJiYwPT09dHx8bihlLHQpfSk7cmV0dXJuIHIub2JzZXJ2ZShzKSxsaXN0ZW5EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlcyh0LG4pLHJ9fWZ1bmN0aW9uIHJlbGVhc2VPYnNlcnZlcih0LGUsaSl7aSYmaS5kaXNjb25uZWN0KCksInJlc2l6ZSI9PT1lJiZ1bmxpc3RlbkRldmljZVBpeGVsUmF0aW9DaGFuZ2VzKHQpfWZ1bmN0aW9uIGNyZWF0ZVByb3h5QW5kTGlzdGVuKGUsdCxpKXt2YXIgYT1lLmNhbnZhcyxzPXRocm90dGxlZCh0PT57bnVsbCE9PWUuY3R4JiZpKGZyb21OYXRpdmVFdmVudCh0LGUpKX0sZSk7cmV0dXJuIGFkZExpc3RlbmVyKGEsdCxzKSxzfWNsYXNzIERvbVBsYXRmb3JtIGV4dGVuZHMgQmFzZVBsYXRmb3Jte2FjcXVpcmVDb250ZXh0KHQsZSl7dmFyIGk9dCYmdC5nZXRDb250ZXh0JiZ0LmdldENvbnRleHQoIjJkIik7cmV0dXJuIGkmJmkuY2FudmFzPT09dD8oaW5pdENhbnZhcyh0LGUpLGkpOm51bGx9cmVsZWFzZUNvbnRleHQodCl7Y29uc3QgaT10LmNhbnZhcztpZighaVtFWFBBTkRPX0tFWV0pcmV0dXJuITE7Y29uc3QgYT1pW0VYUEFORE9fS0VZXS5pbml0aWFsLGU9KFsiaGVpZ2h0Iiwid2lkdGgiXS5mb3JFYWNoKHQ9Pnt2YXIgZT1hW3RdO2lzTnVsbE9yVW5kZWYoZSk/aS5yZW1vdmVBdHRyaWJ1dGUodCk6aS5zZXRBdHRyaWJ1dGUodCxlKX0pLGEuc3R5bGV8fHt9KTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCh0PT57aS5zdHlsZVt0XT1lW3RdfSksaS53aWR0aD1pLndpZHRoLGRlbGV0ZSBpW0VYUEFORE9fS0VZXSwhMH1hZGRFdmVudExpc3RlbmVyKHQsZSxpKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlKTtjb25zdCBhPXQuJHByb3hpZXN8fCh0LiRwcm94aWVzPXt9KTtjb25zdCBzPXthdHRhY2g6Y3JlYXRlQXR0YWNoT2JzZXJ2ZXIsZGV0YWNoOmNyZWF0ZURldGFjaE9ic2VydmVyLHJlc2l6ZTpjcmVhdGVSZXNpemVPYnNlcnZlcn1bZV18fGNyZWF0ZVByb3h5QW5kTGlzdGVuO2FbZV09cyh0LGUsaSl9cmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUpe2NvbnN0IGk9dC4kcHJveGllc3x8KHQuJHByb3hpZXM9e30pO3ZhciBhPWlbZV07aWYoYSl7Y29uc3Qgcz17YXR0YWNoOnJlbGVhc2VPYnNlcnZlcixkZXRhY2g6cmVsZWFzZU9ic2VydmVyLHJlc2l6ZTpyZWxlYXNlT2JzZXJ2ZXJ9W2VdfHxyZW1vdmVMaXN0ZW5lcjtzKHQsZSxhKSxpW2VdPXZvaWQgMH19Z2V0RGV2aWNlUGl4ZWxSYXRpbygpe3JldHVybiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb31nZXRNYXhpbXVtU2l6ZSh0LGUsaSxhKXtyZXR1cm4gZ2V0TWF4aW11bVNpemUodCxlLGksYSl9aXNBdHRhY2hlZCh0KXt0PV9nZXRQYXJlbnROb2RlKHQpO3JldHVybiEoIXR8fCF0LmlzQ29ubmVjdGVkKX19ZnVuY3Rpb24gX2RldGVjdFBsYXRmb3JtKHQpe3JldHVybiFfaXNEb21TdXBwb3J0ZWQoKXx8InVuZGVmaW5lZCIhPXR5cGVvZiBPZmZzY3JlZW5DYW52YXMmJnQgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXM/QmFzaWNQbGF0Zm9ybTpEb21QbGF0Zm9ybX1jbGFzcyBFbGVtZW50e3N0YXRpYyBkZWZhdWx0cz17fTtzdGF0aWMgZGVmYXVsdFJvdXRlcz12b2lkIDA7eDt5O2FjdGl2ZT0hMTtvcHRpb25zOyRhbmltYXRpb25zO3Rvb2x0aXBQb3NpdGlvbih0KXt2YXJ7eDp0LHk6ZX09dGhpcy5nZXRQcm9wcyhbIngiLCJ5Il0sdCk7cmV0dXJue3g6dCx5OmV9fWhhc1ZhbHVlKCl7cmV0dXJuIGlzTnVtYmVyKHRoaXMueCkmJmlzTnVtYmVyKHRoaXMueSl9Z2V0UHJvcHModCxlKXtjb25zdCBpPXRoaXMuJGFuaW1hdGlvbnM7aWYoIWV8fCFpKXJldHVybiB0aGlzO2NvbnN0IGE9e307cmV0dXJuIHQuZm9yRWFjaCh0PT57YVt0XT1pW3RdJiZpW3RdLmFjdGl2ZSgpP2lbdF0uX3RvOnRoaXNbdF19KSxhfX1mdW5jdGlvbiBhdXRvU2tpcChpLGEpe3ZhciBzPWkub3B0aW9ucy50aWNrcyxpPWRldGVybWluZU1heFRpY2tzKGkpLGk9TWF0aC5taW4ocy5tYXhUaWNrc0xpbWl0fHxpLGkpLG49cy5tYWpvci5lbmFibGVkP2dldE1ham9ySW5kaWNlcyhhKTpbXSxzPW4ubGVuZ3RoLHI9blswXSxvPW5bcy0xXSxsPVtdO2lmKGk8cylyZXR1cm4gc2tpcE1ham9ycyhhLGwsbixzL2kpLGw7dmFyIGg9Y2FsY3VsYXRlU3BhY2luZyhuLGEsaSk7aWYoMDxzKXtsZXQgdCxlO2k9MTxzP01hdGgucm91bmQoKG8tcikvKHMtMSkpOm51bGw7Zm9yKHNraXAoYSxsLGgsaXNOdWxsT3JVbmRlZihpKT8wOnItaSxyKSx0PTAsZT1zLTE7dDxlO3QrKylza2lwKGEsbCxoLG5bdF0sblt0KzFdKTtyZXR1cm4gc2tpcChhLGwsaCxvLGlzTnVsbE9yVW5kZWYoaSk/YS5sZW5ndGg6bytpKSxsfXJldHVybiBza2lwKGEsbCxoKSxsfWZ1bmN0aW9uIGRldGVybWluZU1heFRpY2tzKHQpe3ZhciBlPXQub3B0aW9ucy5vZmZzZXQsaT10Ll90aWNrU2l6ZSgpLGU9dC5fbGVuZ3RoL2krKGU/MDoxKSx0PXQuX21heExlbmd0aC9pO3JldHVybiBNYXRoLmZsb29yKE1hdGgubWluKGUsdCkpfWZ1bmN0aW9uIGNhbGN1bGF0ZVNwYWNpbmcodCxlLGkpe3ZhciB0PWdldEV2ZW5TcGFjaW5nKHQpLGE9ZS5sZW5ndGgvaTtpZighdClyZXR1cm4gTWF0aC5tYXgoYSwxKTt2YXIgcz1fZmFjdG9yaXplKHQpO2ZvcihsZXQgdD0wLGU9cy5sZW5ndGgtMTt0PGU7dCsrKXt2YXIgbj1zW3RdO2lmKGE8bilyZXR1cm4gbn1yZXR1cm4gTWF0aC5tYXgoYSwxKX1mdW5jdGlvbiBnZXRNYWpvckluZGljZXModCl7Y29uc3QgZT1bXTtsZXQgaSxhO2ZvcihpPTAsYT10Lmxlbmd0aDtpPGE7aSsrKXRbaV0ubWFqb3ImJmUucHVzaChpKTtyZXR1cm4gZX1mdW5jdGlvbiBza2lwTWFqb3JzKHQsZSxpLGEpe2xldCBzPTAsbj1pWzBdLHI7Zm9yKGE9TWF0aC5jZWlsKGEpLHI9MDtyPHQubGVuZ3RoO3IrKylyPT09biYmKGUucHVzaCh0W3JdKSxzKyssbj1pW3MqYV0pfWZ1bmN0aW9uIHNraXAodCxlLGksYSxzKXt2YXIgbj12YWx1ZU9yRGVmYXVsdChhLDApLHI9TWF0aC5taW4odmFsdWVPckRlZmF1bHQocyx0Lmxlbmd0aCksdC5sZW5ndGgpO2xldCBvPTAsbCxoLGQ7Zm9yKGk9TWF0aC5jZWlsKGkpLHMmJihpPShsPXMtYSkvTWF0aC5mbG9vcihsL2kpKSxkPW47ZDwwOylvKyssZD1NYXRoLnJvdW5kKG4rbyppKTtmb3IoaD1NYXRoLm1heChuLDApO2g8cjtoKyspaD09PWQmJihlLnB1c2godFtoXSksbysrLGQ9TWF0aC5yb3VuZChuK28qaSkpfWZ1bmN0aW9uIGdldEV2ZW5TcGFjaW5nKHQpe3ZhciBlPXQubGVuZ3RoO2xldCBpLGE7aWYoZTwyKXJldHVybiExO2ZvcihhPXRbMF0saT0xO2k8ZTsrK2kpaWYodFtpXS10W2ktMV0hPT1hKXJldHVybiExO3JldHVybiBhfWNvbnN0IHJldmVyc2VBbGlnbj10PT4ibGVmdCI9PT10PyJyaWdodCI6InJpZ2h0Ij09PXQ/ImxlZnQiOnQsb2Zmc2V0RnJvbUVkZ2U9KHQsZSxpKT0+InRvcCI9PT1lfHwibGVmdCI9PT1lP3RbZV0raTp0W2VdLWksZ2V0VGlja3NMaW1pdD0odCxlKT0+TWF0aC5taW4oZXx8dCx0KTtmdW5jdGlvbiBzYW1wbGUodCxlKXtjb25zdCBpPVtdO3ZhciBhPXQubGVuZ3RoL2Uscz10Lmxlbmd0aDtsZXQgbj0wO2Zvcig7bjxzO24rPWEpaS5wdXNoKHRbTWF0aC5mbG9vcihuKV0pO3JldHVybiBpfWZ1bmN0aW9uIGdldFBpeGVsRm9yR3JpZExpbmUodCxlLGkpe3ZhciBhPXQudGlja3MubGVuZ3RoLHM9TWF0aC5taW4oZSxhLTEpLG49dC5fc3RhcnRQaXhlbCxyPXQuX2VuZFBpeGVsO2xldCBvPXQuZ2V0UGl4ZWxGb3JUaWNrKHMpLGw7aWYoIShpJiYobD0xPT09YT9NYXRoLm1heChvLW4sci1vKTowPT09ZT8odC5nZXRQaXhlbEZvclRpY2soMSktbykvMjooby10LmdldFBpeGVsRm9yVGljayhzLTEpKS8yLChvKz1zPGU/bDotbCk8bi0xZS02fHxvPnIrMWUtNikpKXJldHVybiBvfWZ1bmN0aW9uIGdhcmJhZ2VDb2xsZWN0KHQscyl7ZWFjaCh0LHQ9Pntjb25zdCBlPXQuZ2M7dmFyIGk9ZS5sZW5ndGgvMjtsZXQgYTtpZihzPGkpe2ZvcihhPTA7YTxpOysrYSlkZWxldGUgdC5kYXRhW2VbYV1dO2Uuc3BsaWNlKDAsaSl9fSl9ZnVuY3Rpb24gZ2V0VGlja01hcmtMZW5ndGgodCl7cmV0dXJuIHQuZHJhd1RpY2tzP3QudGlja0xlbmd0aDowfWZ1bmN0aW9uIGdldFRpdGxlSGVpZ2h0KHQsZSl7aWYoIXQuZGlzcGxheSlyZXR1cm4gMDt2YXIgZT10b0ZvbnQodC5mb250LGUpLGk9dG9QYWRkaW5nKHQucGFkZGluZyk7cmV0dXJuKGlzQXJyYXkodC50ZXh0KT90LnRleHQubGVuZ3RoOjEpKmUubGluZUhlaWdodCtpLmhlaWdodH1mdW5jdGlvbiBjcmVhdGVTY2FsZUNvbnRleHQodCxlKXtyZXR1cm4gY3JlYXRlQ29udGV4dCh0LHtzY2FsZTplLHR5cGU6InNjYWxlIn0pfWZ1bmN0aW9uIGNyZWF0ZVRpY2tDb250ZXh0KHQsZSxpKXtyZXR1cm4gY3JlYXRlQ29udGV4dCh0LHt0aWNrOmksaW5kZXg6ZSx0eXBlOiJ0aWNrIn0pfWZ1bmN0aW9uIHRpdGxlQWxpZ24odCxlLGkpe2xldCBhPV90b0xlZnRSaWdodENlbnRlcih0KTtyZXR1cm4gYT1pJiYicmlnaHQiIT09ZXx8IWkmJiJyaWdodCI9PT1lP3JldmVyc2VBbGlnbihhKTphfWZ1bmN0aW9uIHRpdGxlQXJncyh0LGUsaSxhKXt2YXJ7dG9wOnMsbGVmdDpuLGJvdHRvbTpyLHJpZ2h0Om8sY2hhcnQ6bH09dDtjb25zdHtjaGFydEFyZWE6aCxzY2FsZXM6ZH09bDtsZXQgYz0wLHUsZyxwO3ZhciBmLG0sbD1yLXMsdj1vLW47cmV0dXJuIHQuaXNIb3Jpem9udGFsKCk/KGc9X2FsaWduU3RhcnRFbmQoYSxuLG8pLHA9aXNPYmplY3QoaSk/KG09aVtmPU9iamVjdC5rZXlzKGkpWzBdXSxkW2ZdLmdldFBpeGVsRm9yVmFsdWUobSkrbC1lKToiY2VudGVyIj09PWk/KGguYm90dG9tK2gudG9wKS8yK2wtZTpvZmZzZXRGcm9tRWRnZSh0LGksZSksdT1vLW4pOihnPWlzT2JqZWN0KGkpPyhtPWlbZj1PYmplY3Qua2V5cyhpKVswXV0sZFtmXS5nZXRQaXhlbEZvclZhbHVlKG0pLXYrZSk6ImNlbnRlciI9PT1pPyhoLmxlZnQraC5yaWdodCkvMi12K2U6b2Zmc2V0RnJvbUVkZ2UodCxpLGUpLHA9X2FsaWduU3RhcnRFbmQoYSxyLHMpLGM9ImxlZnQiPT09aT8tSEFMRl9QSTpIQUxGX1BJKSx7dGl0bGVYOmcsdGl0bGVZOnAsbWF4V2lkdGg6dSxyb3RhdGlvbjpjfX1jbGFzcyBTY2FsZSBleHRlbmRzIEVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLmlkPXQuaWQsdGhpcy50eXBlPXQudHlwZSx0aGlzLm9wdGlvbnM9dm9pZCAwLHRoaXMuY3R4PXQuY3R4LHRoaXMuY2hhcnQ9dC5jaGFydCx0aGlzLnRvcD12b2lkIDAsdGhpcy5ib3R0b209dm9pZCAwLHRoaXMubGVmdD12b2lkIDAsdGhpcy5yaWdodD12b2lkIDAsdGhpcy53aWR0aD12b2lkIDAsdGhpcy5oZWlnaHQ9dm9pZCAwLHRoaXMuX21hcmdpbnM9e2xlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowfSx0aGlzLm1heFdpZHRoPXZvaWQgMCx0aGlzLm1heEhlaWdodD12b2lkIDAsdGhpcy5wYWRkaW5nVG9wPXZvaWQgMCx0aGlzLnBhZGRpbmdCb3R0b209dm9pZCAwLHRoaXMucGFkZGluZ0xlZnQ9dm9pZCAwLHRoaXMucGFkZGluZ1JpZ2h0PXZvaWQgMCx0aGlzLmF4aXM9dm9pZCAwLHRoaXMubGFiZWxSb3RhdGlvbj12b2lkIDAsdGhpcy5taW49dm9pZCAwLHRoaXMubWF4PXZvaWQgMCx0aGlzLl9yYW5nZT12b2lkIDAsdGhpcy50aWNrcz1bXSx0aGlzLl9ncmlkTGluZUl0ZW1zPW51bGwsdGhpcy5fbGFiZWxJdGVtcz1udWxsLHRoaXMuX2xhYmVsU2l6ZXM9bnVsbCx0aGlzLl9sZW5ndGg9MCx0aGlzLl9tYXhMZW5ndGg9MCx0aGlzLl9sb25nZXN0VGV4dENhY2hlPXt9LHRoaXMuX3N0YXJ0UGl4ZWw9dm9pZCAwLHRoaXMuX2VuZFBpeGVsPXZvaWQgMCx0aGlzLl9yZXZlcnNlUGl4ZWxzPSExLHRoaXMuX3VzZXJNYXg9dm9pZCAwLHRoaXMuX3VzZXJNaW49dm9pZCAwLHRoaXMuX3N1Z2dlc3RlZE1heD12b2lkIDAsdGhpcy5fc3VnZ2VzdGVkTWluPXZvaWQgMCx0aGlzLl90aWNrc0xlbmd0aD0wLHRoaXMuX2JvcmRlclZhbHVlPTAsdGhpcy5fY2FjaGU9e30sdGhpcy5fZGF0YUxpbWl0c0NhY2hlZD0hMSx0aGlzLiRjb250ZXh0PXZvaWQgMH1pbml0KHQpe3RoaXMub3B0aW9ucz10LnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpLHRoaXMuYXhpcz10LmF4aXMsdGhpcy5fdXNlck1pbj10aGlzLnBhcnNlKHQubWluKSx0aGlzLl91c2VyTWF4PXRoaXMucGFyc2UodC5tYXgpLHRoaXMuX3N1Z2dlc3RlZE1pbj10aGlzLnBhcnNlKHQuc3VnZ2VzdGVkTWluKSx0aGlzLl9zdWdnZXN0ZWRNYXg9dGhpcy5wYXJzZSh0LnN1Z2dlc3RlZE1heCl9cGFyc2UodCxlKXtyZXR1cm4gdH1nZXRVc2VyQm91bmRzKCl7dmFye191c2VyTWluOnQsX3VzZXJNYXg6ZSxfc3VnZ2VzdGVkTWluOmksX3N1Z2dlc3RlZE1heDphfT10aGlzLHQ9ZmluaXRlT3JEZWZhdWx0KHQsTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxlPWZpbml0ZU9yRGVmYXVsdChlLE51bWJlci5ORUdBVElWRV9JTkZJTklUWSksaT1maW5pdGVPckRlZmF1bHQoaSxOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLGE9ZmluaXRlT3JEZWZhdWx0KGEsTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKTtyZXR1cm57bWluOmZpbml0ZU9yRGVmYXVsdCh0LGkpLG1heDpmaW5pdGVPckRlZmF1bHQoZSxhKSxtaW5EZWZpbmVkOmlzTnVtYmVyRmluaXRlKHQpLG1heERlZmluZWQ6aXNOdW1iZXJGaW5pdGUoZSl9fWdldE1pbk1heChpKXtsZXR7bWluOmEsbWF4OnMsbWluRGVmaW5lZDpuLG1heERlZmluZWQ6cn09dGhpcy5nZXRVc2VyQm91bmRzKCk7dmFyIG87aWYobiYmcilyZXR1cm57bWluOmEsbWF4OnN9O2NvbnN0IGw9dGhpcy5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcygpO2ZvcihsZXQgdD0wLGU9bC5sZW5ndGg7dDxlOysrdClvPWxbdF0uY29udHJvbGxlci5nZXRNaW5NYXgodGhpcyxpKSxufHwoYT1NYXRoLm1pbihhLG8ubWluKSkscnx8KHM9TWF0aC5tYXgocyxvLm1heCkpO3JldHVybiBhPXImJmE+cz9zOmEscz1uJiZhPnM/YTpzLHttaW46ZmluaXRlT3JEZWZhdWx0KGEsZmluaXRlT3JEZWZhdWx0KHMsYSkpLG1heDpmaW5pdGVPckRlZmF1bHQocyxmaW5pdGVPckRlZmF1bHQoYSxzKSl9fWdldFBhZGRpbmcoKXtyZXR1cm57bGVmdDp0aGlzLnBhZGRpbmdMZWZ0fHwwLHRvcDp0aGlzLnBhZGRpbmdUb3B8fDAscmlnaHQ6dGhpcy5wYWRkaW5nUmlnaHR8fDAsYm90dG9tOnRoaXMucGFkZGluZ0JvdHRvbXx8MH19Z2V0VGlja3MoKXtyZXR1cm4gdGhpcy50aWNrc31nZXRMYWJlbHMoKXt2YXIgdD10aGlzLmNoYXJ0LmRhdGE7cmV0dXJuIHRoaXMub3B0aW9ucy5sYWJlbHN8fCh0aGlzLmlzSG9yaXpvbnRhbCgpP3QueExhYmVsczp0LnlMYWJlbHMpfHx0LmxhYmVsc3x8W119Z2V0TGFiZWxJdGVtcyh0PXRoaXMuY2hhcnQuY2hhcnRBcmVhKXtyZXR1cm4gdGhpcy5fbGFiZWxJdGVtc3x8KHRoaXMuX2xhYmVsSXRlbXM9dGhpcy5fY29tcHV0ZUxhYmVsSXRlbXModCkpfWJlZm9yZUxheW91dCgpe3RoaXMuX2NhY2hlPXt9LHRoaXMuX2RhdGFMaW1pdHNDYWNoZWQ9ITF9YmVmb3JlVXBkYXRlKCl7Y2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZVVwZGF0ZSxbdGhpc10pfXVwZGF0ZSh0LGUsaSl7dmFye2JlZ2luQXRaZXJvOmEsZ3JhY2U6cyx0aWNrczpufT10aGlzLm9wdGlvbnMscj1uLnNhbXBsZVNpemUsdD0odGhpcy5iZWZvcmVVcGRhdGUoKSx0aGlzLm1heFdpZHRoPXQsdGhpcy5tYXhIZWlnaHQ9ZSx0aGlzLl9tYXJnaW5zPWk9T2JqZWN0LmFzc2lnbih7bGVmdDowLHJpZ2h0OjAsdG9wOjAsYm90dG9tOjB9LGkpLHRoaXMudGlja3M9bnVsbCx0aGlzLl9sYWJlbFNpemVzPW51bGwsdGhpcy5fZ3JpZExpbmVJdGVtcz1udWxsLHRoaXMuX2xhYmVsSXRlbXM9bnVsbCx0aGlzLmJlZm9yZVNldERpbWVuc2lvbnMoKSx0aGlzLnNldERpbWVuc2lvbnMoKSx0aGlzLmFmdGVyU2V0RGltZW5zaW9ucygpLHRoaXMuX21heExlbmd0aD10aGlzLmlzSG9yaXpvbnRhbCgpP3RoaXMud2lkdGgraS5sZWZ0K2kucmlnaHQ6dGhpcy5oZWlnaHQraS50b3AraS5ib3R0b20sdGhpcy5fZGF0YUxpbWl0c0NhY2hlZHx8KHRoaXMuYmVmb3JlRGF0YUxpbWl0cygpLHRoaXMuZGV0ZXJtaW5lRGF0YUxpbWl0cygpLHRoaXMuYWZ0ZXJEYXRhTGltaXRzKCksdGhpcy5fcmFuZ2U9X2FkZEdyYWNlKHRoaXMscyxhKSx0aGlzLl9kYXRhTGltaXRzQ2FjaGVkPSEwKSx0aGlzLmJlZm9yZUJ1aWxkVGlja3MoKSx0aGlzLnRpY2tzPXRoaXMuYnVpbGRUaWNrcygpfHxbXSx0aGlzLmFmdGVyQnVpbGRUaWNrcygpLHI8dGhpcy50aWNrcy5sZW5ndGgpO3RoaXMuX2NvbnZlcnRUaWNrc1RvTGFiZWxzKHQ/c2FtcGxlKHRoaXMudGlja3Mscik6dGhpcy50aWNrcyksdGhpcy5jb25maWd1cmUoKSx0aGlzLmJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKSx0aGlzLmNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKSx0aGlzLmFmdGVyQ2FsY3VsYXRlTGFiZWxSb3RhdGlvbigpLG4uZGlzcGxheSYmKG4uYXV0b1NraXB8fCJhdXRvIj09PW4uc291cmNlKSYmKHRoaXMudGlja3M9YXV0b1NraXAodGhpcyx0aGlzLnRpY2tzKSx0aGlzLl9sYWJlbFNpemVzPW51bGwsdGhpcy5hZnRlckF1dG9Ta2lwKCkpLHQmJnRoaXMuX2NvbnZlcnRUaWNrc1RvTGFiZWxzKHRoaXMudGlja3MpLHRoaXMuYmVmb3JlRml0KCksdGhpcy5maXQoKSx0aGlzLmFmdGVyRml0KCksdGhpcy5hZnRlclVwZGF0ZSgpfWNvbmZpZ3VyZSgpe2xldCB0PXRoaXMub3B0aW9ucy5yZXZlcnNlLGUsaTt0aGlzLmlzSG9yaXpvbnRhbCgpPyhlPXRoaXMubGVmdCxpPXRoaXMucmlnaHQpOihlPXRoaXMudG9wLGk9dGhpcy5ib3R0b20sdD0hdCksdGhpcy5fc3RhcnRQaXhlbD1lLHRoaXMuX2VuZFBpeGVsPWksdGhpcy5fcmV2ZXJzZVBpeGVscz10LHRoaXMuX2xlbmd0aD1pLWUsdGhpcy5fYWxpZ25Ub1BpeGVscz10aGlzLm9wdGlvbnMuYWxpZ25Ub1BpeGVsc31hZnRlclVwZGF0ZSgpe2NhbGxiYWNrKHRoaXMub3B0aW9ucy5hZnRlclVwZGF0ZSxbdGhpc10pfWJlZm9yZVNldERpbWVuc2lvbnMoKXtjYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlU2V0RGltZW5zaW9ucyxbdGhpc10pfXNldERpbWVuc2lvbnMoKXt0aGlzLmlzSG9yaXpvbnRhbCgpPyh0aGlzLndpZHRoPXRoaXMubWF4V2lkdGgsdGhpcy5sZWZ0PTAsdGhpcy5yaWdodD10aGlzLndpZHRoKToodGhpcy5oZWlnaHQ9dGhpcy5tYXhIZWlnaHQsdGhpcy50b3A9MCx0aGlzLmJvdHRvbT10aGlzLmhlaWdodCksdGhpcy5wYWRkaW5nTGVmdD0wLHRoaXMucGFkZGluZ1RvcD0wLHRoaXMucGFkZGluZ1JpZ2h0PTAsdGhpcy5wYWRkaW5nQm90dG9tPTB9YWZ0ZXJTZXREaW1lbnNpb25zKCl7Y2FsbGJhY2sodGhpcy5vcHRpb25zLmFmdGVyU2V0RGltZW5zaW9ucyxbdGhpc10pfV9jYWxsSG9va3ModCl7dGhpcy5jaGFydC5ub3RpZnlQbHVnaW5zKHQsdGhpcy5nZXRDb250ZXh0KCkpLGNhbGxiYWNrKHRoaXMub3B0aW9uc1t0XSxbdGhpc10pfWJlZm9yZURhdGFMaW1pdHMoKXt0aGlzLl9jYWxsSG9va3MoImJlZm9yZURhdGFMaW1pdHMiKX1kZXRlcm1pbmVEYXRhTGltaXRzKCl7fWFmdGVyRGF0YUxpbWl0cygpe3RoaXMuX2NhbGxIb29rcygiYWZ0ZXJEYXRhTGltaXRzIil9YmVmb3JlQnVpbGRUaWNrcygpe3RoaXMuX2NhbGxIb29rcygiYmVmb3JlQnVpbGRUaWNrcyIpfWJ1aWxkVGlja3MoKXtyZXR1cm5bXX1hZnRlckJ1aWxkVGlja3MoKXt0aGlzLl9jYWxsSG9va3MoImFmdGVyQnVpbGRUaWNrcyIpfWJlZm9yZVRpY2tUb0xhYmVsQ29udmVyc2lvbigpe2NhbGxiYWNrKHRoaXMub3B0aW9ucy5iZWZvcmVUaWNrVG9MYWJlbENvbnZlcnNpb24sW3RoaXNdKX1nZW5lcmF0ZVRpY2tMYWJlbHModCl7dmFyIGU9dGhpcy5vcHRpb25zLnRpY2tzO2xldCBpLGEscztmb3IoaT0wLGE9dC5sZW5ndGg7aTxhO2krKykocz10W2ldKS5sYWJlbD1jYWxsYmFjayhlLmNhbGxiYWNrLFtzLnZhbHVlLGksdF0sdGhpcyl9YWZ0ZXJUaWNrVG9MYWJlbENvbnZlcnNpb24oKXtjYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJUaWNrVG9MYWJlbENvbnZlcnNpb24sW3RoaXNdKX1iZWZvcmVDYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCl7Y2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZUNhbGN1bGF0ZUxhYmVsUm90YXRpb24sW3RoaXNdKX1jYWxjdWxhdGVMYWJlbFJvdGF0aW9uKCl7dmFyIHQsZSxpLGEscz10aGlzLm9wdGlvbnMsbj1zLnRpY2tzLHI9Z2V0VGlja3NMaW1pdCh0aGlzLnRpY2tzLmxlbmd0aCxzLnRpY2tzLm1heFRpY2tzTGltaXQpLG89bi5taW5Sb3RhdGlvbnx8MCxsPW4ubWF4Um90YXRpb247bGV0IGg9bzshdGhpcy5faXNWaXNpYmxlKCl8fCFuLmRpc3BsYXl8fGw8PW98fHI8PTF8fCF0aGlzLmlzSG9yaXpvbnRhbCgpP3RoaXMubGFiZWxSb3RhdGlvbj1vOihlPSh0PXRoaXMuX2dldExhYmVsU2l6ZXMoKSkud2lkZXN0LndpZHRoLGk9dC5oaWdoZXN0LmhlaWdodCxhPV9saW1pdFZhbHVlKHRoaXMuY2hhcnQud2lkdGgtZSwwLHRoaXMubWF4V2lkdGgpLChzLm9mZnNldD90aGlzLm1heFdpZHRoL3I6YS8oci0xKSk8ZSs2JiYoYT1hLyhyLShzLm9mZnNldD8uNToxKSkscj10aGlzLm1heEhlaWdodC1nZXRUaWNrTWFya0xlbmd0aChzLmdyaWQpLW4ucGFkZGluZy1nZXRUaXRsZUhlaWdodChzLnRpdGxlLHRoaXMuY2hhcnQub3B0aW9ucy5mb250KSxuPU1hdGguc3FydChlKmUraSppKSxoPXRvRGVncmVlcyhNYXRoLm1pbihNYXRoLmFzaW4oX2xpbWl0VmFsdWUoKHQuaGlnaGVzdC5oZWlnaHQrNikvYSwtMSwxKSksTWF0aC5hc2luKF9saW1pdFZhbHVlKHIvbiwtMSwxKSktTWF0aC5hc2luKF9saW1pdFZhbHVlKGkvbiwtMSwxKSkpKSxoPU1hdGgubWF4KG8sTWF0aC5taW4obCxoKSkpLHRoaXMubGFiZWxSb3RhdGlvbj1oKX1hZnRlckNhbGN1bGF0ZUxhYmVsUm90YXRpb24oKXtjYWxsYmFjayh0aGlzLm9wdGlvbnMuYWZ0ZXJDYWxjdWxhdGVMYWJlbFJvdGF0aW9uLFt0aGlzXSl9YWZ0ZXJBdXRvU2tpcCgpe31iZWZvcmVGaXQoKXtjYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlRml0LFt0aGlzXSl9Zml0KCl7Y29uc3QgdD17d2lkdGg6MCxoZWlnaHQ6MH07dmFyIGUsaSxhLHMsbix7Y2hhcnQ6cixvcHRpb25zOnt0aWNrczpvLHRpdGxlOmwsZ3JpZDpofX09dGhpcyxkPXRoaXMuX2lzVmlzaWJsZSgpLGM9dGhpcy5pc0hvcml6b250YWwoKTtkJiYoZD1nZXRUaXRsZUhlaWdodChsLHIub3B0aW9ucy5mb250KSxjPyh0LndpZHRoPXRoaXMubWF4V2lkdGgsdC5oZWlnaHQ9Z2V0VGlja01hcmtMZW5ndGgoaCkrZCk6KHQuaGVpZ2h0PXRoaXMubWF4SGVpZ2h0LHQud2lkdGg9Z2V0VGlja01hcmtMZW5ndGgoaCkrZCksby5kaXNwbGF5JiZ0aGlzLnRpY2tzLmxlbmd0aCYmKHtmaXJzdDpsLGxhc3Q6aCx3aWRlc3Q6ZCxoaWdoZXN0OmV9PXRoaXMuX2dldExhYmVsU2l6ZXMoKSxpPTIqby5wYWRkaW5nLHM9dG9SYWRpYW5zKHRoaXMubGFiZWxSb3RhdGlvbiksYT1NYXRoLmNvcyhzKSxzPU1hdGguc2luKHMpLGM/KG49by5taXJyb3I/MDpzKmQud2lkdGgrYSplLmhlaWdodCx0LmhlaWdodD1NYXRoLm1pbih0aGlzLm1heEhlaWdodCx0LmhlaWdodCtuK2kpKToobj1vLm1pcnJvcj8wOmEqZC53aWR0aCtzKmUuaGVpZ2h0LHQud2lkdGg9TWF0aC5taW4odGhpcy5tYXhXaWR0aCx0LndpZHRoK24raSkpLHRoaXMuX2NhbGN1bGF0ZVBhZGRpbmcobCxoLHMsYSkpKSx0aGlzLl9oYW5kbGVNYXJnaW5zKCksYz8odGhpcy53aWR0aD10aGlzLl9sZW5ndGg9ci53aWR0aC10aGlzLl9tYXJnaW5zLmxlZnQtdGhpcy5fbWFyZ2lucy5yaWdodCx0aGlzLmhlaWdodD10LmhlaWdodCk6KHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10aGlzLl9sZW5ndGg9ci5oZWlnaHQtdGhpcy5fbWFyZ2lucy50b3AtdGhpcy5fbWFyZ2lucy5ib3R0b20pfV9jYWxjdWxhdGVQYWRkaW5nKGksYSxzLG4pe3Zhcnt0aWNrczp7YWxpZ246cixwYWRkaW5nOm99LHBvc2l0aW9uOmx9PXRoaXMub3B0aW9ucyxoPTAhPT10aGlzLmxhYmVsUm90YXRpb24sbD0idG9wIiE9PWwmJiJ4Ij09PXRoaXMuYXhpcztpZih0aGlzLmlzSG9yaXpvbnRhbCgpKXt2YXIgZD10aGlzLmdldFBpeGVsRm9yVGljaygwKS10aGlzLmxlZnQsYz10aGlzLnJpZ2h0LXRoaXMuZ2V0UGl4ZWxGb3JUaWNrKHRoaXMudGlja3MubGVuZ3RoLTEpO2xldCB0PTAsZT0wO2g/ZT1sPyh0PW4qaS53aWR0aCxzKmEuaGVpZ2h0KToodD1zKmkuaGVpZ2h0LG4qYS53aWR0aCk6InN0YXJ0Ij09PXI/ZT1hLndpZHRoOiJlbmQiPT09cj90PWkud2lkdGg6ImlubmVyIiE9PXImJih0PWkud2lkdGgvMixlPWEud2lkdGgvMiksdGhpcy5wYWRkaW5nTGVmdD1NYXRoLm1heCgodC1kK28pKnRoaXMud2lkdGgvKHRoaXMud2lkdGgtZCksMCksdGhpcy5wYWRkaW5nUmlnaHQ9TWF0aC5tYXgoKGUtYytvKSp0aGlzLndpZHRoLyh0aGlzLndpZHRoLWMpLDApfWVsc2V7bGV0IHQ9YS5oZWlnaHQvMixlPWkuaGVpZ2h0LzI7InN0YXJ0Ij09PXI/KHQ9MCxlPWkuaGVpZ2h0KToiZW5kIj09PXImJih0PWEuaGVpZ2h0LGU9MCksdGhpcy5wYWRkaW5nVG9wPXQrbyx0aGlzLnBhZGRpbmdCb3R0b209ZStvfX1faGFuZGxlTWFyZ2lucygpe3RoaXMuX21hcmdpbnMmJih0aGlzLl9tYXJnaW5zLmxlZnQ9TWF0aC5tYXgodGhpcy5wYWRkaW5nTGVmdCx0aGlzLl9tYXJnaW5zLmxlZnQpLHRoaXMuX21hcmdpbnMudG9wPU1hdGgubWF4KHRoaXMucGFkZGluZ1RvcCx0aGlzLl9tYXJnaW5zLnRvcCksdGhpcy5fbWFyZ2lucy5yaWdodD1NYXRoLm1heCh0aGlzLnBhZGRpbmdSaWdodCx0aGlzLl9tYXJnaW5zLnJpZ2h0KSx0aGlzLl9tYXJnaW5zLmJvdHRvbT1NYXRoLm1heCh0aGlzLnBhZGRpbmdCb3R0b20sdGhpcy5fbWFyZ2lucy5ib3R0b20pKX1hZnRlckZpdCgpe2NhbGxiYWNrKHRoaXMub3B0aW9ucy5hZnRlckZpdCxbdGhpc10pfWlzSG9yaXpvbnRhbCgpe3ZhcntheGlzOnQscG9zaXRpb246ZX09dGhpcy5vcHRpb25zO3JldHVybiJ0b3AiPT09ZXx8ImJvdHRvbSI9PT1lfHwieCI9PT10fWlzRnVsbFNpemUoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmZ1bGxTaXplfV9jb252ZXJ0VGlja3NUb0xhYmVscyh0KXt0aGlzLmJlZm9yZVRpY2tUb0xhYmVsQ29udmVyc2lvbigpLHRoaXMuZ2VuZXJhdGVUaWNrTGFiZWxzKHQpO2xldCBlLGk7Zm9yKGU9MCxpPXQubGVuZ3RoO2U8aTtlKyspaXNOdWxsT3JVbmRlZih0W2VdLmxhYmVsKSYmKHQuc3BsaWNlKGUsMSksaS0tLGUtLSk7dGhpcy5hZnRlclRpY2tUb0xhYmVsQ29udmVyc2lvbigpfV9nZXRMYWJlbFNpemVzKCl7bGV0IGU9dGhpcy5fbGFiZWxTaXplcztpZighZSl7dmFyIGk9dGhpcy5vcHRpb25zLnRpY2tzLnNhbXBsZVNpemU7bGV0IHQ9dGhpcy50aWNrcztpPHQubGVuZ3RoJiYodD1zYW1wbGUodCxpKSksdGhpcy5fbGFiZWxTaXplcz1lPXRoaXMuX2NvbXB1dGVMYWJlbFNpemVzKHQsdC5sZW5ndGgsdGhpcy5vcHRpb25zLnRpY2tzLm1heFRpY2tzTGltaXQpfXJldHVybiBlfV9jb21wdXRlTGFiZWxTaXplcyh0LGUsaSl7Y29uc3R7Y3R4OmEsX2xvbmdlc3RUZXh0Q2FjaGU6c309dGhpcyxuPVtdLHI9W107dmFyIG89TWF0aC5mbG9vcihlL2dldFRpY2tzTGltaXQoZSxpKSk7bGV0IGw9MCxoPTAsZCxjLHUsZyxwLGYsbSx2LHgsYixfO2ZvcihkPTA7ZDxlO2QrPW8pe2lmKGc9dFtkXS5sYWJlbCxwPXRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoZCksYS5mb250PWY9cC5zdHJpbmcsbT1zW2ZdPXNbZl18fHtkYXRhOnt9LGdjOltdfSx2PXAubGluZUhlaWdodCx4PWI9MCxpc051bGxPclVuZGVmKGcpfHxpc0FycmF5KGcpKXtpZihpc0FycmF5KGcpKWZvcihjPTAsdT1nLmxlbmd0aDtjPHU7KytjKV89Z1tjXSxpc051bGxPclVuZGVmKF8pfHxpc0FycmF5KF8pfHwoeD1fbWVhc3VyZVRleHQoYSxtLmRhdGEsbS5nYyx4LF8pLGIrPXYpfWVsc2UgeD1fbWVhc3VyZVRleHQoYSxtLmRhdGEsbS5nYyx4LGcpLGI9djtuLnB1c2goeCksci5wdXNoKGIpLGw9TWF0aC5tYXgoeCxsKSxoPU1hdGgubWF4KGIsaCl9Z2FyYmFnZUNvbGxlY3QocyxlKTt2YXIgaT1uLmluZGV4T2YobCkseT1yLmluZGV4T2YoaCksaz10PT4oe3dpZHRoOm5bdF18fDAsaGVpZ2h0OnJbdF18fDB9KTtyZXR1cm57Zmlyc3Q6aygwKSxsYXN0OmsoZS0xKSx3aWRlc3Q6ayhpKSxoaWdoZXN0OmsoeSksd2lkdGhzOm4saGVpZ2h0czpyfX1nZXRMYWJlbEZvclZhbHVlKHQpe3JldHVybiB0fWdldFBpeGVsRm9yVmFsdWUodCxlKXtyZXR1cm4gTmFOfWdldFZhbHVlRm9yUGl4ZWwodCl7fWdldFBpeGVsRm9yVGljayh0KXt2YXIgZT10aGlzLnRpY2tzO3JldHVybiB0PDB8fHQ+ZS5sZW5ndGgtMT9udWxsOnRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZShlW3RdLnZhbHVlKX1nZXRQaXhlbEZvckRlY2ltYWwodCl7dGhpcy5fcmV2ZXJzZVBpeGVscyYmKHQ9MS10KTt0PXRoaXMuX3N0YXJ0UGl4ZWwrdCp0aGlzLl9sZW5ndGg7cmV0dXJuIF9pbnQxNlJhbmdlKHRoaXMuX2FsaWduVG9QaXhlbHM/X2FsaWduUGl4ZWwodGhpcy5jaGFydCx0LDApOnQpfWdldERlY2ltYWxGb3JQaXhlbCh0KXt0PSh0LXRoaXMuX3N0YXJ0UGl4ZWwpL3RoaXMuX2xlbmd0aDtyZXR1cm4gdGhpcy5fcmV2ZXJzZVBpeGVscz8xLXQ6dH1nZXRCYXNlUGl4ZWwoKXtyZXR1cm4gdGhpcy5nZXRQaXhlbEZvclZhbHVlKHRoaXMuZ2V0QmFzZVZhbHVlKCkpfWdldEJhc2VWYWx1ZSgpe3ZhcnttaW46dCxtYXg6ZX09dGhpcztyZXR1cm4gdDwwJiZlPDA/ZTowPHQmJjA8ZT90OjB9Z2V0Q29udGV4dCh0KXt2YXIgZT10aGlzLnRpY2tzfHxbXTtpZigwPD10JiZ0PGUubGVuZ3RoKXtjb25zdCBpPWVbdF07cmV0dXJuIGkuJGNvbnRleHR8fChpLiRjb250ZXh0PWNyZWF0ZVRpY2tDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLHQsaSkpfXJldHVybiB0aGlzLiRjb250ZXh0fHwodGhpcy4kY29udGV4dD1jcmVhdGVTY2FsZUNvbnRleHQodGhpcy5jaGFydC5nZXRDb250ZXh0KCksdGhpcykpfV90aWNrU2l6ZSgpe3ZhciB0PXRoaXMub3B0aW9ucy50aWNrcyxlPXRvUmFkaWFucyh0aGlzLmxhYmVsUm90YXRpb24pLGk9TWF0aC5hYnMoTWF0aC5jb3MoZSkpLGU9TWF0aC5hYnMoTWF0aC5zaW4oZSkpLGE9dGhpcy5fZ2V0TGFiZWxTaXplcygpLHQ9dC5hdXRvU2tpcFBhZGRpbmd8fDAscz1hP2Eud2lkZXN0LndpZHRoK3Q6MCxhPWE/YS5oaWdoZXN0LmhlaWdodCt0OjA7cmV0dXJuIHRoaXMuaXNIb3Jpem9udGFsKCk/cyplPGEqaT9zL2k6YS9lOmEqZTxzKmk/YS9pOnMvZX1faXNWaXNpYmxlKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmRpc3BsYXk7cmV0dXJuImF1dG8iIT09dD8hIXQ6MDx0aGlzLmdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKCkubGVuZ3RofV9jb21wdXRlR3JpZExpbmVJdGVtcyh0KXt2YXIgZT10aGlzLmF4aXM7Y29uc3QgaT10aGlzLmNoYXJ0O3ZhciBhPXRoaXMub3B0aW9ucztjb25zdHtncmlkOnMscG9zaXRpb246bixib3JkZXI6cn09YTt2YXIgbz1zLm9mZnNldCxsPXRoaXMuaXNIb3Jpem9udGFsKCksaD10aGlzLnRpY2tzLmxlbmd0aCsobz8xOjApLGQ9Z2V0VGlja01hcmtMZW5ndGgocyk7Y29uc3QgYz1bXTt2YXIgdT1yLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KCkpO2NvbnN0IGc9dS5kaXNwbGF5P3Uud2lkdGg6MDtmdW5jdGlvbiBwKHQpe3JldHVybiBfYWxpZ25QaXhlbChpLHQsZyl9dmFyIGYsbSx1PWcvMjtsZXQgdix4LGIsXyx5LGssUyxELE0sUCxBLHc7InRvcCI9PT1uPyh2PXAodGhpcy5ib3R0b20pLGs9dGhpcy5ib3R0b20tZCxEPXYtdSxQPXAodC50b3ApK3Usdz10LmJvdHRvbSk6ImJvdHRvbSI9PT1uPyh2PXAodGhpcy50b3ApLFA9dC50b3Asdz1wKHQuYm90dG9tKS11LGs9dit1LEQ9dGhpcy50b3ArZCk6ImxlZnQiPT09bj8odj1wKHRoaXMucmlnaHQpLHk9dGhpcy5yaWdodC1kLFM9di11LE09cCh0LmxlZnQpK3UsQT10LnJpZ2h0KToicmlnaHQiPT09bj8odj1wKHRoaXMubGVmdCksTT10LmxlZnQsQT1wKHQucmlnaHQpLXUseT12K3UsUz10aGlzLmxlZnQrZCk6IngiPT09ZT8oImNlbnRlciI9PT1uP3Y9cCgodC50b3ArdC5ib3R0b20pLzIrLjUpOmlzT2JqZWN0KG4pJiYobT1uW2Y9T2JqZWN0LmtleXMobilbMF1dLHY9cCh0aGlzLmNoYXJ0LnNjYWxlc1tmXS5nZXRQaXhlbEZvclZhbHVlKG0pKSksUD10LnRvcCx3PXQuYm90dG9tLGs9dit1LEQ9aytkKToieSI9PT1lJiYoImNlbnRlciI9PT1uP3Y9cCgodC5sZWZ0K3QucmlnaHQpLzIpOmlzT2JqZWN0KG4pJiYobT1uW2Y9T2JqZWN0LmtleXMobilbMF1dLHY9cCh0aGlzLmNoYXJ0LnNjYWxlc1tmXS5nZXRQaXhlbEZvclZhbHVlKG0pKSkseT12LXUsUz15LWQsTT10LmxlZnQsQT10LnJpZ2h0KTt2YXIgZT12YWx1ZU9yRGVmYXVsdChhLnRpY2tzLm1heFRpY2tzTGltaXQsaCksQz1NYXRoLm1heCgxLE1hdGguY2VpbChoL2UpKTtmb3IoeD0wO3g8aDt4Kz1DKXt2YXIgTz10aGlzLmdldENvbnRleHQoeCksTD1zLnNldENvbnRleHQoTyksTz1yLnNldENvbnRleHQoTyksVD1MLmxpbmVXaWR0aCxFPUwuY29sb3IsST1PLmRhc2h8fFtdLE89Ty5kYXNoT2Zmc2V0LFI9TC50aWNrV2lkdGgsRj1MLnRpY2tDb2xvcixCPUwudGlja0JvcmRlckRhc2h8fFtdLEw9TC50aWNrQm9yZGVyRGFzaE9mZnNldDt2b2lkIDAhPT0oYj1nZXRQaXhlbEZvckdyaWRMaW5lKHRoaXMseCxvKSkmJihfPV9hbGlnblBpeGVsKGksYixUKSxsP3k9Uz1NPUE9XzprPUQ9UD13PV8sYy5wdXNoKHt0eDE6eSx0eTE6ayx0eDI6Uyx0eTI6RCx4MTpNLHkxOlAseDI6QSx5Mjp3LHdpZHRoOlQsY29sb3I6RSxib3JkZXJEYXNoOkksYm9yZGVyRGFzaE9mZnNldDpPLHRpY2tXaWR0aDpSLHRpY2tDb2xvcjpGLHRpY2tCb3JkZXJEYXNoOkIsdGlja0JvcmRlckRhc2hPZmZzZXQ6TH0pKX1yZXR1cm4gdGhpcy5fdGlja3NMZW5ndGg9aCx0aGlzLl9ib3JkZXJWYWx1ZT12LGN9X2NvbXB1dGVMYWJlbEl0ZW1zKHQpe3ZhciBlPXRoaXMuYXhpcyxpPXRoaXMub3B0aW9ucztjb25zdHtwb3NpdGlvbjphLHRpY2tzOnN9PWk7dmFyIG4scj10aGlzLmlzSG9yaXpvbnRhbCgpLG89dGhpcy50aWNrcyx7YWxpZ246bCxjcm9zc0FsaWduOmgscGFkZGluZzpkLG1pcnJvcjpjfT1zLGk9Z2V0VGlja01hcmtMZW5ndGgoaS5ncmlkKSx1PWkrZCxkPWM/LWQ6dSxnPS10b1JhZGlhbnModGhpcy5sYWJlbFJvdGF0aW9uKTtjb25zdCBwPVtdO2xldCBmLG0sdix4LGIsXyx5LGssUyxELE0sUD0ibWlkZGxlIjsidG9wIj09PWE/KGI9dGhpcy5ib3R0b20tZCxfPXRoaXMuX2dldFhBeGlzTGFiZWxBbGlnbm1lbnQoKSk6ImJvdHRvbSI9PT1hPyhiPXRoaXMudG9wK2QsXz10aGlzLl9nZXRYQXhpc0xhYmVsQWxpZ25tZW50KCkpOiJsZWZ0Ij09PWE/KGQ9dGhpcy5fZ2V0WUF4aXNMYWJlbEFsaWdubWVudChpKSxfPWQudGV4dEFsaWduLHg9ZC54KToicmlnaHQiPT09YT8oZD10aGlzLl9nZXRZQXhpc0xhYmVsQWxpZ25tZW50KGkpLF89ZC50ZXh0QWxpZ24seD1kLngpOiJ4Ij09PWU/KCJjZW50ZXIiPT09YT9iPSh0LnRvcCt0LmJvdHRvbSkvMit1OmlzT2JqZWN0KGEpJiYobj1hW2Q9T2JqZWN0LmtleXMoYSlbMF1dLGI9dGhpcy5jaGFydC5zY2FsZXNbZF0uZ2V0UGl4ZWxGb3JWYWx1ZShuKSt1KSxfPXRoaXMuX2dldFhBeGlzTGFiZWxBbGlnbm1lbnQoKSk6InkiPT09ZSYmKCJjZW50ZXIiPT09YT94PSh0LmxlZnQrdC5yaWdodCkvMi11OmlzT2JqZWN0KGEpJiYobj1hW2Q9T2JqZWN0LmtleXMoYSlbMF1dLHg9dGhpcy5jaGFydC5zY2FsZXNbZF0uZ2V0UGl4ZWxGb3JWYWx1ZShuKSksXz10aGlzLl9nZXRZQXhpc0xhYmVsQWxpZ25tZW50KGkpLnRleHRBbGlnbiksInkiPT09ZSYmKCJzdGFydCI9PT1sP1A9InRvcCI6ImVuZCI9PT1sJiYoUD0iYm90dG9tIikpO3ZhciBBPXRoaXMuX2dldExhYmVsU2l6ZXMoKTtmb3IoZj0wLG09by5sZW5ndGg7ZjxtOysrZil7dj1vW2ZdLmxhYmVsO3ZhciB3PXMuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoZikpLEM9KHk9dGhpcy5nZXRQaXhlbEZvclRpY2soZikrcy5sYWJlbE9mZnNldCxTPShrPXRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoZikpLmxpbmVIZWlnaHQsKEQ9aXNBcnJheSh2KT92Lmxlbmd0aDoxKS8yKSxPPXcuY29sb3IsTD13LnRleHRTdHJva2VDb2xvcixUPXcudGV4dFN0cm9rZVdpZHRoO2xldCB0PV87cj8oeD15LCJpbm5lciI9PT1fJiYodD1mPT09bS0xP3RoaXMub3B0aW9ucy5yZXZlcnNlPyJsZWZ0IjoicmlnaHQiOjA9PT1mP3RoaXMub3B0aW9ucy5yZXZlcnNlPyJyaWdodCI6ImxlZnQiOiJjZW50ZXIiKSxNPSJ0b3AiPT09YT8ibmVhciI9PT1ofHwwIT1nPy1EKlMrUy8yOiJjZW50ZXIiPT09aD8tQS5oaWdoZXN0LmhlaWdodC8yLUMqUytTOi1BLmhpZ2hlc3QuaGVpZ2h0K1MvMjoibmVhciI9PT1ofHwwIT1nP1MvMjoiY2VudGVyIj09PWg/QS5oaWdoZXN0LmhlaWdodC8yLUMqUzpBLmhpZ2hlc3QuaGVpZ2h0LUQqUyxjJiYoTSo9LTEpLDA9PWd8fHcuc2hvd0xhYmVsQmFja2Ryb3B8fCh4Kz1TLzIqTWF0aC5zaW4oZykpKTooYj15LE09KDEtRCkqUy8yKTtsZXQgaTtpZih3LnNob3dMYWJlbEJhY2tkcm9wKXt2YXIgQz10b1BhZGRpbmcody5iYWNrZHJvcFBhZGRpbmcpLEU9QS5oZWlnaHRzW2ZdLEk9QS53aWR0aHNbZl07bGV0IHQ9TS1DLnRvcCxlPTAtQy5sZWZ0O3N3aXRjaChQKXtjYXNlIm1pZGRsZSI6dC09RS8yO2JyZWFrO2Nhc2UiYm90dG9tIjp0LT1FfXN3aXRjaChfKXtjYXNlImNlbnRlciI6ZS09SS8yO2JyZWFrO2Nhc2UicmlnaHQiOmUtPUk7YnJlYWs7Y2FzZSJpbm5lciI6Zj09PW0tMT9lLT1JOjA8ZiYmKGUtPUkvMil9aT17bGVmdDplLHRvcDp0LHdpZHRoOkkrQy53aWR0aCxoZWlnaHQ6RStDLmhlaWdodCxjb2xvcjp3LmJhY2tkcm9wQ29sb3J9fXAucHVzaCh7bGFiZWw6dixmb250OmssdGV4dE9mZnNldDpNLG9wdGlvbnM6e3JvdGF0aW9uOmcsY29sb3I6TyxzdHJva2VDb2xvcjpMLHN0cm9rZVdpZHRoOlQsdGV4dEFsaWduOnQsdGV4dEJhc2VsaW5lOlAsdHJhbnNsYXRpb246W3gsYl0sYmFja2Ryb3A6aX19KX1yZXR1cm4gcH1fZ2V0WEF4aXNMYWJlbEFsaWdubWVudCgpe3Zhcntwb3NpdGlvbjp0LHRpY2tzOmV9PXRoaXMub3B0aW9ucztpZigtdG9SYWRpYW5zKHRoaXMubGFiZWxSb3RhdGlvbikpcmV0dXJuInRvcCI9PT10PyJsZWZ0IjoicmlnaHQiO2xldCBpPSJjZW50ZXIiO3JldHVybiJzdGFydCI9PT1lLmFsaWduP2k9ImxlZnQiOiJlbmQiPT09ZS5hbGlnbj9pPSJyaWdodCI6ImlubmVyIj09PWUuYWxpZ24mJihpPSJpbm5lciIpLGl9X2dldFlBeGlzTGFiZWxBbGlnbm1lbnQodCl7dmFye3Bvc2l0aW9uOmUsdGlja3M6e2Nyb3NzQWxpZ246aSxtaXJyb3I6YSxwYWRkaW5nOnN9fT10aGlzLm9wdGlvbnMsdD10K3Msbj10aGlzLl9nZXRMYWJlbFNpemVzKCkud2lkZXN0LndpZHRoO2xldCByLG87cmV0dXJuImxlZnQiPT09ZT9hPyhvPXRoaXMucmlnaHQrcywibmVhciI9PT1pP3I9ImxlZnQiOiJjZW50ZXIiPT09aT8ocj0iY2VudGVyIixvKz1uLzIpOihyPSJyaWdodCIsbys9bikpOihvPXRoaXMucmlnaHQtdCwibmVhciI9PT1pP3I9InJpZ2h0IjoiY2VudGVyIj09PWk/KHI9ImNlbnRlciIsby09bi8yKToocj0ibGVmdCIsbz10aGlzLmxlZnQpKToicmlnaHQiPT09ZT9hPyhvPXRoaXMubGVmdCtzLCJuZWFyIj09PWk/cj0icmlnaHQiOiJjZW50ZXIiPT09aT8ocj0iY2VudGVyIixvLT1uLzIpOihyPSJsZWZ0IixvLT1uKSk6KG89dGhpcy5sZWZ0K3QsIm5lYXIiPT09aT9yPSJsZWZ0IjoiY2VudGVyIj09PWk/KHI9ImNlbnRlciIsbys9bi8yKToocj0icmlnaHQiLG89dGhpcy5yaWdodCkpOnI9InJpZ2h0Iix7dGV4dEFsaWduOnIseDpvfX1fY29tcHV0ZUxhYmVsQXJlYSgpe3ZhciB0LGU7aWYoIXRoaXMub3B0aW9ucy50aWNrcy5taXJyb3IpcmV0dXJuIHQ9dGhpcy5jaGFydCxlPXRoaXMub3B0aW9ucy5wb3NpdGlvbiwibGVmdCI9PT1lfHwicmlnaHQiPT09ZT97dG9wOjAsbGVmdDp0aGlzLmxlZnQsYm90dG9tOnQuaGVpZ2h0LHJpZ2h0OnRoaXMucmlnaHR9OiJ0b3AiPT09ZXx8ImJvdHRvbSI9PT1lP3t0b3A6dGhpcy50b3AsbGVmdDowLGJvdHRvbTp0aGlzLmJvdHRvbSxyaWdodDp0LndpZHRofTp2b2lkIDB9ZHJhd0JhY2tncm91bmQoKXtjb25zdHtjdHg6dCxvcHRpb25zOntiYWNrZ3JvdW5kQ29sb3I6ZX0sbGVmdDppLHRvcDphLHdpZHRoOnMsaGVpZ2h0Om59PXRoaXM7ZSYmKHQuc2F2ZSgpLHQuZmlsbFN0eWxlPWUsdC5maWxsUmVjdChpLGEscyxuKSx0LnJlc3RvcmUoKSl9Z2V0TGluZVdpZHRoRm9yVmFsdWUoZSl7Y29uc3QgdD10aGlzLm9wdGlvbnMuZ3JpZDtpZighdGhpcy5faXNWaXNpYmxlKCl8fCF0LmRpc3BsYXkpcmV0dXJuIDA7Y29uc3QgaT10aGlzLnRpY2tzO3ZhciBhPWkuZmluZEluZGV4KHQ9PnQudmFsdWU9PT1lKTtyZXR1cm4gMDw9YT90LnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KGEpKS5saW5lV2lkdGg6MH1kcmF3R3JpZCh0KXt2YXIgZT10aGlzLm9wdGlvbnMuZ3JpZDtjb25zdCBhPXRoaXMuY3R4O3ZhciBpPXRoaXMuX2dyaWRMaW5lSXRlbXN8fCh0aGlzLl9ncmlkTGluZUl0ZW1zPXRoaXMuX2NvbXB1dGVHcmlkTGluZUl0ZW1zKHQpKTtsZXQgcyxuO3ZhciByPSh0LGUsaSk9PntpLndpZHRoJiZpLmNvbG9yJiYoYS5zYXZlKCksYS5saW5lV2lkdGg9aS53aWR0aCxhLnN0cm9rZVN0eWxlPWkuY29sb3IsYS5zZXRMaW5lRGFzaChpLmJvcmRlckRhc2h8fFtdKSxhLmxpbmVEYXNoT2Zmc2V0PWkuYm9yZGVyRGFzaE9mZnNldCxhLmJlZ2luUGF0aCgpLGEubW92ZVRvKHQueCx0LnkpLGEubGluZVRvKGUueCxlLnkpLGEuc3Ryb2tlKCksYS5yZXN0b3JlKCkpfTtpZihlLmRpc3BsYXkpZm9yKHM9MCxuPWkubGVuZ3RoO3M8bjsrK3Mpe3ZhciBvPWlbc107ZS5kcmF3T25DaGFydEFyZWEmJnIoe3g6by54MSx5Om8ueTF9LHt4Om8ueDIseTpvLnkyfSxvKSxlLmRyYXdUaWNrcyYmcih7eDpvLnR4MSx5Om8udHkxfSx7eDpvLnR4Mix5Om8udHkyfSx7Y29sb3I6by50aWNrQ29sb3Isd2lkdGg6by50aWNrV2lkdGgsYm9yZGVyRGFzaDpvLnRpY2tCb3JkZXJEYXNoLGJvcmRlckRhc2hPZmZzZXQ6by50aWNrQm9yZGVyRGFzaE9mZnNldH0pfX1kcmF3Qm9yZGVyKCl7Y29uc3R7Y2hhcnQ6cyxjdHg6bixvcHRpb25zOntib3JkZXI6dCxncmlkOnJ9fT10aGlzO3ZhciBvPXQuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSksbD10LmRpc3BsYXk/by53aWR0aDowO2lmKGwpe3ZhciBoPXIuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoMCkpLmxpbmVXaWR0aCxkPXRoaXMuX2JvcmRlclZhbHVlO2xldCB0LGUsaSxhO3RoaXMuaXNIb3Jpem9udGFsKCk/KHQ9X2FsaWduUGl4ZWwocyx0aGlzLmxlZnQsbCktbC8yLGU9X2FsaWduUGl4ZWwocyx0aGlzLnJpZ2h0LGgpK2gvMixpPWE9ZCk6KGk9X2FsaWduUGl4ZWwocyx0aGlzLnRvcCxsKS1sLzIsYT1fYWxpZ25QaXhlbChzLHRoaXMuYm90dG9tLGgpK2gvMix0PWU9ZCksbi5zYXZlKCksbi5saW5lV2lkdGg9by53aWR0aCxuLnN0cm9rZVN0eWxlPW8uY29sb3Isbi5iZWdpblBhdGgoKSxuLm1vdmVUbyh0LGkpLG4ubGluZVRvKGUsYSksbi5zdHJva2UoKSxuLnJlc3RvcmUoKX19ZHJhd0xhYmVscyh0KXtpZih0aGlzLm9wdGlvbnMudGlja3MuZGlzcGxheSl7dmFyIGU9dGhpcy5jdHgsaT10aGlzLl9jb21wdXRlTGFiZWxBcmVhKCksdD0oaSYmY2xpcEFyZWEoZSxpKSx0aGlzLmdldExhYmVsSXRlbXModCkpO2Zvcihjb25zdCBvIG9mIHQpe3ZhciBhPW8ub3B0aW9ucyxzPW8uZm9udCxuPW8ubGFiZWwscj1vLnRleHRPZmZzZXQ7cmVuZGVyVGV4dChlLG4sMCxyLHMsYSl9aSYmdW5jbGlwQXJlYShlKX19ZHJhd1RpdGxlKCl7dmFye2N0eDplLG9wdGlvbnM6e3Bvc2l0aW9uOmksdGl0bGU6YSxyZXZlcnNlOnN9fT10aGlzO2lmKGEuZGlzcGxheSl7dmFyIG49dG9Gb250KGEuZm9udCkscj10b1BhZGRpbmcoYS5wYWRkaW5nKSxvPWEuYWxpZ247bGV0IHQ9bi5saW5lSGVpZ2h0LzI7ImJvdHRvbSI9PT1pfHwiY2VudGVyIj09PWl8fGlzT2JqZWN0KGkpPyh0Kz1yLmJvdHRvbSxpc0FycmF5KGEudGV4dCkmJih0Kz1uLmxpbmVIZWlnaHQqKGEudGV4dC5sZW5ndGgtMSkpKTp0Kz1yLnRvcDt2YXJ7dGl0bGVYOnIsdGl0bGVZOmwsbWF4V2lkdGg6aCxyb3RhdGlvbjpkfT10aXRsZUFyZ3ModGhpcyx0LGksbyk7cmVuZGVyVGV4dChlLGEudGV4dCwwLDAsbix7Y29sb3I6YS5jb2xvcixtYXhXaWR0aDpoLHJvdGF0aW9uOmQsdGV4dEFsaWduOnRpdGxlQWxpZ24obyxpLHMpLHRleHRCYXNlbGluZToibWlkZGxlIix0cmFuc2xhdGlvbjpbcixsXX0pfX1kcmF3KHQpe3RoaXMuX2lzVmlzaWJsZSgpJiYodGhpcy5kcmF3QmFja2dyb3VuZCgpLHRoaXMuZHJhd0dyaWQodCksdGhpcy5kcmF3Qm9yZGVyKCksdGhpcy5kcmF3VGl0bGUoKSx0aGlzLmRyYXdMYWJlbHModCkpfV9sYXllcnMoKXt2YXIgdD10aGlzLm9wdGlvbnMsZT10LnRpY2tzJiZ0LnRpY2tzLnp8fDAsaT12YWx1ZU9yRGVmYXVsdCh0LmdyaWQmJnQuZ3JpZC56LC0xKSx0PXZhbHVlT3JEZWZhdWx0KHQuYm9yZGVyJiZ0LmJvcmRlci56LDApO3JldHVybiB0aGlzLl9pc1Zpc2libGUoKSYmdGhpcy5kcmF3PT09U2NhbGUucHJvdG90eXBlLmRyYXc/W3t6OmksZHJhdzp0PT57dGhpcy5kcmF3QmFja2dyb3VuZCgpLHRoaXMuZHJhd0dyaWQodCksdGhpcy5kcmF3VGl0bGUoKX19LHt6OnQsZHJhdzooKT0+e3RoaXMuZHJhd0JvcmRlcigpfX0se3o6ZSxkcmF3OnQ9Pnt0aGlzLmRyYXdMYWJlbHModCl9fV06W3t6OmUsZHJhdzp0PT57dGhpcy5kcmF3KHQpfX1dfWdldE1hdGNoaW5nVmlzaWJsZU1ldGFzKHQpe3ZhciBlPXRoaXMuY2hhcnQuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpLGk9dGhpcy5heGlzKyJBeGlzSUQiO2NvbnN0IGE9W107bGV0IHMsbjtmb3Iocz0wLG49ZS5sZW5ndGg7czxuOysrcyl7dmFyIHI9ZVtzXTtyW2ldIT09dGhpcy5pZHx8dCYmci50eXBlIT09dHx8YS5wdXNoKHIpfXJldHVybiBhfV9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKHQpe3Q9dGhpcy5vcHRpb25zLnRpY2tzLnNldENvbnRleHQodGhpcy5nZXRDb250ZXh0KHQpKTtyZXR1cm4gdG9Gb250KHQuZm9udCl9X21heERpZ2l0cygpe3ZhciB0PXRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoMCkubGluZUhlaWdodDtyZXR1cm4odGhpcy5pc0hvcml6b250YWwoKT90aGlzLndpZHRoOnRoaXMuaGVpZ2h0KS90fX1jbGFzcyBUeXBlZFJlZ2lzdHJ5e2NvbnN0cnVjdG9yKHQsZSxpKXt0aGlzLnR5cGU9dCx0aGlzLnNjb3BlPWUsdGhpcy5vdmVycmlkZT1pLHRoaXMuaXRlbXM9T2JqZWN0LmNyZWF0ZShudWxsKX1pc0ZvclR5cGUodCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKHRoaXMudHlwZS5wcm90b3R5cGUsdC5wcm90b3R5cGUpfXJlZ2lzdGVyKHQpe3ZhciBlPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtsZXQgaTtpc0lDaGFydENvbXBvbmVudChlKSYmKGk9dGhpcy5yZWdpc3RlcihlKSk7Y29uc3QgYT10aGlzLml0ZW1zO3ZhciBlPXQuaWQscz10aGlzLnNjb3BlKyIuIitlO2lmKGUpcmV0dXJuIGUgaW4gYXx8KHJlZ2lzdGVyRGVmYXVsdHMoYVtlXT10LHMsaSksdGhpcy5vdmVycmlkZSYmZGVmYXVsdHMub3ZlcnJpZGUodC5pZCx0Lm92ZXJyaWRlcykpLHM7dGhyb3cgbmV3IEVycm9yKCJjbGFzcyBkb2VzIG5vdCBoYXZlIGlkOiAiK3QpfWdldCh0KXtyZXR1cm4gdGhpcy5pdGVtc1t0XX11bnJlZ2lzdGVyKHQpe2NvbnN0IGU9dGhpcy5pdGVtczt2YXIgdD10LmlkLGk9dGhpcy5zY29wZTt0IGluIGUmJmRlbGV0ZSBlW3RdLGkmJnQgaW4gZGVmYXVsdHNbaV0mJihkZWxldGUgZGVmYXVsdHNbaV1bdF0sdGhpcy5vdmVycmlkZSYmZGVsZXRlIG92ZXJyaWRlc1t0XSl9fWZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdHModCxlLGkpe2k9bWVyZ2UoT2JqZWN0LmNyZWF0ZShudWxsKSxbaT9kZWZhdWx0cy5nZXQoaSk6e30sZGVmYXVsdHMuZ2V0KGUpLHQuZGVmYXVsdHNdKTtkZWZhdWx0cy5zZXQoZSxpKSx0LmRlZmF1bHRSb3V0ZXMmJnJvdXRlRGVmYXVsdHMoZSx0LmRlZmF1bHRSb3V0ZXMpLHQuZGVzY3JpcHRvcnMmJmRlZmF1bHRzLmRlc2NyaWJlKGUsdC5kZXNjcmlwdG9ycyl9ZnVuY3Rpb24gcm91dGVEZWZhdWx0cyhyLG8pe09iamVjdC5rZXlzKG8pLmZvckVhY2godD0+e2NvbnN0IGU9dC5zcGxpdCgiLiIpO3ZhciBpPWUucG9wKCksYT1bcl0uY29uY2F0KGUpLmpvaW4oIi4iKTtjb25zdCBzPW9bdF0uc3BsaXQoIi4iKTt2YXIgdD1zLnBvcCgpLG49cy5qb2luKCIuIik7ZGVmYXVsdHMucm91dGUoYSxpLG4sdCl9KX1mdW5jdGlvbiBpc0lDaGFydENvbXBvbmVudCh0KXtyZXR1cm4iaWQiaW4gdCYmImRlZmF1bHRzImluIHR9Y2xhc3MgUmVnaXN0cnl7Y29uc3RydWN0b3IoKXt0aGlzLmNvbnRyb2xsZXJzPW5ldyBUeXBlZFJlZ2lzdHJ5KERhdGFzZXRDb250cm9sbGVyLCJkYXRhc2V0cyIsITApLHRoaXMuZWxlbWVudHM9bmV3IFR5cGVkUmVnaXN0cnkoRWxlbWVudCwiZWxlbWVudHMiKSx0aGlzLnBsdWdpbnM9bmV3IFR5cGVkUmVnaXN0cnkoT2JqZWN0LCJwbHVnaW5zIiksdGhpcy5zY2FsZXM9bmV3IFR5cGVkUmVnaXN0cnkoU2NhbGUsInNjYWxlcyIpLHRoaXMuX3R5cGVkUmVnaXN0cmllcz1bdGhpcy5jb250cm9sbGVycyx0aGlzLnNjYWxlcyx0aGlzLmVsZW1lbnRzXX1hZGQoLi4udCl7dGhpcy5fZWFjaCgicmVnaXN0ZXIiLHQpfXJlbW92ZSguLi50KXt0aGlzLl9lYWNoKCJ1bnJlZ2lzdGVyIix0KX1hZGRDb250cm9sbGVycyguLi50KXt0aGlzLl9lYWNoKCJyZWdpc3RlciIsdCx0aGlzLmNvbnRyb2xsZXJzKX1hZGRFbGVtZW50cyguLi50KXt0aGlzLl9lYWNoKCJyZWdpc3RlciIsdCx0aGlzLmVsZW1lbnRzKX1hZGRQbHVnaW5zKC4uLnQpe3RoaXMuX2VhY2goInJlZ2lzdGVyIix0LHRoaXMucGx1Z2lucyl9YWRkU2NhbGVzKC4uLnQpe3RoaXMuX2VhY2goInJlZ2lzdGVyIix0LHRoaXMuc2NhbGVzKX1nZXRDb250cm9sbGVyKHQpe3JldHVybiB0aGlzLl9nZXQodCx0aGlzLmNvbnRyb2xsZXJzLCJjb250cm9sbGVyIil9Z2V0RWxlbWVudCh0KXtyZXR1cm4gdGhpcy5fZ2V0KHQsdGhpcy5lbGVtZW50cywiZWxlbWVudCIpfWdldFBsdWdpbih0KXtyZXR1cm4gdGhpcy5fZ2V0KHQsdGhpcy5wbHVnaW5zLCJwbHVnaW4iKX1nZXRTY2FsZSh0KXtyZXR1cm4gdGhpcy5fZ2V0KHQsdGhpcy5zY2FsZXMsInNjYWxlIil9cmVtb3ZlQ29udHJvbGxlcnMoLi4udCl7dGhpcy5fZWFjaCgidW5yZWdpc3RlciIsdCx0aGlzLmNvbnRyb2xsZXJzKX1yZW1vdmVFbGVtZW50cyguLi50KXt0aGlzLl9lYWNoKCJ1bnJlZ2lzdGVyIix0LHRoaXMuZWxlbWVudHMpfXJlbW92ZVBsdWdpbnMoLi4udCl7dGhpcy5fZWFjaCgidW5yZWdpc3RlciIsdCx0aGlzLnBsdWdpbnMpfXJlbW92ZVNjYWxlcyguLi50KXt0aGlzLl9lYWNoKCJ1bnJlZ2lzdGVyIix0LHRoaXMuc2NhbGVzKX1fZWFjaChpLHQsYSl7Wy4uLnRdLmZvckVhY2godD0+e2NvbnN0IGU9YXx8dGhpcy5fZ2V0UmVnaXN0cnlGb3JUeXBlKHQpO2F8fGUuaXNGb3JUeXBlKHQpfHxlPT09dGhpcy5wbHVnaW5zJiZ0LmlkP3RoaXMuX2V4ZWMoaSxlLHQpOmVhY2godCx0PT57dmFyIGU9YXx8dGhpcy5fZ2V0UmVnaXN0cnlGb3JUeXBlKHQpO3RoaXMuX2V4ZWMoaSxlLHQpfSl9KX1fZXhlYyh0LGUsaSl7dmFyIGE9X2NhcGl0YWxpemUodCk7Y2FsbGJhY2soaVsiYmVmb3JlIithXSxbXSxpKSxlW3RdKGkpLGNhbGxiYWNrKGlbImFmdGVyIithXSxbXSxpKX1fZ2V0UmVnaXN0cnlGb3JUeXBlKGUpe2ZvcihsZXQgdD0wO3Q8dGhpcy5fdHlwZWRSZWdpc3RyaWVzLmxlbmd0aDt0Kyspe2NvbnN0IGk9dGhpcy5fdHlwZWRSZWdpc3RyaWVzW3RdO2lmKGkuaXNGb3JUeXBlKGUpKXJldHVybiBpfXJldHVybiB0aGlzLnBsdWdpbnN9X2dldCh0LGUsaSl7ZT1lLmdldCh0KTtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcignIicrdCsnIiBpcyBub3QgYSByZWdpc3RlcmVkICcraSsiLiIpO3JldHVybiBlfX12YXIgcmVnaXN0cnk9bmV3IFJlZ2lzdHJ5O2NsYXNzIFBsdWdpblNlcnZpY2V7Y29uc3RydWN0b3IoKXt0aGlzLl9pbml0PVtdfW5vdGlmeSh0LGUsaSxhKXsiYmVmb3JlSW5pdCI9PT1lJiYodGhpcy5faW5pdD10aGlzLl9jcmVhdGVEZXNjcmlwdG9ycyh0LCEwKSx0aGlzLl9ub3RpZnkodGhpcy5faW5pdCx0LCJpbnN0YWxsIikpO2E9YT90aGlzLl9kZXNjcmlwdG9ycyh0KS5maWx0ZXIoYSk6dGhpcy5fZGVzY3JpcHRvcnModCksaT10aGlzLl9ub3RpZnkoYSx0LGUsaSk7cmV0dXJuImFmdGVyRGVzdHJveSI9PT1lJiYodGhpcy5fbm90aWZ5KGEsdCwic3RvcCIpLHRoaXMuX25vdGlmeSh0aGlzLl9pbml0LHQsInVuaW5zdGFsbCIpKSxpfV9ub3RpZnkodCxlLGksYSl7YT1hfHx7fTtmb3IoY29uc3QgbyBvZiB0KXt2YXIgcz1vLnBsdWdpbixuPXNbaV0scj1bZSxhLG8ub3B0aW9uc107aWYoITE9PT1jYWxsYmFjayhuLHIscykmJmEuY2FuY2VsYWJsZSlyZXR1cm4hMX1yZXR1cm4hMH1pbnZhbGlkYXRlKCl7aXNOdWxsT3JVbmRlZih0aGlzLl9jYWNoZSl8fCh0aGlzLl9vbGRDYWNoZT10aGlzLl9jYWNoZSx0aGlzLl9jYWNoZT12b2lkIDApfV9kZXNjcmlwdG9ycyh0KXtpZih0aGlzLl9jYWNoZSlyZXR1cm4gdGhpcy5fY2FjaGU7dmFyIGU9dGhpcy5fY2FjaGU9dGhpcy5fY3JlYXRlRGVzY3JpcHRvcnModCk7cmV0dXJuIHRoaXMuX25vdGlmeVN0YXRlQ2hhbmdlcyh0KSxlfV9jcmVhdGVEZXNjcmlwdG9ycyh0LGUpe3ZhciBpPXQmJnQuY29uZmlnLGE9dmFsdWVPckRlZmF1bHQoaS5vcHRpb25zJiZpLm9wdGlvbnMucGx1Z2lucyx7fSksaT1hbGxQbHVnaW5zKGkpO3JldHVybiExIT09YXx8ZT9jcmVhdGVEZXNjcmlwdG9ycyh0LGksYSxlKTpbXX1fbm90aWZ5U3RhdGVDaGFuZ2VzKHQpe3ZhciBlPXRoaXMuX29sZENhY2hlfHxbXSxpPXRoaXMuX2NhY2hlLGE9KHQsaSk9PnQuZmlsdGVyKGU9PiFpLnNvbWUodD0+ZS5wbHVnaW4uaWQ9PT10LnBsdWdpbi5pZCkpO3RoaXMuX25vdGlmeShhKGUsaSksdCwic3RvcCIpLHRoaXMuX25vdGlmeShhKGksZSksdCwic3RhcnQiKX19ZnVuY3Rpb24gYWxsUGx1Z2lucyh0KXtjb25zdCBlPXt9LGk9W107dmFyIGE9T2JqZWN0LmtleXMocmVnaXN0cnkucGx1Z2lucy5pdGVtcyk7Zm9yKGxldCB0PTA7dDxhLmxlbmd0aDt0KyspaS5wdXNoKHJlZ2lzdHJ5LmdldFBsdWdpbihhW3RdKSk7dmFyIHM9dC5wbHVnaW5zfHxbXTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKyl7dmFyIG49c1t0XTstMT09PWkuaW5kZXhPZihuKSYmKGkucHVzaChuKSxlW24uaWRdPSEwKX1yZXR1cm57cGx1Z2luczppLGxvY2FsSWRzOmV9fWZ1bmN0aW9uIGdldE9wdHModCxlKXtyZXR1cm4gZXx8ITEhPT10PyEwPT09dD97fTp0Om51bGx9ZnVuY3Rpb24gY3JlYXRlRGVzY3JpcHRvcnModCx7cGx1Z2luczplLGxvY2FsSWRzOml9LGEscyl7Y29uc3Qgbj1bXTt2YXIgcj10LmdldENvbnRleHQoKTtmb3IoY29uc3QgaCBvZiBlKXt2YXIgbz1oLmlkLGw9Z2V0T3B0cyhhW29dLHMpO251bGwhPT1sJiZuLnB1c2goe3BsdWdpbjpoLG9wdGlvbnM6cGx1Z2luT3B0cyh0LmNvbmZpZyx7cGx1Z2luOmgsbG9jYWw6aVtvXX0sbCxyKX0pfXJldHVybiBufWZ1bmN0aW9uIHBsdWdpbk9wdHModCx7cGx1Z2luOmUsbG9jYWw6aX0sYSxzKXt2YXIgbj10LnBsdWdpblNjb3BlS2V5cyhlKTtjb25zdCByPXQuZ2V0T3B0aW9uU2NvcGVzKGEsbik7cmV0dXJuIGkmJmUuZGVmYXVsdHMmJnIucHVzaChlLmRlZmF1bHRzKSx0LmNyZWF0ZVJlc29sdmVyKHIscyxbIiJdLHtzY3JpcHRhYmxlOiExLGluZGV4YWJsZTohMSxhbGxLZXlzOiEwfSl9ZnVuY3Rpb24gZ2V0SW5kZXhBeGlzKHQsZSl7dmFyIGk9ZGVmYXVsdHMuZGF0YXNldHNbdF18fHt9O3JldHVybigoZS5kYXRhc2V0c3x8e30pW3RdfHx7fSkuaW5kZXhBeGlzfHxlLmluZGV4QXhpc3x8aS5pbmRleEF4aXN8fCJ4In1mdW5jdGlvbiBnZXRBeGlzRnJvbURlZmF1bHRTY2FsZUlEKHQsZSl7bGV0IGk9dDtyZXR1cm4iX2luZGV4XyI9PT10P2k9ZToiX3ZhbHVlXyI9PT10JiYoaT0ieCI9PT1lPyJ5IjoieCIpLGl9ZnVuY3Rpb24gZ2V0RGVmYXVsdFNjYWxlSURGcm9tQXhpcyh0LGUpe3JldHVybiB0PT09ZT8iX2luZGV4XyI6Il92YWx1ZV8ifWZ1bmN0aW9uIGlkTWF0Y2hlc0F4aXModCl7aWYoIngiPT09dHx8InkiPT09dHx8InIiPT09dClyZXR1cm4gdH1mdW5jdGlvbiBheGlzRnJvbVBvc2l0aW9uKHQpe3JldHVybiJ0b3AiPT09dHx8ImJvdHRvbSI9PT10PyJ4IjoibGVmdCI9PT10fHwicmlnaHQiPT09dD8ieSI6dm9pZCAwfWZ1bmN0aW9uIGRldGVybWluZUF4aXModCwuLi5lKXtpZihpZE1hdGNoZXNBeGlzKHQpKXJldHVybiB0O2Zvcihjb25zdCBhIG9mIGUpe3ZhciBpPWEuYXhpc3x8YXhpc0Zyb21Qb3NpdGlvbihhLnBvc2l0aW9uKXx8MTx0Lmxlbmd0aCYmaWRNYXRjaGVzQXhpcyh0WzBdLnRvTG93ZXJDYXNlKCkpO2lmKGkpcmV0dXJuIGl9dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgZGV0ZXJtaW5lIHR5cGUgb2YgJyR7dH0nIGF4aXMuIFBsZWFzZSBwcm92aWRlICdheGlzJyBvciAncG9zaXRpb24nIG9wdGlvbi5gKX1mdW5jdGlvbiBnZXRBeGlzRnJvbURhdGFzZXQodCxlLGkpe2lmKGlbZSsiQXhpc0lEIl09PT10KXJldHVybntheGlzOmV9fWZ1bmN0aW9uIHJldHJpZXZlQXhpc0Zyb21EYXRhc2V0cyhlLHQpe2lmKHQuZGF0YSYmdC5kYXRhLmRhdGFzZXRzKXt0PXQuZGF0YS5kYXRhc2V0cy5maWx0ZXIodD0+dC54QXhpc0lEPT09ZXx8dC55QXhpc0lEPT09ZSk7aWYodC5sZW5ndGgpcmV0dXJuIGdldEF4aXNGcm9tRGF0YXNldChlLCJ4Iix0WzBdKXx8Z2V0QXhpc0Zyb21EYXRhc2V0KGUsInkiLHRbMF0pfXJldHVybnt9fWZ1bmN0aW9uIG1lcmdlU2NhbGVDb25maWcocixlKXtjb25zdCBuPW92ZXJyaWRlc1tyLnR5cGVdfHx7c2NhbGVzOnt9fSxvPWUuc2NhbGVzfHx7fSxsPWdldEluZGV4QXhpcyhyLnR5cGUsZSksaD1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBPYmplY3Qua2V5cyhvKS5mb3JFYWNoKHQ9Pnt2YXIgZT1vW3RdO2lmKCFpc09iamVjdChlKSlyZXR1cm4gY29uc29sZS5lcnJvcigiSW52YWxpZCBzY2FsZSBjb25maWd1cmF0aW9uIGZvciBzY2FsZTogIit0KTtpZihlLl9wcm94eSlyZXR1cm4gY29uc29sZS53YXJuKCJJZ25vcmluZyByZXNvbHZlciBwYXNzZWQgYXMgb3B0aW9ucyBmb3Igc2NhbGU6ICIrdCk7dmFyIGk9ZGV0ZXJtaW5lQXhpcyh0LGUscmV0cmlldmVBeGlzRnJvbURhdGFzZXRzKHQsciksZGVmYXVsdHMuc2NhbGVzW2UudHlwZV0pLGE9Z2V0RGVmYXVsdFNjYWxlSURGcm9tQXhpcyhpLGwpLHM9bi5zY2FsZXN8fHt9O2hbdF09bWVyZ2VJZihPYmplY3QuY3JlYXRlKG51bGwpLFt7YXhpczppfSxlLHNbaV0sc1thXV0pfSksci5kYXRhLmRhdGFzZXRzLmZvckVhY2goYT0+e3ZhciB0PWEudHlwZXx8ci50eXBlO2NvbnN0IHM9YS5pbmRleEF4aXN8fGdldEluZGV4QXhpcyh0LGUpLG49KG92ZXJyaWRlc1t0XXx8e30pLnNjYWxlc3x8e307T2JqZWN0LmtleXMobikuZm9yRWFjaCh0PT57dmFyIGU9Z2V0QXhpc0Zyb21EZWZhdWx0U2NhbGVJRCh0LHMpLGk9YVtlKyJBeGlzSUQiXXx8ZTtoW2ldPWhbaV18fE9iamVjdC5jcmVhdGUobnVsbCksbWVyZ2VJZihoW2ldLFt7YXhpczplfSxvW2ldLG5bdF1dKX0pfSksT2JqZWN0LmtleXMoaCkuZm9yRWFjaCh0PT57dD1oW3RdO21lcmdlSWYodCxbZGVmYXVsdHMuc2NhbGVzW3QudHlwZV0sZGVmYXVsdHMuc2NhbGVdKX0pLGh9ZnVuY3Rpb24gaW5pdE9wdGlvbnModCl7Y29uc3QgZT10Lm9wdGlvbnN8fCh0Lm9wdGlvbnM9e30pO2UucGx1Z2lucz12YWx1ZU9yRGVmYXVsdChlLnBsdWdpbnMse30pLGUuc2NhbGVzPW1lcmdlU2NhbGVDb25maWcodCxlKX1mdW5jdGlvbiBpbml0RGF0YSh0KXtyZXR1cm4odD10fHx7fSkuZGF0YXNldHM9dC5kYXRhc2V0c3x8W10sdC5sYWJlbHM9dC5sYWJlbHN8fFtdLHR9ZnVuY3Rpb24gaW5pdENvbmZpZyh0KXtyZXR1cm4odD10fHx7fSkuZGF0YT1pbml0RGF0YSh0LmRhdGEpLGluaXRPcHRpb25zKHQpLHR9Y29uc3Qga2V5Q2FjaGU9bmV3IE1hcCxrZXlzQ2FjaGVkPW5ldyBTZXQ7ZnVuY3Rpb24gY2FjaGVkS2V5cyh0LGUpe2xldCBpPWtleUNhY2hlLmdldCh0KTtyZXR1cm4gaXx8KGk9ZSgpLGtleUNhY2hlLnNldCh0LGkpLGtleXNDYWNoZWQuYWRkKGkpKSxpfWNvbnN0IGFkZElmRm91bmQ9KHQsZSxpKT0+e2U9cmVzb2x2ZU9iamVjdEtleShlLGkpO3ZvaWQgMCE9PWUmJnQuYWRkKGUpfTtjbGFzcyBDb25maWd7Y29uc3RydWN0b3IodCl7dGhpcy5fY29uZmlnPWluaXRDb25maWcodCksdGhpcy5fc2NvcGVDYWNoZT1uZXcgTWFwLHRoaXMuX3Jlc29sdmVyQ2FjaGU9bmV3IE1hcH1nZXQgcGxhdGZvcm0oKXtyZXR1cm4gdGhpcy5fY29uZmlnLnBsYXRmb3JtfWdldCB0eXBlKCl7cmV0dXJuIHRoaXMuX2NvbmZpZy50eXBlfXNldCB0eXBlKHQpe3RoaXMuX2NvbmZpZy50eXBlPXR9Z2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5fY29uZmlnLmRhdGF9c2V0IGRhdGEodCl7dGhpcy5fY29uZmlnLmRhdGE9aW5pdERhdGEodCl9Z2V0IG9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fY29uZmlnLm9wdGlvbnN9c2V0IG9wdGlvbnModCl7dGhpcy5fY29uZmlnLm9wdGlvbnM9dH1nZXQgcGx1Z2lucygpe3JldHVybiB0aGlzLl9jb25maWcucGx1Z2luc311cGRhdGUoKXt2YXIgdD10aGlzLl9jb25maWc7dGhpcy5jbGVhckNhY2hlKCksaW5pdE9wdGlvbnModCl9Y2xlYXJDYWNoZSgpe3RoaXMuX3Njb3BlQ2FjaGUuY2xlYXIoKSx0aGlzLl9yZXNvbHZlckNhY2hlLmNsZWFyKCl9ZGF0YXNldFNjb3BlS2V5cyh0KXtyZXR1cm4gY2FjaGVkS2V5cyh0LCgpPT5bWyJkYXRhc2V0cy4iK3QsIiJdXSl9ZGF0YXNldEFuaW1hdGlvblNjb3BlS2V5cyh0LGUpe3JldHVybiBjYWNoZWRLZXlzKHQrIi50cmFuc2l0aW9uLiIrZSwoKT0+W1tgZGF0YXNldHMuJHt0fS50cmFuc2l0aW9ucy5gK2UsInRyYW5zaXRpb25zLiIrZV0sWyJkYXRhc2V0cy4iK3QsIiJdXSl9ZGF0YXNldEVsZW1lbnRTY29wZUtleXModCxlKXtyZXR1cm4gY2FjaGVkS2V5cyh0KyItIitlLCgpPT5bW2BkYXRhc2V0cy4ke3R9LmVsZW1lbnRzLmArZSwiZGF0YXNldHMuIit0LCJlbGVtZW50cy4iK2UsIiJdXSl9cGx1Z2luU2NvcGVLZXlzKHQpe2NvbnN0IGU9dC5pZDtyZXR1cm4gY2FjaGVkS2V5cyh0aGlzLnR5cGUrIi1wbHVnaW4tIitlLCgpPT5bWyJwbHVnaW5zLiIrZSwuLi50LmFkZGl0aW9uYWxPcHRpb25TY29wZXN8fFtdXV0pfV9jYWNoZWRTY29wZXModCxlKXtjb25zdCBpPXRoaXMuX3Njb3BlQ2FjaGU7bGV0IGE9aS5nZXQodCk7cmV0dXJuIGEmJiFlfHwoYT1uZXcgTWFwLGkuc2V0KHQsYSkpLGF9Z2V0T3B0aW9uU2NvcGVzKGUsdCxpKXtjb25zdHtvcHRpb25zOmEsdHlwZTpzfT10aGlzLG49dGhpcy5fY2FjaGVkU2NvcGVzKGUsaSk7aT1uLmdldCh0KTtpZihpKXJldHVybiBpO2NvbnN0IHI9bmV3IFNldCxvPSh0LmZvckVhY2godD0+e2UmJihyLmFkZChlKSx0LmZvckVhY2godD0+YWRkSWZGb3VuZChyLGUsdCkpKSx0LmZvckVhY2godD0+YWRkSWZGb3VuZChyLGEsdCkpLHQuZm9yRWFjaCh0PT5hZGRJZkZvdW5kKHIsb3ZlcnJpZGVzW3NdfHx7fSx0KSksdC5mb3JFYWNoKHQ9PmFkZElmRm91bmQocixkZWZhdWx0cyx0KSksdC5mb3JFYWNoKHQ9PmFkZElmRm91bmQocixkZXNjcmlwdG9ycyx0KSl9KSxBcnJheS5mcm9tKHIpKTtyZXR1cm4gMD09PW8ubGVuZ3RoJiZvLnB1c2goT2JqZWN0LmNyZWF0ZShudWxsKSksa2V5c0NhY2hlZC5oYXModCkmJm4uc2V0KHQsbyksb31jaGFydE9wdGlvblNjb3Blcygpe3ZhcntvcHRpb25zOnQsdHlwZTplfT10aGlzO3JldHVyblt0LG92ZXJyaWRlc1tlXXx8e30sZGVmYXVsdHMuZGF0YXNldHNbZV18fHt9LHt0eXBlOmV9LGRlZmF1bHRzLGRlc2NyaXB0b3JzXX1yZXNvbHZlTmFtZWRPcHRpb25zKHQsZSxpLGE9WyIiXSl7Y29uc3Qgcz17JHNoYXJlZDohMH07dmFye3Jlc29sdmVyOmEsc3ViUHJlZml4ZXM6bn09Z2V0UmVzb2x2ZXIodGhpcy5fcmVzb2x2ZXJDYWNoZSx0LGEpO2xldCByPWE7bmVlZENvbnRleHQoYSxlKSYmKHMuJHNoYXJlZD0hMSxpPWlzRnVuY3Rpb24oaSk/aSgpOmksdD10aGlzLmNyZWF0ZVJlc29sdmVyKHQsaSxuKSxyPV9hdHRhY2hDb250ZXh0KGEsaSx0KSk7Zm9yKGNvbnN0IG8gb2YgZSlzW29dPXJbb107cmV0dXJuIHN9Y3JlYXRlUmVzb2x2ZXIodCxlLGk9WyIiXSxhKXt0PWdldFJlc29sdmVyKHRoaXMuX3Jlc29sdmVyQ2FjaGUsdCxpKS5yZXNvbHZlcjtyZXR1cm4gaXNPYmplY3QoZSk/X2F0dGFjaENvbnRleHQodCxlLHZvaWQgMCxhKTp0fX1mdW5jdGlvbiBnZXRSZXNvbHZlcih0LGUsaSl7bGV0IGE9dC5nZXQoZSk7YXx8KGE9bmV3IE1hcCx0LnNldChlLGEpKTt0PWkuam9pbigpO2xldCBzPWEuZ2V0KHQpO3JldHVybiBzfHwoZT1fY3JlYXRlUmVzb2x2ZXIoZSxpKSxzPXtyZXNvbHZlcjplLHN1YlByZWZpeGVzOmkuZmlsdGVyKHQ9PiF0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoImhvdmVyIikpfSxhLnNldCh0LHMpKSxzfWNvbnN0IGhhc0Z1bmN0aW9uPWU9PmlzT2JqZWN0KGUpJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5zb21lKHQ9PmlzRnVuY3Rpb24oZVt0XSkpO2Z1bmN0aW9uIG5lZWRDb250ZXh0KHQsZSl7Y29uc3R7aXNTY3JpcHRhYmxlOmksaXNJbmRleGFibGU6YX09X2Rlc2NyaXB0b3JzKHQpO2Zvcihjb25zdCBvIG9mIGUpe3ZhciBzPWkobyksbj1hKG8pLHI9KG58fHMpJiZ0W29dO2lmKHMmJihpc0Z1bmN0aW9uKHIpfHxoYXNGdW5jdGlvbihyKSl8fG4mJmlzQXJyYXkocikpcmV0dXJuITB9cmV0dXJuITF9dmFyIHZlcnNpb249IjQuNC4xIjtjb25zdCBLTk9XTl9QT1NJVElPTlM9WyJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJjaGFydEFyZWEiXTtmdW5jdGlvbiBwb3NpdGlvbklzSG9yaXpvbnRhbCh0LGUpe3JldHVybiJ0b3AiPT09dHx8ImJvdHRvbSI9PT10fHwtMT09PUtOT1dOX1BPU0lUSU9OUy5pbmRleE9mKHQpJiYieCI9PT1lfWZ1bmN0aW9uIGNvbXBhcmUyTGV2ZWwoaSxhKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gdFtpXT09PWVbaV0/dFthXS1lW2FdOnRbaV0tZVtpXX19ZnVuY3Rpb24gb25BbmltYXRpb25zQ29tcGxldGUodCl7Y29uc3QgZT10LmNoYXJ0O3ZhciBpPWUub3B0aW9ucy5hbmltYXRpb247ZS5ub3RpZnlQbHVnaW5zKCJhZnRlclJlbmRlciIpLGNhbGxiYWNrKGkmJmkub25Db21wbGV0ZSxbdF0sZSl9ZnVuY3Rpb24gb25BbmltYXRpb25Qcm9ncmVzcyh0KXt2YXIgZT10LmNoYXJ0LGk9ZS5vcHRpb25zLmFuaW1hdGlvbjtjYWxsYmFjayhpJiZpLm9uUHJvZ3Jlc3MsW3RdLGUpfWZ1bmN0aW9uIGdldENhbnZhcyh0KXtyZXR1cm4gX2lzRG9tU3VwcG9ydGVkKCkmJiJzdHJpbmciPT10eXBlb2YgdD90PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQpOnQmJnQubGVuZ3RoJiYodD10WzBdKSx0PXQmJnQuY2FudmFzP3QuY2FudmFzOnR9Y29uc3QgaW5zdGFuY2VzPXt9LGdldENoYXJ0PXQ9Pntjb25zdCBlPWdldENhbnZhcyh0KTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhpbnN0YW5jZXMpLmZpbHRlcih0PT50LmNhbnZhcz09PWUpLnBvcCgpfTtmdW5jdGlvbiBtb3ZlTnVtZXJpY0tleXModCxlLGkpe2Zvcihjb25zdCBuIG9mIE9iamVjdC5rZXlzKHQpKXt2YXIgYSxzPStuO2U8PXMmJihhPXRbbl0sZGVsZXRlIHRbbl0sKDA8aXx8ZTxzKSYmKHRbcytpXT1hKSl9fWZ1bmN0aW9uIGRldGVybWluZUxhc3RFdmVudCh0LGUsaSxhKXtyZXR1cm4gaSYmIm1vdXNlb3V0IiE9PXQudHlwZT9hP2U6dDpudWxsfWZ1bmN0aW9uIGdldFNpemVGb3JBcmVhKHQsZSxpKXtyZXR1cm4odC5vcHRpb25zLmNsaXA/dDplKVtpXX1mdW5jdGlvbiBnZXREYXRhc2V0QXJlYSh0LGUpe3Zhcnt4U2NhbGU6dCx5U2NhbGU6aX09dDtyZXR1cm4gdCYmaT97bGVmdDpnZXRTaXplRm9yQXJlYSh0LGUsImxlZnQiKSxyaWdodDpnZXRTaXplRm9yQXJlYSh0LGUsInJpZ2h0IiksdG9wOmdldFNpemVGb3JBcmVhKGksZSwidG9wIiksYm90dG9tOmdldFNpemVGb3JBcmVhKGksZSwiYm90dG9tIil9OmV9Y2xhc3MgQ2hhcnR7c3RhdGljIGRlZmF1bHRzPWRlZmF1bHRzO3N0YXRpYyBpbnN0YW5jZXM9aW5zdGFuY2VzO3N0YXRpYyBvdmVycmlkZXM9b3ZlcnJpZGVzO3N0YXRpYyByZWdpc3RyeT1yZWdpc3RyeTtzdGF0aWMgdmVyc2lvbj12ZXJzaW9uO3N0YXRpYyBnZXRDaGFydD1nZXRDaGFydDtzdGF0aWMgcmVnaXN0ZXIoLi4udCl7cmVnaXN0cnkuYWRkKC4uLnQpLGludmFsaWRhdGVQbHVnaW5zKCl9c3RhdGljIHVucmVnaXN0ZXIoLi4udCl7cmVnaXN0cnkucmVtb3ZlKC4uLnQpLGludmFsaWRhdGVQbHVnaW5zKCl9Y29uc3RydWN0b3IodCxlKXtjb25zdCBpPXRoaXMuY29uZmlnPW5ldyBDb25maWcoZSk7ZT1nZXRDYW52YXModCksdD1nZXRDaGFydChlKTtpZih0KXRocm93IG5ldyBFcnJvcigiQ2FudmFzIGlzIGFscmVhZHkgaW4gdXNlLiBDaGFydCB3aXRoIElEICciK3QuaWQrIicgbXVzdCBiZSBkZXN0cm95ZWQgYmVmb3JlIHRoZSBjYW52YXMgd2l0aCBJRCAnIit0LmNhbnZhcy5pZCsiJyBjYW4gYmUgcmV1c2VkLiIpO3ZhciB0PWkuY3JlYXRlUmVzb2x2ZXIoaS5jaGFydE9wdGlvblNjb3BlcygpLHRoaXMuZ2V0Q29udGV4dCgpKSxlPSh0aGlzLnBsYXRmb3JtPW5ldyhpLnBsYXRmb3JtfHxfZGV0ZWN0UGxhdGZvcm0oZSkpLHRoaXMucGxhdGZvcm0udXBkYXRlQ29uZmlnKGkpLHRoaXMucGxhdGZvcm0uYWNxdWlyZUNvbnRleHQoZSx0LmFzcGVjdFJhdGlvKSksYT1lJiZlLmNhbnZhcyxzPWEmJmEuaGVpZ2h0LG49YSYmYS53aWR0aDt0aGlzLmlkPXVpZCgpLHRoaXMuY3R4PWUsdGhpcy5jYW52YXM9YSx0aGlzLndpZHRoPW4sdGhpcy5oZWlnaHQ9cyx0aGlzLl9vcHRpb25zPXQsdGhpcy5fYXNwZWN0UmF0aW89dGhpcy5hc3BlY3RSYXRpbyx0aGlzLl9sYXllcnM9W10sdGhpcy5fbWV0YXNldHM9W10sdGhpcy5fc3RhY2tzPXZvaWQgMCx0aGlzLmJveGVzPVtdLHRoaXMuY3VycmVudERldmljZVBpeGVsUmF0aW89dm9pZCAwLHRoaXMuY2hhcnRBcmVhPXZvaWQgMCx0aGlzLl9hY3RpdmU9W10sdGhpcy5fbGFzdEV2ZW50PXZvaWQgMCx0aGlzLl9saXN0ZW5lcnM9e30sdGhpcy5fcmVzcG9uc2l2ZUxpc3RlbmVycz12b2lkIDAsdGhpcy5fc29ydGVkTWV0YXNldHM9W10sdGhpcy5zY2FsZXM9e30sdGhpcy5fcGx1Z2lucz1uZXcgUGx1Z2luU2VydmljZSx0aGlzLiRwcm94aWVzPXt9LHRoaXMuX2hpZGRlbkluZGljZXM9e30sdGhpcy5hdHRhY2hlZD0hMSx0aGlzLl9hbmltYXRpb25zRGlzYWJsZWQ9dm9pZCAwLHRoaXMuJGNvbnRleHQ9dm9pZCAwLHRoaXMuX2RvUmVzaXplPWRlYm91bmNlKHQ9PnRoaXMudXBkYXRlKHQpLHQucmVzaXplRGVsYXl8fDApLHRoaXMuX2RhdGFDaGFuZ2VzPVtdLGluc3RhbmNlc1t0aGlzLmlkXT10aGlzLGUmJmE/KGFuaW1hdG9yLmxpc3Rlbih0aGlzLCJjb21wbGV0ZSIsb25BbmltYXRpb25zQ29tcGxldGUpLGFuaW1hdG9yLmxpc3Rlbih0aGlzLCJwcm9ncmVzcyIsb25BbmltYXRpb25Qcm9ncmVzcyksdGhpcy5faW5pdGlhbGl6ZSgpLHRoaXMuYXR0YWNoZWQmJnRoaXMudXBkYXRlKCkpOmNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBjcmVhdGUgY2hhcnQ6IGNhbid0IGFjcXVpcmUgY29udGV4dCBmcm9tIHRoZSBnaXZlbiBpdGVtIil9Z2V0IGFzcGVjdFJhdGlvKCl7dmFye29wdGlvbnM6e2FzcGVjdFJhdGlvOnQsbWFpbnRhaW5Bc3BlY3RSYXRpbzplfSx3aWR0aDppLGhlaWdodDphLF9hc3BlY3RSYXRpbzpzfT10aGlzO3JldHVybiBpc051bGxPclVuZGVmKHQpP2UmJnM/czphP2kvYTpudWxsOnR9Z2V0IGRhdGEoKXtyZXR1cm4gdGhpcy5jb25maWcuZGF0YX1zZXQgZGF0YSh0KXt0aGlzLmNvbmZpZy5kYXRhPXR9Z2V0IG9wdGlvbnMoKXtyZXR1cm4gdGhpcy5fb3B0aW9uc31zZXQgb3B0aW9ucyh0KXt0aGlzLmNvbmZpZy5vcHRpb25zPXR9Z2V0IHJlZ2lzdHJ5KCl7cmV0dXJuIHJlZ2lzdHJ5fV9pbml0aWFsaXplKCl7cmV0dXJuIHRoaXMubm90aWZ5UGx1Z2lucygiYmVmb3JlSW5pdCIpLHRoaXMub3B0aW9ucy5yZXNwb25zaXZlP3RoaXMucmVzaXplKCk6cmV0aW5hU2NhbGUodGhpcyx0aGlzLm9wdGlvbnMuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5iaW5kRXZlbnRzKCksdGhpcy5ub3RpZnlQbHVnaW5zKCJhZnRlckluaXQiKSx0aGlzfWNsZWFyKCl7cmV0dXJuIGNsZWFyQ2FudmFzKHRoaXMuY2FudmFzLHRoaXMuY3R4KSx0aGlzfXN0b3AoKXtyZXR1cm4gYW5pbWF0b3Iuc3RvcCh0aGlzKSx0aGlzfXJlc2l6ZSh0LGUpe2FuaW1hdG9yLnJ1bm5pbmcodGhpcyk/dGhpcy5fcmVzaXplQmVmb3JlRHJhdz17d2lkdGg6dCxoZWlnaHQ6ZX06dGhpcy5fcmVzaXplKHQsZSl9X3Jlc2l6ZSh0LGUpe3ZhciBpPXRoaXMub3B0aW9ucyxhPXRoaXMuY2FudmFzLHM9aS5tYWludGFpbkFzcGVjdFJhdGlvJiZ0aGlzLmFzcGVjdFJhdGlvLGE9dGhpcy5wbGF0Zm9ybS5nZXRNYXhpbXVtU2l6ZShhLHQsZSxzKSx0PWkuZGV2aWNlUGl4ZWxSYXRpb3x8dGhpcy5wbGF0Zm9ybS5nZXREZXZpY2VQaXhlbFJhdGlvKCksZT10aGlzLndpZHRoPyJyZXNpemUiOiJhdHRhY2giO3RoaXMud2lkdGg9YS53aWR0aCx0aGlzLmhlaWdodD1hLmhlaWdodCx0aGlzLl9hc3BlY3RSYXRpbz10aGlzLmFzcGVjdFJhdGlvLHJldGluYVNjYWxlKHRoaXMsdCwhMCkmJih0aGlzLm5vdGlmeVBsdWdpbnMoInJlc2l6ZSIse3NpemU6YX0pLGNhbGxiYWNrKGkub25SZXNpemUsW3RoaXMsYV0sdGhpcyksdGhpcy5hdHRhY2hlZCYmdGhpcy5fZG9SZXNpemUoZSkmJnRoaXMucmVuZGVyKCkpfWVuc3VyZVNjYWxlc0hhdmVJRHMoKXt2YXIgdD10aGlzLm9wdGlvbnMuc2NhbGVzfHx7fTtlYWNoKHQsKHQsZSk9Pnt0LmlkPWV9KX1idWlsZE9yVXBkYXRlU2NhbGVzKCl7Y29uc3Qgbz10aGlzLm9wdGlvbnMsYT1vLnNjYWxlcyxsPXRoaXMuc2NhbGVzLGg9T2JqZWN0LmtleXMobCkucmVkdWNlKCh0LGUpPT4odFtlXT0hMSx0KSx7fSk7bGV0IHQ9W107YSYmKHQ9dC5jb25jYXQoT2JqZWN0LmtleXMoYSkubWFwKHQ9Pnt2YXIgZT1hW3RdLHQ9ZGV0ZXJtaW5lQXhpcyh0LGUpLGk9InIiPT09dCx0PSJ4Ij09PXQ7cmV0dXJue29wdGlvbnM6ZSxkcG9zaXRpb246aT8iY2hhcnRBcmVhIjp0PyJib3R0b20iOiJsZWZ0IixkdHlwZTppPyJyYWRpYWxMaW5lYXIiOnQ/ImNhdGVnb3J5IjoibGluZWFyIn19KSkpLGVhY2godCx0PT57Y29uc3QgZT10Lm9wdGlvbnM7dmFyIGk9ZS5pZCxhPWRldGVybWluZUF4aXMoaSxlKSxzPXZhbHVlT3JEZWZhdWx0KGUudHlwZSx0LmR0eXBlKTt2b2lkIDAhPT1lLnBvc2l0aW9uJiZwb3NpdGlvbklzSG9yaXpvbnRhbChlLnBvc2l0aW9uLGEpPT09cG9zaXRpb25Jc0hvcml6b250YWwodC5kcG9zaXRpb24pfHwoZS5wb3NpdGlvbj10LmRwb3NpdGlvbiksaFtpXT0hMDtsZXQgbj1udWxsO2lmKGkgaW4gbCYmbFtpXS50eXBlPT09cyluPWxbaV07ZWxzZXtjb25zdCByPXJlZ2lzdHJ5LmdldFNjYWxlKHMpO249bmV3IHIoe2lkOmksdHlwZTpzLGN0eDp0aGlzLmN0eCxjaGFydDp0aGlzfSksbFtuLmlkXT1ufW4uaW5pdChlLG8pfSksZWFjaChoLCh0LGUpPT57dHx8ZGVsZXRlIGxbZV19KSxlYWNoKGwsdD0+e2xheW91dHMuY29uZmlndXJlKHRoaXMsdCx0Lm9wdGlvbnMpLGxheW91dHMuYWRkQm94KHRoaXMsdCl9KX1fdXBkYXRlTWV0YXNldHMoKXtjb25zdCB0PXRoaXMuX21ldGFzZXRzO3ZhciBlPXRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGgsaT10Lmxlbmd0aDtpZih0LnNvcnQoKHQsZSk9PnQuaW5kZXgtZS5pbmRleCksZTxpKXtmb3IobGV0IHQ9ZTt0PGk7Kyt0KXRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YSh0KTt0LnNwbGljZShlLGktZSl9dGhpcy5fc29ydGVkTWV0YXNldHM9dC5zbGljZSgwKS5zb3J0KGNvbXBhcmUyTGV2ZWwoIm9yZGVyIiwiaW5kZXgiKSl9X3JlbW92ZVVucmVmZXJlbmNlZE1ldGFzZXRzKCl7Y29uc3R7X21ldGFzZXRzOnQsZGF0YTp7ZGF0YXNldHM6aX19PXRoaXM7dC5sZW5ndGg+aS5sZW5ndGgmJmRlbGV0ZSB0aGlzLl9zdGFja3MsdC5mb3JFYWNoKChlLHQpPT57MD09PWkuZmlsdGVyKHQ9PnQ9PT1lLl9kYXRhc2V0KS5sZW5ndGgmJnRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YSh0KX0pfWJ1aWxkT3JVcGRhdGVDb250cm9sbGVycygpe2NvbnN0IGU9W107dmFyIGk9dGhpcy5kYXRhLmRhdGFzZXRzO2xldCBhLHQ7Zm9yKHRoaXMuX3JlbW92ZVVucmVmZXJlbmNlZE1ldGFzZXRzKCksYT0wLHQ9aS5sZW5ndGg7YTx0O2ErKyl7dmFyIHM9aVthXTtsZXQgdD10aGlzLmdldERhdGFzZXRNZXRhKGEpO3ZhciBuPXMudHlwZXx8dGhpcy5jb25maWcudHlwZTtpZih0LnR5cGUmJnQudHlwZSE9PW4mJih0aGlzLl9kZXN0cm95RGF0YXNldE1ldGEoYSksdD10aGlzLmdldERhdGFzZXRNZXRhKGEpKSx0LnR5cGU9bix0LmluZGV4QXhpcz1zLmluZGV4QXhpc3x8Z2V0SW5kZXhBeGlzKG4sdGhpcy5vcHRpb25zKSx0Lm9yZGVyPXMub3JkZXJ8fDAsdC5pbmRleD1hLHQubGFiZWw9IiIrcy5sYWJlbCx0LnZpc2libGU9dGhpcy5pc0RhdGFzZXRWaXNpYmxlKGEpLHQuY29udHJvbGxlcil0LmNvbnRyb2xsZXIudXBkYXRlSW5kZXgoYSksdC5jb250cm9sbGVyLmxpbmtTY2FsZXMoKTtlbHNle2NvbnN0IHI9cmVnaXN0cnkuZ2V0Q29udHJvbGxlcihuKTt2YXJ7ZGF0YXNldEVsZW1lbnRUeXBlOnMsZGF0YUVsZW1lbnRUeXBlOm59PWRlZmF1bHRzLmRhdGFzZXRzW25dO09iamVjdC5hc3NpZ24ocix7ZGF0YUVsZW1lbnRUeXBlOnJlZ2lzdHJ5LmdldEVsZW1lbnQobiksZGF0YXNldEVsZW1lbnRUeXBlOnMmJnJlZ2lzdHJ5LmdldEVsZW1lbnQocyl9KSx0LmNvbnRyb2xsZXI9bmV3IHIodGhpcyxhKSxlLnB1c2godC5jb250cm9sbGVyKX19cmV0dXJuIHRoaXMuX3VwZGF0ZU1ldGFzZXRzKCksZX1fcmVzZXRFbGVtZW50cygpe2VhY2godGhpcy5kYXRhLmRhdGFzZXRzLCh0LGUpPT57dGhpcy5nZXREYXRhc2V0TWV0YShlKS5jb250cm9sbGVyLnJlc2V0KCl9LHRoaXMpfXJlc2V0KCl7dGhpcy5fcmVzZXRFbGVtZW50cygpLHRoaXMubm90aWZ5UGx1Z2lucygicmVzZXQiKX11cGRhdGUodCl7Y29uc3QgZT10aGlzLmNvbmZpZztlLnVwZGF0ZSgpO3ZhciBhPXRoaXMuX29wdGlvbnM9ZS5jcmVhdGVSZXNvbHZlcihlLmNoYXJ0T3B0aW9uU2NvcGVzKCksdGhpcy5nZXRDb250ZXh0KCkpLHM9dGhpcy5fYW5pbWF0aW9uc0Rpc2FibGVkPSFhLmFuaW1hdGlvbjtpZih0aGlzLl91cGRhdGVTY2FsZXMoKSx0aGlzLl9jaGVja0V2ZW50QmluZGluZ3MoKSx0aGlzLl91cGRhdGVIaWRkZW5JbmRpY2VzKCksdGhpcy5fcGx1Z2lucy5pbnZhbGlkYXRlKCksITEhPT10aGlzLm5vdGlmeVBsdWdpbnMoImJlZm9yZVVwZGF0ZSIse21vZGU6dCxjYW5jZWxhYmxlOiEwfSkpe2NvbnN0IHI9dGhpcy5idWlsZE9yVXBkYXRlQ29udHJvbGxlcnMoKTt0aGlzLm5vdGlmeVBsdWdpbnMoImJlZm9yZUVsZW1lbnRzVXBkYXRlIik7bGV0IGk9MDtmb3IobGV0IHQ9MCxlPXRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7dDxlO3QrKyl7Y29uc3Qgbz10aGlzLmdldERhdGFzZXRNZXRhKHQpWyJjb250cm9sbGVyIl07dmFyIG49IXMmJi0xPT09ci5pbmRleE9mKG8pO28uYnVpbGRPclVwZGF0ZUVsZW1lbnRzKG4pLGk9TWF0aC5tYXgoK28uZ2V0TWF4T3ZlcmZsb3coKSxpKX1pPXRoaXMuX21pblBhZGRpbmc9YS5sYXlvdXQuYXV0b1BhZGRpbmc/aTowLHRoaXMuX3VwZGF0ZUxheW91dChpKSxzfHxlYWNoKHIsdD0+e3QucmVzZXQoKX0pLHRoaXMuX3VwZGF0ZURhdGFzZXRzKHQpLHRoaXMubm90aWZ5UGx1Z2lucygiYWZ0ZXJVcGRhdGUiLHttb2RlOnR9KSx0aGlzLl9sYXllcnMuc29ydChjb21wYXJlMkxldmVsKCJ6IiwiX2lkeCIpKTt2YXJ7X2FjdGl2ZTphLF9sYXN0RXZlbnQ6dH09dGhpczt0P3RoaXMuX2V2ZW50SGFuZGxlcih0LCEwKTphLmxlbmd0aCYmdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXMoYSxhLCEwKSx0aGlzLnJlbmRlcigpfX1fdXBkYXRlU2NhbGVzKCl7ZWFjaCh0aGlzLnNjYWxlcyx0PT57bGF5b3V0cy5yZW1vdmVCb3godGhpcyx0KX0pLHRoaXMuZW5zdXJlU2NhbGVzSGF2ZUlEcygpLHRoaXMuYnVpbGRPclVwZGF0ZVNjYWxlcygpfV9jaGVja0V2ZW50QmluZGluZ3MoKXt2YXIgdD10aGlzLm9wdGlvbnMsZT1uZXcgU2V0KE9iamVjdC5rZXlzKHRoaXMuX2xpc3RlbmVycykpLGk9bmV3IFNldCh0LmV2ZW50cyk7c2V0c0VxdWFsKGUsaSkmJiEhdGhpcy5fcmVzcG9uc2l2ZUxpc3RlbmVycz09PXQucmVzcG9uc2l2ZXx8KHRoaXMudW5iaW5kRXZlbnRzKCksdGhpcy5iaW5kRXZlbnRzKCkpfV91cGRhdGVIaWRkZW5JbmRpY2VzKCl7dmFyIHQsZSxpLGE9dGhpc1siX2hpZGRlbkluZGljZXMiXTtmb3Ioe21ldGhvZDp0LHN0YXJ0OmUsY291bnQ6aX1vZiB0aGlzLl9nZXRVbmlmb3JtRGF0YUNoYW5nZXMoKXx8W10pe3ZhciBzPSJfcmVtb3ZlRWxlbWVudHMiPT09dD8taTppO21vdmVOdW1lcmljS2V5cyhhLGUscyl9fV9nZXRVbmlmb3JtRGF0YUNoYW5nZXMoKXtjb25zdCB0PXRoaXMuX2RhdGFDaGFuZ2VzO2lmKHQmJnQubGVuZ3RoKXt0aGlzLl9kYXRhQ2hhbmdlcz1bXTt2YXIgZT10aGlzLmRhdGEuZGF0YXNldHMubGVuZ3RoLGk9ZT0+bmV3IFNldCh0LmZpbHRlcih0PT50WzBdPT09ZSkubWFwKCh0LGUpPT5lKyIsIit0LnNwbGljZSgxKS5qb2luKCIsIikpKSxhPWkoMCk7Zm9yKGxldCB0PTE7dDxlO3QrKylpZighc2V0c0VxdWFsKGEsaSh0KSkpcmV0dXJuO3JldHVybiBBcnJheS5mcm9tKGEpLm1hcCh0PT50LnNwbGl0KCIsIikpLm1hcCh0PT4oe21ldGhvZDp0WzFdLHN0YXJ0Oit0WzJdLGNvdW50Oit0WzNdfSkpfX1fdXBkYXRlTGF5b3V0KHQpe2lmKCExIT09dGhpcy5ub3RpZnlQbHVnaW5zKCJiZWZvcmVMYXlvdXQiLHtjYW5jZWxhYmxlOiEwfSkpe2xheW91dHMudXBkYXRlKHRoaXMsdGhpcy53aWR0aCx0aGlzLmhlaWdodCx0KTt0PXRoaXMuY2hhcnRBcmVhO2NvbnN0IGU9dC53aWR0aDw9MHx8dC5oZWlnaHQ8PTA7dGhpcy5fbGF5ZXJzPVtdLGVhY2godGhpcy5ib3hlcyx0PT57ZSYmImNoYXJ0QXJlYSI9PT10LnBvc2l0aW9ufHwodC5jb25maWd1cmUmJnQuY29uZmlndXJlKCksdGhpcy5fbGF5ZXJzLnB1c2goLi4udC5fbGF5ZXJzKCkpKX0sdGhpcyksdGhpcy5fbGF5ZXJzLmZvckVhY2goKHQsZSk9Pnt0Ll9pZHg9ZX0pLHRoaXMubm90aWZ5UGx1Z2lucygiYWZ0ZXJMYXlvdXQiKX19X3VwZGF0ZURhdGFzZXRzKGkpe2lmKCExIT09dGhpcy5ub3RpZnlQbHVnaW5zKCJiZWZvcmVEYXRhc2V0c1VwZGF0ZSIse21vZGU6aSxjYW5jZWxhYmxlOiEwfSkpe2ZvcihsZXQgdD0wLGU9dGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDt0PGU7Kyt0KXRoaXMuZ2V0RGF0YXNldE1ldGEodCkuY29udHJvbGxlci5jb25maWd1cmUoKTtmb3IobGV0IHQ9MCxlPXRoaXMuZGF0YS5kYXRhc2V0cy5sZW5ndGg7dDxlOysrdCl0aGlzLl91cGRhdGVEYXRhc2V0KHQsaXNGdW5jdGlvbihpKT9pKHtkYXRhc2V0SW5kZXg6dH0pOmkpO3RoaXMubm90aWZ5UGx1Z2lucygiYWZ0ZXJEYXRhc2V0c1VwZGF0ZSIse21vZGU6aX0pfX1fdXBkYXRlRGF0YXNldCh0LGUpe2NvbnN0IGk9dGhpcy5nZXREYXRhc2V0TWV0YSh0KSxhPXttZXRhOmksaW5kZXg6dCxtb2RlOmUsY2FuY2VsYWJsZTohMH07ITEhPT10aGlzLm5vdGlmeVBsdWdpbnMoImJlZm9yZURhdGFzZXRVcGRhdGUiLGEpJiYoaS5jb250cm9sbGVyLl91cGRhdGUoZSksYS5jYW5jZWxhYmxlPSExLHRoaXMubm90aWZ5UGx1Z2lucygiYWZ0ZXJEYXRhc2V0VXBkYXRlIixhKSl9cmVuZGVyKCl7ITEhPT10aGlzLm5vdGlmeVBsdWdpbnMoImJlZm9yZVJlbmRlciIse2NhbmNlbGFibGU6ITB9KSYmKGFuaW1hdG9yLmhhcyh0aGlzKT90aGlzLmF0dGFjaGVkJiYhYW5pbWF0b3IucnVubmluZyh0aGlzKSYmYW5pbWF0b3Iuc3RhcnQodGhpcyk6KHRoaXMuZHJhdygpLG9uQW5pbWF0aW9uc0NvbXBsZXRlKHtjaGFydDp0aGlzfSkpKX1kcmF3KCl7bGV0IHQ7dmFyIGUsaTtpZih0aGlzLl9yZXNpemVCZWZvcmVEcmF3JiYoe3dpZHRoOmUsaGVpZ2h0Oml9PXRoaXMuX3Jlc2l6ZUJlZm9yZURyYXcsdGhpcy5fcmVzaXplKGUsaSksdGhpcy5fcmVzaXplQmVmb3JlRHJhdz1udWxsKSx0aGlzLmNsZWFyKCksISh0aGlzLndpZHRoPD0wfHx0aGlzLmhlaWdodDw9MCkmJiExIT09dGhpcy5ub3RpZnlQbHVnaW5zKCJiZWZvcmVEcmF3Iix7Y2FuY2VsYWJsZTohMH0pKXtjb25zdCBhPXRoaXMuX2xheWVycztmb3IodD0wO3Q8YS5sZW5ndGgmJmFbdF0uejw9MDsrK3QpYVt0XS5kcmF3KHRoaXMuY2hhcnRBcmVhKTtmb3IodGhpcy5fZHJhd0RhdGFzZXRzKCk7dDxhLmxlbmd0aDsrK3QpYVt0XS5kcmF3KHRoaXMuY2hhcnRBcmVhKTt0aGlzLm5vdGlmeVBsdWdpbnMoImFmdGVyRHJhdyIpfX1fZ2V0U29ydGVkRGF0YXNldE1ldGFzKHQpe3ZhciBlPXRoaXMuX3NvcnRlZE1ldGFzZXRzO2NvbnN0IGk9W107bGV0IGEscztmb3IoYT0wLHM9ZS5sZW5ndGg7YTxzOysrYSl7dmFyIG49ZVthXTt0JiYhbi52aXNpYmxlfHxpLnB1c2gobil9cmV0dXJuIGl9Z2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpe3JldHVybiB0aGlzLl9nZXRTb3J0ZWREYXRhc2V0TWV0YXMoITApfV9kcmF3RGF0YXNldHMoKXtpZighMSE9PXRoaXMubm90aWZ5UGx1Z2lucygiYmVmb3JlRGF0YXNldHNEcmF3Iix7Y2FuY2VsYWJsZTohMH0pKXt2YXIgZT10aGlzLmdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKTtmb3IobGV0IHQ9ZS5sZW5ndGgtMTswPD10Oy0tdCl0aGlzLl9kcmF3RGF0YXNldChlW3RdKTt0aGlzLm5vdGlmeVBsdWdpbnMoImFmdGVyRGF0YXNldHNEcmF3Iil9fV9kcmF3RGF0YXNldCh0KXt2YXIgZT10aGlzLmN0eCxpPXQuX2NsaXAsYT0haS5kaXNhYmxlZCxzPWdldERhdGFzZXRBcmVhKHQsdGhpcy5jaGFydEFyZWEpO2NvbnN0IG49e21ldGE6dCxpbmRleDp0LmluZGV4LGNhbmNlbGFibGU6ITB9OyExIT09dGhpcy5ub3RpZnlQbHVnaW5zKCJiZWZvcmVEYXRhc2V0RHJhdyIsbikmJihhJiZjbGlwQXJlYShlLHtsZWZ0OiExPT09aS5sZWZ0PzA6cy5sZWZ0LWkubGVmdCxyaWdodDohMT09PWkucmlnaHQ/dGhpcy53aWR0aDpzLnJpZ2h0K2kucmlnaHQsdG9wOiExPT09aS50b3A/MDpzLnRvcC1pLnRvcCxib3R0b206ITE9PT1pLmJvdHRvbT90aGlzLmhlaWdodDpzLmJvdHRvbStpLmJvdHRvbX0pLHQuY29udHJvbGxlci5kcmF3KCksYSYmdW5jbGlwQXJlYShlKSxuLmNhbmNlbGFibGU9ITEsdGhpcy5ub3RpZnlQbHVnaW5zKCJhZnRlckRhdGFzZXREcmF3IixuKSl9aXNQb2ludEluQXJlYSh0KXtyZXR1cm4gX2lzUG9pbnRJbkFyZWEodCx0aGlzLmNoYXJ0QXJlYSx0aGlzLl9taW5QYWRkaW5nKX1nZXRFbGVtZW50c0F0RXZlbnRGb3JNb2RlKHQsZSxpLGEpe2NvbnN0IHM9SW50ZXJhY3Rpb24ubW9kZXNbZV07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHM/cyh0aGlzLHQsaSxhKTpbXX1nZXREYXRhc2V0TWV0YSh0KXtjb25zdCBlPXRoaXMuZGF0YS5kYXRhc2V0c1t0XSxpPXRoaXMuX21ldGFzZXRzO2xldCBhPWkuZmlsdGVyKHQ9PnQmJnQuX2RhdGFzZXQ9PT1lKS5wb3AoKTtyZXR1cm4gYXx8KGE9e3R5cGU6bnVsbCxkYXRhOltdLGRhdGFzZXQ6bnVsbCxjb250cm9sbGVyOm51bGwsaGlkZGVuOm51bGwseEF4aXNJRDpudWxsLHlBeGlzSUQ6bnVsbCxvcmRlcjplJiZlLm9yZGVyfHwwLGluZGV4OnQsX2RhdGFzZXQ6ZSxfcGFyc2VkOltdLF9zb3J0ZWQ6ITF9LGkucHVzaChhKSksYX1nZXRDb250ZXh0KCl7cmV0dXJuIHRoaXMuJGNvbnRleHR8fCh0aGlzLiRjb250ZXh0PWNyZWF0ZUNvbnRleHQobnVsbCx7Y2hhcnQ6dGhpcyx0eXBlOiJjaGFydCJ9KSl9Z2V0VmlzaWJsZURhdGFzZXRDb3VudCgpe3JldHVybiB0aGlzLmdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKS5sZW5ndGh9aXNEYXRhc2V0VmlzaWJsZSh0KXt2YXIgZT10aGlzLmRhdGEuZGF0YXNldHNbdF07aWYoIWUpcmV0dXJuITE7dD10aGlzLmdldERhdGFzZXRNZXRhKHQpO3JldHVybiJib29sZWFuIj09dHlwZW9mIHQuaGlkZGVuPyF0LmhpZGRlbjohZS5oaWRkZW59c2V0RGF0YXNldFZpc2liaWxpdHkodCxlKXtjb25zdCBpPXRoaXMuZ2V0RGF0YXNldE1ldGEodCk7aS5oaWRkZW49IWV9dG9nZ2xlRGF0YVZpc2liaWxpdHkodCl7dGhpcy5faGlkZGVuSW5kaWNlc1t0XT0hdGhpcy5faGlkZGVuSW5kaWNlc1t0XX1nZXREYXRhVmlzaWJpbGl0eSh0KXtyZXR1cm4hdGhpcy5faGlkZGVuSW5kaWNlc1t0XX1fdXBkYXRlVmlzaWJpbGl0eShlLHQsaSl7Y29uc3QgYT1pPyJzaG93IjoiaGlkZSIscz10aGlzLmdldERhdGFzZXRNZXRhKGUpLG49cy5jb250cm9sbGVyLl9yZXNvbHZlQW5pbWF0aW9ucyh2b2lkIDAsYSk7ZGVmaW5lZCh0KT8ocy5kYXRhW3RdLmhpZGRlbj0haSx0aGlzLnVwZGF0ZSgpKToodGhpcy5zZXREYXRhc2V0VmlzaWJpbGl0eShlLGkpLG4udXBkYXRlKHMse3Zpc2libGU6aX0pLHRoaXMudXBkYXRlKHQ9PnQuZGF0YXNldEluZGV4PT09ZT9hOnZvaWQgMCkpfWhpZGUodCxlKXt0aGlzLl91cGRhdGVWaXNpYmlsaXR5KHQsZSwhMSl9c2hvdyh0LGUpe3RoaXMuX3VwZGF0ZVZpc2liaWxpdHkodCxlLCEwKX1fZGVzdHJveURhdGFzZXRNZXRhKHQpe2NvbnN0IGU9dGhpcy5fbWV0YXNldHNbdF07ZSYmZS5jb250cm9sbGVyJiZlLmNvbnRyb2xsZXIuX2Rlc3Ryb3koKSxkZWxldGUgdGhpcy5fbWV0YXNldHNbdF19X3N0b3AoKXtsZXQgdCxlO2Zvcih0aGlzLnN0b3AoKSxhbmltYXRvci5yZW1vdmUodGhpcyksdD0wLGU9dGhpcy5kYXRhLmRhdGFzZXRzLmxlbmd0aDt0PGU7Kyt0KXRoaXMuX2Rlc3Ryb3lEYXRhc2V0TWV0YSh0KX1kZXN0cm95KCl7dGhpcy5ub3RpZnlQbHVnaW5zKCJiZWZvcmVEZXN0cm95Iik7dmFye2NhbnZhczp0LGN0eDplfT10aGlzO3RoaXMuX3N0b3AoKSx0aGlzLmNvbmZpZy5jbGVhckNhY2hlKCksdCYmKHRoaXMudW5iaW5kRXZlbnRzKCksY2xlYXJDYW52YXModCxlKSx0aGlzLnBsYXRmb3JtLnJlbGVhc2VDb250ZXh0KGUpLHRoaXMuY2FudmFzPW51bGwsdGhpcy5jdHg9bnVsbCksZGVsZXRlIGluc3RhbmNlc1t0aGlzLmlkXSx0aGlzLm5vdGlmeVBsdWdpbnMoImFmdGVyRGVzdHJveSIpfXRvQmFzZTY0SW1hZ2UoLi4udCl7cmV0dXJuIHRoaXMuY2FudmFzLnRvRGF0YVVSTCguLi50KX1iaW5kRXZlbnRzKCl7dGhpcy5iaW5kVXNlckV2ZW50cygpLHRoaXMub3B0aW9ucy5yZXNwb25zaXZlP3RoaXMuYmluZFJlc3BvbnNpdmVFdmVudHMoKTp0aGlzLmF0dGFjaGVkPSEwfWJpbmRVc2VyRXZlbnRzKCl7Y29uc3QgaT10aGlzLl9saXN0ZW5lcnMsYT10aGlzLnBsYXRmb3JtLGU9KHQsZSk9PnthLmFkZEV2ZW50TGlzdGVuZXIodGhpcyx0LGUpLGlbdF09ZX0scz0odCxlLGkpPT57dC5vZmZzZXRYPWUsdC5vZmZzZXRZPWksdGhpcy5fZXZlbnRIYW5kbGVyKHQpfTtlYWNoKHRoaXMub3B0aW9ucy5ldmVudHMsdD0+ZSh0LHMpKX1iaW5kUmVzcG9uc2l2ZUV2ZW50cygpe3RoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnN8fCh0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzPXt9KTtjb25zdCBpPXRoaXMuX3Jlc3BvbnNpdmVMaXN0ZW5lcnMsYT10aGlzLnBsYXRmb3JtLHQ9KHQsZSk9PnthLmFkZEV2ZW50TGlzdGVuZXIodGhpcyx0LGUpLGlbdF09ZX0sZT0odCxlKT0+e2lbdF0mJihhLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcyx0LGUpLGRlbGV0ZSBpW3RdKX0scz0odCxlKT0+e3RoaXMuY2FudmFzJiZ0aGlzLnJlc2l6ZSh0LGUpfTtsZXQgbjtjb25zdCByPSgpPT57ZSgiYXR0YWNoIixyKSx0aGlzLmF0dGFjaGVkPSEwLHRoaXMucmVzaXplKCksdCgicmVzaXplIixzKSx0KCJkZXRhY2giLG4pfTtuPSgpPT57dGhpcy5hdHRhY2hlZD0hMSxlKCJyZXNpemUiLHMpLHRoaXMuX3N0b3AoKSx0aGlzLl9yZXNpemUoMCwwKSx0KCJhdHRhY2giLHIpfSwoYS5pc0F0dGFjaGVkKHRoaXMuY2FudmFzKT9yOm4pKCl9dW5iaW5kRXZlbnRzKCl7ZWFjaCh0aGlzLl9saXN0ZW5lcnMsKHQsZSk9Pnt0aGlzLnBsYXRmb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcyxlLHQpfSksdGhpcy5fbGlzdGVuZXJzPXt9LGVhY2godGhpcy5fcmVzcG9uc2l2ZUxpc3RlbmVycywodCxlKT0+e3RoaXMucGxhdGZvcm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLGUsdCl9KSx0aGlzLl9yZXNwb25zaXZlTGlzdGVuZXJzPXZvaWQgMH11cGRhdGVIb3ZlclN0eWxlKHQsZSxpKXt2YXIgYT1pPyJzZXQiOiJyZW1vdmUiO2xldCBzLG4scixvO2ZvcigiZGF0YXNldCI9PT1lJiYocz10aGlzLmdldERhdGFzZXRNZXRhKHRbMF0uZGF0YXNldEluZGV4KSkuY29udHJvbGxlclsiXyIrYSsiRGF0YXNldEhvdmVyU3R5bGUiXSgpLHI9MCxvPXQubGVuZ3RoO3I8bzsrK3Ipe2NvbnN0IGw9KG49dFtyXSkmJnRoaXMuZ2V0RGF0YXNldE1ldGEobi5kYXRhc2V0SW5kZXgpLmNvbnRyb2xsZXI7bCYmbFthKyJIb3ZlclN0eWxlIl0obi5lbGVtZW50LG4uZGF0YXNldEluZGV4LG4uaW5kZXgpfX1nZXRBY3RpdmVFbGVtZW50cygpe3JldHVybiB0aGlzLl9hY3RpdmV8fFtdfXNldEFjdGl2ZUVsZW1lbnRzKHQpe3ZhciBlPXRoaXMuX2FjdGl2ZXx8W10sdD10Lm1hcCgoe2RhdGFzZXRJbmRleDp0LGluZGV4OmV9KT0+e3ZhciBpPXRoaXMuZ2V0RGF0YXNldE1ldGEodCk7aWYoaSlyZXR1cm57ZGF0YXNldEluZGV4OnQsZWxlbWVudDppLmRhdGFbZV0saW5kZXg6ZX07dGhyb3cgbmV3IEVycm9yKCJObyBkYXRhc2V0IGZvdW5kIGF0IGluZGV4ICIrdCl9KTtfZWxlbWVudHNFcXVhbCh0LGUpfHwodGhpcy5fYWN0aXZlPXQsdGhpcy5fbGFzdEV2ZW50PW51bGwsdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXModCxlKSl9bm90aWZ5UGx1Z2lucyh0LGUsaSl7cmV0dXJuIHRoaXMuX3BsdWdpbnMubm90aWZ5KHRoaXMsdCxlLGkpfWlzUGx1Z2luRW5hYmxlZChlKXtyZXR1cm4gMT09PXRoaXMuX3BsdWdpbnMuX2NhY2hlLmZpbHRlcih0PT50LnBsdWdpbi5pZD09PWUpLmxlbmd0aH1fdXBkYXRlSG92ZXJTdHlsZXModCxlLGkpe3ZhciBhPXRoaXMub3B0aW9ucy5ob3ZlcixzPSh0LGkpPT50LmZpbHRlcihlPT4haS5zb21lKHQ9PmUuZGF0YXNldEluZGV4PT09dC5kYXRhc2V0SW5kZXgmJmUuaW5kZXg9PT10LmluZGV4KSksbj1zKGUsdCksaT1pP3Q6cyh0LGUpO24ubGVuZ3RoJiZ0aGlzLnVwZGF0ZUhvdmVyU3R5bGUobixhLm1vZGUsITEpLGkubGVuZ3RoJiZhLm1vZGUmJnRoaXMudXBkYXRlSG92ZXJTdHlsZShpLGEubW9kZSwhMCl9X2V2ZW50SGFuZGxlcihlLHQpe2NvbnN0IGk9e2V2ZW50OmUscmVwbGF5OnQsY2FuY2VsYWJsZTohMCxpbkNoYXJ0QXJlYTp0aGlzLmlzUG9pbnRJbkFyZWEoZSl9O3ZhciBhPXQ9Pih0Lm9wdGlvbnMuZXZlbnRzfHx0aGlzLm9wdGlvbnMuZXZlbnRzKS5pbmNsdWRlcyhlLm5hdGl2ZS50eXBlKTtpZighMSE9PXRoaXMubm90aWZ5UGx1Z2lucygiYmVmb3JlRXZlbnQiLGksYSkpcmV0dXJuIHQ9dGhpcy5faGFuZGxlRXZlbnQoZSx0LGkuaW5DaGFydEFyZWEpLGkuY2FuY2VsYWJsZT0hMSx0aGlzLm5vdGlmeVBsdWdpbnMoImFmdGVyRXZlbnQiLGksYSksKHR8fGkuY2hhbmdlZCkmJnRoaXMucmVuZGVyKCksdGhpc31faGFuZGxlRXZlbnQodCxlLGkpe3ZhcntfYWN0aXZlOmE9W10sb3B0aW9uczpzfT10aGlzLG49dGhpcy5fZ2V0QWN0aXZlRWxlbWVudHModCxhLGksZSkscj1faXNDbGlja0V2ZW50KHQpLG89ZGV0ZXJtaW5lTGFzdEV2ZW50KHQsdGhpcy5fbGFzdEV2ZW50LGksciksaT0oaSYmKHRoaXMuX2xhc3RFdmVudD1udWxsLGNhbGxiYWNrKHMub25Ib3ZlcixbdCxuLHRoaXNdLHRoaXMpLHImJmNhbGxiYWNrKHMub25DbGljayxbdCxuLHRoaXNdLHRoaXMpKSwhX2VsZW1lbnRzRXF1YWwobixhKSk7cmV0dXJuKGl8fGUpJiYodGhpcy5fYWN0aXZlPW4sdGhpcy5fdXBkYXRlSG92ZXJTdHlsZXMobixhLGUpKSx0aGlzLl9sYXN0RXZlbnQ9byxpfV9nZXRBY3RpdmVFbGVtZW50cyh0LGUsaSxhKXtpZigibW91c2VvdXQiPT09dC50eXBlKXJldHVybltdO2lmKCFpKXJldHVybiBlO2k9dGhpcy5vcHRpb25zLmhvdmVyO3JldHVybiB0aGlzLmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUodCxpLm1vZGUsaSxhKX19ZnVuY3Rpb24gaW52YWxpZGF0ZVBsdWdpbnMoKXtyZXR1cm4gZWFjaChDaGFydC5pbnN0YW5jZXMsdD0+dC5fcGx1Z2lucy5pbnZhbGlkYXRlKCkpfWZ1bmN0aW9uIGNsaXBBcmModCxlLGkpe3ZhcntzdGFydEFuZ2xlOmUscGl4ZWxNYXJnaW46YSx4OnMseTpuLG91dGVyUmFkaXVzOnIsaW5uZXJSYWRpdXM6b309ZSxsPWEvcjt0LmJlZ2luUGF0aCgpLHQuYXJjKHMsbixyLGUtbCxpK2wpLGE8bz90LmFyYyhzLG4sbyxpKyhsPWEvbyksZS1sLCEwKTp0LmFyYyhzLG4sYSxpK0hBTEZfUEksZS1IQUxGX1BJKSx0LmNsb3NlUGF0aCgpLHQuY2xpcCgpfWZ1bmN0aW9uIHRvUmFkaXVzQ29ybmVycyh0KXtyZXR1cm4gX3JlYWRWYWx1ZVRvUHJvcHModCxbIm91dGVyU3RhcnQiLCJvdXRlckVuZCIsImlubmVyU3RhcnQiLCJpbm5lckVuZCJdKX1mdW5jdGlvbiBwYXJzZUJvcmRlclJhZGl1cyQxKHQsZSxpLGEpe3Q9dG9SYWRpdXNDb3JuZXJzKHQub3B0aW9ucy5ib3JkZXJSYWRpdXMpO2NvbnN0IHM9KGktZSkvMjt2YXIgZT1NYXRoLm1pbihzLGEqZS8yKSxuPXQ9Pnt2YXIgZT0oaS1NYXRoLm1pbihzLHQpKSphLzI7cmV0dXJuIF9saW1pdFZhbHVlKHQsMCxNYXRoLm1pbihzLGUpKX07cmV0dXJue291dGVyU3RhcnQ6bih0Lm91dGVyU3RhcnQpLG91dGVyRW5kOm4odC5vdXRlckVuZCksaW5uZXJTdGFydDpfbGltaXRWYWx1ZSh0LmlubmVyU3RhcnQsMCxlKSxpbm5lckVuZDpfbGltaXRWYWx1ZSh0LmlubmVyRW5kLDAsZSl9fWZ1bmN0aW9uIHJUaGV0YVRvWFkodCxlLGksYSl7cmV0dXJue3g6aSt0Kk1hdGguY29zKGUpLHk6YSt0Kk1hdGguc2luKGUpfX1mdW5jdGlvbiBwYXRoQXJjKHQsZSxpLGEscyxuKXt2YXJ7eDpyLHk6byxzdGFydEFuZ2xlOmwscGl4ZWxNYXJnaW46aCxpbm5lclJhZGl1czpkfT1lLGM9TWF0aC5tYXgoZS5vdXRlclJhZGl1cythK2ktaCwwKSxoPTA8ZD9kK2EraStoOjA7bGV0IHU9MDt2YXIgZz1zLWwsZD0oYSYmKGQ9KCgwPGQ/ZC1hOjApKygwPGM/Yy1hOjApKS8yLHU9KGctKDAhPWQ/ZypkLyhkK2EpOmcpKS8yKSxNYXRoLm1heCguMDAxLGcqYy1pL1BJKS9jKSxhPShnLWQpLzIsaT1sK2ErdSxnPXMtYS11LHtvdXRlclN0YXJ0OmQsb3V0ZXJFbmQ6bCxpbm5lclN0YXJ0OnMsaW5uZXJFbmQ6YX09cGFyc2VCb3JkZXJSYWRpdXMkMShlLGgsYyxnLWkpLGU9Yy1kLHA9Yy1sLGY9aStkL2UsbT1nLWwvcCx2PWgrcyx4PWgrYSxiPWkrcy92LF89Zy1hL3g7dC5iZWdpblBhdGgoKSxuPyh0LmFyYyhyLG8sYyxmLG49KGYrbSkvMiksdC5hcmMocixvLGMsbixtKSwwPGwmJihuPXJUaGV0YVRvWFkocCxtLHIsbyksdC5hcmMobi54LG4ueSxsLG0sZytIQUxGX1BJKSkscD1yVGhldGFUb1hZKHgsZyxyLG8pLHQubGluZVRvKHAueCxwLnkpLDA8YSYmKG49clRoZXRhVG9YWSh4LF8scixvKSx0LmFyYyhuLngsbi55LGEsZytIQUxGX1BJLF8rTWF0aC5QSSkpLHQuYXJjKHIsbyxoLGctYS9oLGw9KGctYS9oKyhpK3MvaCkpLzIsITApLHQuYXJjKHIsbyxoLGwsaStzL2gsITApLDA8cyYmKHA9clRoZXRhVG9YWSh2LGIscixvKSx0LmFyYyhwLngscC55LHMsYitNYXRoLlBJLGktSEFMRl9QSSkpLHg9clRoZXRhVG9YWShlLGkscixvKSx0LmxpbmVUbyh4LngseC55KSwwPGQmJihuPXJUaGV0YVRvWFkoZSxmLHIsbyksdC5hcmMobi54LG4ueSxkLGktSEFMRl9QSSxmKSkpOih0Lm1vdmVUbyhyLG8pLF89TWF0aC5jb3MoZikqYytyLGc9TWF0aC5zaW4oZikqYytvLHQubGluZVRvKF8sZyksYT1NYXRoLmNvcyhtKSpjK3IsbD1NYXRoLnNpbihtKSpjK28sdC5saW5lVG8oYSxsKSksdC5jbG9zZVBhdGgoKX1mdW5jdGlvbiBkcmF3QXJjKGUsdCxpLGEscyl7dmFye2Z1bGxDaXJjbGVzOm4sc3RhcnRBbmdsZTpyLGNpcmN1bWZlcmVuY2U6b309dDtsZXQgbD10LmVuZEFuZ2xlO2lmKG4pe3BhdGhBcmMoZSx0LGksYSxsLHMpO2ZvcihsZXQgdD0wO3Q8bjsrK3QpZS5maWxsKCk7aXNOYU4obyl8fChsPXIrKG8lVEFVfHxUQVUpKX1yZXR1cm4gcGF0aEFyYyhlLHQsaSxhLGwscyksZS5maWxsKCksbH1mdW5jdGlvbiBkcmF3Qm9yZGVyKGUsaSxhLHMsbil7dmFye2Z1bGxDaXJjbGVzOnIsc3RhcnRBbmdsZTpvLGNpcmN1bWZlcmVuY2U6bCxvcHRpb25zOmh9PWkse2JvcmRlcldpZHRoOmQsYm9yZGVySm9pblN0eWxlOmMsYm9yZGVyRGFzaDp1LGJvcmRlckRhc2hPZmZzZXQ6Z309aCxoPSJpbm5lciI9PT1oLmJvcmRlckFsaWduO2lmKGQpe2Uuc2V0TGluZURhc2godXx8W10pLGUubGluZURhc2hPZmZzZXQ9ZyxoPyhlLmxpbmVXaWR0aD0yKmQsZS5saW5lSm9pbj1jfHwicm91bmQiKTooZS5saW5lV2lkdGg9ZCxlLmxpbmVKb2luPWN8fCJiZXZlbCIpO2xldCB0PWkuZW5kQW5nbGU7aWYocil7cGF0aEFyYyhlLGksYSxzLHQsbik7Zm9yKGxldCB0PTA7dDxyOysrdCllLnN0cm9rZSgpO2lzTmFOKGwpfHwodD1vKyhsJVRBVXx8VEFVKSl9aCYmY2xpcEFyYyhlLGksdCkscnx8KHBhdGhBcmMoZSxpLGEscyx0LG4pLGUuc3Ryb2tlKCkpfX1jbGFzcyBBcmNFbGVtZW50IGV4dGVuZHMgRWxlbWVudHtzdGF0aWMgaWQ9ImFyYyI7c3RhdGljIGRlZmF1bHRzPXtib3JkZXJBbGlnbjoiY2VudGVyIixib3JkZXJDb2xvcjoiI2ZmZiIsYm9yZGVyRGFzaDpbXSxib3JkZXJEYXNoT2Zmc2V0OjAsYm9yZGVySm9pblN0eWxlOnZvaWQgMCxib3JkZXJSYWRpdXM6MCxib3JkZXJXaWR0aDoyLG9mZnNldDowLHNwYWNpbmc6MCxhbmdsZTp2b2lkIDAsY2lyY3VsYXI6ITB9O3N0YXRpYyBkZWZhdWx0Um91dGVzPXtiYWNrZ3JvdW5kQ29sb3I6ImJhY2tncm91bmRDb2xvciJ9O3N0YXRpYyBkZXNjcmlwdG9ycz17X3NjcmlwdGFibGU6ITAsX2luZGV4YWJsZTp0PT4iYm9yZGVyRGFzaCIhPT10fTtjaXJjdW1mZXJlbmNlO2VuZEFuZ2xlO2Z1bGxDaXJjbGVzO2lubmVyUmFkaXVzO291dGVyUmFkaXVzO3BpeGVsTWFyZ2luO3N0YXJ0QW5nbGU7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLm9wdGlvbnM9dm9pZCAwLHRoaXMuY2lyY3VtZmVyZW5jZT12b2lkIDAsdGhpcy5zdGFydEFuZ2xlPXZvaWQgMCx0aGlzLmVuZEFuZ2xlPXZvaWQgMCx0aGlzLmlubmVyUmFkaXVzPXZvaWQgMCx0aGlzLm91dGVyUmFkaXVzPXZvaWQgMCx0aGlzLnBpeGVsTWFyZ2luPTAsdGhpcy5mdWxsQ2lyY2xlcz0wLHQmJk9iamVjdC5hc3NpZ24odGhpcyx0KX1pblJhbmdlKHQsZSxpKXt2YXIgYT10aGlzLmdldFByb3BzKFsieCIsInkiXSxpKSx7YW5nbGU6YSxkaXN0YW5jZTp0fT1nZXRBbmdsZUZyb21Qb2ludChhLHt4OnQseTplfSkse3N0YXJ0QW5nbGU6ZSxlbmRBbmdsZTppLGlubmVyUmFkaXVzOnMsb3V0ZXJSYWRpdXM6bixjaXJjdW1mZXJlbmNlOnJ9PXRoaXMuZ2V0UHJvcHMoWyJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJpbm5lclJhZGl1cyIsIm91dGVyUmFkaXVzIiwiY2lyY3VtZmVyZW5jZSJdLGkpLG89KHRoaXMub3B0aW9ucy5zcGFjaW5nK3RoaXMub3B0aW9ucy5ib3JkZXJXaWR0aCkvMixyPXZhbHVlT3JEZWZhdWx0KHIsaS1lKSxyPVRBVTw9cnx8X2FuZ2xlQmV0d2VlbihhLGUsaSksYT1faXNCZXR3ZWVuKHQscytvLG4rbyk7cmV0dXJuIHImJmF9Z2V0Q2VudGVyUG9pbnQodCl7dmFye3g6dCx5OmUsc3RhcnRBbmdsZTppLGVuZEFuZ2xlOmEsaW5uZXJSYWRpdXM6cyxvdXRlclJhZGl1czpufT10aGlzLmdldFByb3BzKFsieCIsInkiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJpbm5lclJhZGl1cyIsIm91dGVyUmFkaXVzIl0sdCkse29mZnNldDpyLHNwYWNpbmc6b309dGhpcy5vcHRpb25zLGk9KGkrYSkvMixhPShzK24rbytyKS8yO3JldHVybnt4OnQrTWF0aC5jb3MoaSkqYSx5OmUrTWF0aC5zaW4oaSkqYX19dG9vbHRpcFBvc2l0aW9uKHQpe3JldHVybiB0aGlzLmdldENlbnRlclBvaW50KHQpfWRyYXcodCl7dmFyIGUse29wdGlvbnM6aSxjaXJjdW1mZXJlbmNlOmF9PXRoaXMscz0oaS5vZmZzZXR8fDApLzQsbj0oaS5zcGFjaW5nfHwwKS8yLHI9aS5jaXJjdWxhcjt0aGlzLnBpeGVsTWFyZ2luPSJpbm5lciI9PT1pLmJvcmRlckFsaWduPy4zMzowLHRoaXMuZnVsbENpcmNsZXM9VEFVPGE/TWF0aC5mbG9vcihhL1RBVSk6MCwwPT09YXx8dGhpcy5pbm5lclJhZGl1czwwfHx0aGlzLm91dGVyUmFkaXVzPDB8fCh0LnNhdmUoKSxlPSh0aGlzLnN0YXJ0QW5nbGUrdGhpcy5lbmRBbmdsZSkvMix0LnRyYW5zbGF0ZShNYXRoLmNvcyhlKSpzLE1hdGguc2luKGUpKnMpLGU9cyooMS1NYXRoLnNpbihNYXRoLm1pbihQSSxhfHwwKSkpLHQuZmlsbFN0eWxlPWkuYmFja2dyb3VuZENvbG9yLHQuc3Ryb2tlU3R5bGU9aS5ib3JkZXJDb2xvcixkcmF3QXJjKHQsdGhpcyxlLG4sciksZHJhd0JvcmRlcih0LHRoaXMsZSxuLHIpLHQucmVzdG9yZSgpKX19ZnVuY3Rpb24gc2V0U3R5bGUodCxlLGk9ZSl7dC5saW5lQ2FwPXZhbHVlT3JEZWZhdWx0KGkuYm9yZGVyQ2FwU3R5bGUsZS5ib3JkZXJDYXBTdHlsZSksdC5zZXRMaW5lRGFzaCh2YWx1ZU9yRGVmYXVsdChpLmJvcmRlckRhc2gsZS5ib3JkZXJEYXNoKSksdC5saW5lRGFzaE9mZnNldD12YWx1ZU9yRGVmYXVsdChpLmJvcmRlckRhc2hPZmZzZXQsZS5ib3JkZXJEYXNoT2Zmc2V0KSx0LmxpbmVKb2luPXZhbHVlT3JEZWZhdWx0KGkuYm9yZGVySm9pblN0eWxlLGUuYm9yZGVySm9pblN0eWxlKSx0LmxpbmVXaWR0aD12YWx1ZU9yRGVmYXVsdChpLmJvcmRlcldpZHRoLGUuYm9yZGVyV2lkdGgpLHQuc3Ryb2tlU3R5bGU9dmFsdWVPckRlZmF1bHQoaS5ib3JkZXJDb2xvcixlLmJvcmRlckNvbG9yKX1mdW5jdGlvbiBsaW5lVG8odCxlLGkpe3QubGluZVRvKGkueCxpLnkpfWZ1bmN0aW9uIGdldExpbmVNZXRob2QodCl7cmV0dXJuIHQuc3RlcHBlZD9fc3RlcHBlZExpbmVUbzp0LnRlbnNpb258fCJtb25vdG9uZSI9PT10LmN1YmljSW50ZXJwb2xhdGlvbk1vZGU/X2JlemllckN1cnZlVG86bGluZVRvfWZ1bmN0aW9uIHBhdGhWYXJzKHQsZSxpPXt9KXt2YXIgdD10Lmxlbmd0aCx7c3RhcnQ6aT0wLGVuZDphPXQtMX09aSx7c3RhcnQ6cyxlbmQ6bn09ZSxyPU1hdGgubWF4KGkscyksbz1NYXRoLm1pbihhLG4pO3JldHVybntjb3VudDp0LHN0YXJ0OnIsbG9vcDplLmxvb3AsaWxlbjpvPHImJiEoaTxzJiZhPHN8fG48aSYmbjxhKT90K28tcjpvLXJ9fWZ1bmN0aW9uIHBhdGhTZWdtZW50KHQsZSxpLGEpe3Zhcntwb2ludHM6cyxvcHRpb25zOm59PWUse2NvdW50OnIsc3RhcnQ6byxsb29wOmUsaWxlbjpsfT1wYXRoVmFycyhzLGksYSk7Y29uc3QgaD1nZXRMaW5lTWV0aG9kKG4pO2xldHttb3ZlOmQ9ITAscmV2ZXJzZTpjfT1hfHx7fSx1LGcscDtmb3IodT0wO3U8PWw7Kyt1KShnPXNbKG8rKGM/bC11OnUpKSVyXSkuc2tpcHx8KGQ/KHQubW92ZVRvKGcueCxnLnkpLGQ9ITEpOmgodCxwLGcsYyxuLnN0ZXBwZWQpLHA9Zyk7cmV0dXJuIGUmJihnPXNbKG8rKGM/bDowKSklcl0saCh0LHAsZyxjLG4uc3RlcHBlZCkpLCEhZX1mdW5jdGlvbiBmYXN0UGF0aFNlZ21lbnQodCxlLGksYSl7dmFyIHM9ZS5wb2ludHM7Y29uc3R7Y291bnQ6bixzdGFydDpyLGlsZW46b309cGF0aFZhcnMocyxpLGEpLHttb3ZlOmw9ITAscmV2ZXJzZTpofT1hfHx7fTtsZXQgZD0wLGM9MCx1LGcscCxmLG0sdjt2YXIgeCxiLF8seT10PT4ocisoaD9vLXQ6dCkpJW4saz0oKT0+e2YhPT1tJiYodC5saW5lVG8oZCxtKSx0LmxpbmVUbyhkLGYpLHQubGluZVRvKGQsdikpfTtmb3IobCYmKGc9c1t5KDApXSx0Lm1vdmVUbyhnLngsZy55KSksdT0wO3U8PW87Kyt1KShnPXNbeSh1KV0pLnNraXB8fCh4PWcueCxiPWcueSwoXz0wfHgpPT09cD8oYjxmP2Y9YjpiPm0mJihtPWIpLGQ9KGMqZCt4KS8rK2MpOihrKCksdC5saW5lVG8oeCxiKSxwPV8sYz0wLGY9bT1iKSx2PWIpO2soKX1mdW5jdGlvbiBfZ2V0U2VnbWVudE1ldGhvZCh0KXt2YXIgZT10Lm9wdGlvbnMsaT1lLmJvcmRlckRhc2gmJmUuYm9yZGVyRGFzaC5sZW5ndGg7cmV0dXJuISh0Ll9kZWNpbWF0ZWR8fHQuX2xvb3B8fGUudGVuc2lvbnx8Im1vbm90b25lIj09PWUuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZXx8ZS5zdGVwcGVkfHxpKT9mYXN0UGF0aFNlZ21lbnQ6cGF0aFNlZ21lbnR9ZnVuY3Rpb24gX2dldEludGVycG9sYXRpb25NZXRob2QodCl7cmV0dXJuIHQuc3RlcHBlZD9fc3RlcHBlZEludGVycG9sYXRpb246dC50ZW5zaW9ufHwibW9ub3RvbmUiPT09dC5jdWJpY0ludGVycG9sYXRpb25Nb2RlP19iZXppZXJJbnRlcnBvbGF0aW9uOl9wb2ludEluTGluZX1mdW5jdGlvbiBzdHJva2VQYXRoV2l0aENhY2hlKHQsZSxpLGEpe2xldCBzPWUuX3BhdGg7c3x8KHM9ZS5fcGF0aD1uZXcgUGF0aDJELGUucGF0aChzLGksYSkmJnMuY2xvc2VQYXRoKCkpLHNldFN0eWxlKHQsZS5vcHRpb25zKSx0LnN0cm9rZShzKX1mdW5jdGlvbiBzdHJva2VQYXRoRGlyZWN0KHQsZSxpLGEpe3ZhcntzZWdtZW50czpzLG9wdGlvbnM6bn09ZTtjb25zdCByPV9nZXRTZWdtZW50TWV0aG9kKGUpO2Zvcihjb25zdCBvIG9mIHMpc2V0U3R5bGUodCxuLG8uc3R5bGUpLHQuYmVnaW5QYXRoKCkscih0LGUsbyx7c3RhcnQ6aSxlbmQ6aSthLTF9KSYmdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfWNvbnN0IHVzZVBhdGgyRD0iZnVuY3Rpb24iPT10eXBlb2YgUGF0aDJEO2Z1bmN0aW9uIGRyYXcodCxlLGksYSl7KHVzZVBhdGgyRCYmIWUub3B0aW9ucy5zZWdtZW50P3N0cm9rZVBhdGhXaXRoQ2FjaGU6c3Ryb2tlUGF0aERpcmVjdCkodCxlLGksYSl9Y2xhc3MgTGluZUVsZW1lbnQgZXh0ZW5kcyBFbGVtZW50e3N0YXRpYyBpZD0ibGluZSI7c3RhdGljIGRlZmF1bHRzPXtib3JkZXJDYXBTdHlsZToiYnV0dCIsYm9yZGVyRGFzaDpbXSxib3JkZXJEYXNoT2Zmc2V0OjAsYm9yZGVySm9pblN0eWxlOiJtaXRlciIsYm9yZGVyV2lkdGg6MyxjYXBCZXppZXJQb2ludHM6ITAsY3ViaWNJbnRlcnBvbGF0aW9uTW9kZToiZGVmYXVsdCIsZmlsbDohMSxzcGFuR2FwczohMSxzdGVwcGVkOiExLHRlbnNpb246MH07c3RhdGljIGRlZmF1bHRSb3V0ZXM9e2JhY2tncm91bmRDb2xvcjoiYmFja2dyb3VuZENvbG9yIixib3JkZXJDb2xvcjoiYm9yZGVyQ29sb3IifTtzdGF0aWMgZGVzY3JpcHRvcnM9e19zY3JpcHRhYmxlOiEwLF9pbmRleGFibGU6dD0+ImJvcmRlckRhc2giIT09dCYmImZpbGwiIT09dH07Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLmFuaW1hdGVkPSEwLHRoaXMub3B0aW9ucz12b2lkIDAsdGhpcy5fY2hhcnQ9dm9pZCAwLHRoaXMuX2xvb3A9dm9pZCAwLHRoaXMuX2Z1bGxMb29wPXZvaWQgMCx0aGlzLl9wYXRoPXZvaWQgMCx0aGlzLl9wb2ludHM9dm9pZCAwLHRoaXMuX3NlZ21lbnRzPXZvaWQgMCx0aGlzLl9kZWNpbWF0ZWQ9ITEsdGhpcy5fcG9pbnRzVXBkYXRlZD0hMSx0aGlzLl9kYXRhc2V0SW5kZXg9dm9pZCAwLHQmJk9iamVjdC5hc3NpZ24odGhpcyx0KX11cGRhdGVDb250cm9sUG9pbnRzKHQsZSl7dmFyIGksYT10aGlzLm9wdGlvbnM7IWEudGVuc2lvbiYmIm1vbm90b25lIiE9PWEuY3ViaWNJbnRlcnBvbGF0aW9uTW9kZXx8YS5zdGVwcGVkfHx0aGlzLl9wb2ludHNVcGRhdGVkfHwoaT1hLnNwYW5HYXBzP3RoaXMuX2xvb3A6dGhpcy5fZnVsbExvb3AsX3VwZGF0ZUJlemllckNvbnRyb2xQb2ludHModGhpcy5fcG9pbnRzLGEsdCxpLGUpLHRoaXMuX3BvaW50c1VwZGF0ZWQ9ITApfXNldCBwb2ludHModCl7dGhpcy5fcG9pbnRzPXQsZGVsZXRlIHRoaXMuX3NlZ21lbnRzLGRlbGV0ZSB0aGlzLl9wYXRoLHRoaXMuX3BvaW50c1VwZGF0ZWQ9ITF9Z2V0IHBvaW50cygpe3JldHVybiB0aGlzLl9wb2ludHN9Z2V0IHNlZ21lbnRzKCl7cmV0dXJuIHRoaXMuX3NlZ21lbnRzfHwodGhpcy5fc2VnbWVudHM9X2NvbXB1dGVTZWdtZW50cyh0aGlzLHRoaXMub3B0aW9ucy5zZWdtZW50KSl9Zmlyc3QoKXt2YXIgdD10aGlzLnNlZ21lbnRzLGU9dGhpcy5wb2ludHM7cmV0dXJuIHQubGVuZ3RoJiZlW3RbMF0uc3RhcnRdfWxhc3QoKXt2YXIgdD10aGlzLnNlZ21lbnRzLGU9dGhpcy5wb2ludHMsaT10Lmxlbmd0aDtyZXR1cm4gaSYmZVt0W2ktMV0uZW5kXX1pbnRlcnBvbGF0ZShpLGEpe3ZhciBzPXRoaXMub3B0aW9ucyxuPWlbYV0scj10aGlzLnBvaW50cyxvPV9ib3VuZFNlZ21lbnRzKHRoaXMse3Byb3BlcnR5OmEsc3RhcnQ6bixlbmQ6bn0pO2lmKG8ubGVuZ3RoKXtjb25zdCBjPVtdLHU9X2dldEludGVycG9sYXRpb25NZXRob2Qocyk7bGV0IHQsZTtmb3IodD0wLGU9by5sZW5ndGg7dDxlOysrdCl7dmFye3N0YXJ0OmwsZW5kOmh9PW9bdF0sbD1yW2xdLGg9cltoXTtpZihsPT09aCljLnB1c2gobCk7ZWxzZXt2YXIgZD1NYXRoLmFicygobi1sW2FdKS8oaFthXS1sW2FdKSk7Y29uc3QgZz11KGwsaCxkLHMuc3RlcHBlZCk7Z1thXT1pW2FdLGMucHVzaChnKX19cmV0dXJuIDE9PT1jLmxlbmd0aD9jWzBdOmN9fXBhdGhTZWdtZW50KHQsZSxpKXtjb25zdCBhPV9nZXRTZWdtZW50TWV0aG9kKHRoaXMpO3JldHVybiBhKHQsdGhpcyxlLGkpfXBhdGgodCxlLGkpe3ZhciBhPXRoaXMuc2VnbWVudHM7Y29uc3Qgcz1fZ2V0U2VnbWVudE1ldGhvZCh0aGlzKTtsZXQgbj10aGlzLl9sb29wO2U9ZXx8MCxpPWl8fHRoaXMucG9pbnRzLmxlbmd0aC1lO2Zvcihjb25zdCByIG9mIGEpbiY9cyh0LHRoaXMscix7c3RhcnQ6ZSxlbmQ6ZStpLTF9KTtyZXR1cm4hIW59ZHJhdyh0LGUsaSxhKXt2YXIgcz10aGlzLm9wdGlvbnN8fHt9Oyh0aGlzLnBvaW50c3x8W10pLmxlbmd0aCYmcy5ib3JkZXJXaWR0aCYmKHQuc2F2ZSgpLGRyYXcodCx0aGlzLGksYSksdC5yZXN0b3JlKCkpLHRoaXMuYW5pbWF0ZWQmJih0aGlzLl9wb2ludHNVcGRhdGVkPSExLHRoaXMuX3BhdGg9dm9pZCAwKX19ZnVuY3Rpb24gaW5SYW5nZSQxKHQsZSxpLGEpe3ZhciBzPXQub3B0aW9ucyx7W2ldOnR9PXQuZ2V0UHJvcHMoW2ldLGEpO3JldHVybiBNYXRoLmFicyhlLXQpPHMucmFkaXVzK3MuaGl0UmFkaXVzfWNsYXNzIFBvaW50RWxlbWVudCBleHRlbmRzIEVsZW1lbnR7c3RhdGljIGlkPSJwb2ludCI7cGFyc2VkO3NraXA7c3RvcDtzdGF0aWMgZGVmYXVsdHM9e2JvcmRlcldpZHRoOjEsaGl0UmFkaXVzOjEsaG92ZXJCb3JkZXJXaWR0aDoxLGhvdmVyUmFkaXVzOjQscG9pbnRTdHlsZToiY2lyY2xlIixyYWRpdXM6Myxyb3RhdGlvbjowfTtzdGF0aWMgZGVmYXVsdFJvdXRlcz17YmFja2dyb3VuZENvbG9yOiJiYWNrZ3JvdW5kQ29sb3IiLGJvcmRlckNvbG9yOiJib3JkZXJDb2xvciJ9O2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5vcHRpb25zPXZvaWQgMCx0aGlzLnBhcnNlZD12b2lkIDAsdGhpcy5za2lwPXZvaWQgMCx0aGlzLnN0b3A9dm9pZCAwLHQmJk9iamVjdC5hc3NpZ24odGhpcyx0KX1pblJhbmdlKHQsZSxpKXt2YXIgYT10aGlzLm9wdGlvbnMse3g6aSx5OnN9PXRoaXMuZ2V0UHJvcHMoWyJ4IiwieSJdLGkpO3JldHVybiBNYXRoLnBvdyh0LWksMikrTWF0aC5wb3coZS1zLDIpPE1hdGgucG93KGEuaGl0UmFkaXVzK2EucmFkaXVzLDIpfWluWFJhbmdlKHQsZSl7cmV0dXJuIGluUmFuZ2UkMSh0aGlzLHQsIngiLGUpfWluWVJhbmdlKHQsZSl7cmV0dXJuIGluUmFuZ2UkMSh0aGlzLHQsInkiLGUpfWdldENlbnRlclBvaW50KHQpe3Zhcnt4OnQseTplfT10aGlzLmdldFByb3BzKFsieCIsInkiXSx0KTtyZXR1cm57eDp0LHk6ZX19c2l6ZSh0KXt2YXIgZT0odD10fHx0aGlzLm9wdGlvbnN8fHt9KS5yYWRpdXN8fDA7cmV0dXJuIDIqKChlPU1hdGgubWF4KGUsZSYmdC5ob3ZlclJhZGl1c3x8MCkpKyhlJiZ0LmJvcmRlcldpZHRofHwwKSl9ZHJhdyh0LGUpe3ZhciBpPXRoaXMub3B0aW9uczt0aGlzLnNraXB8fGkucmFkaXVzPC4xfHwhX2lzUG9pbnRJbkFyZWEodGhpcyxlLHRoaXMuc2l6ZShpKS8yKXx8KHQuc3Ryb2tlU3R5bGU9aS5ib3JkZXJDb2xvcix0LmxpbmVXaWR0aD1pLmJvcmRlcldpZHRoLHQuZmlsbFN0eWxlPWkuYmFja2dyb3VuZENvbG9yLGRyYXdQb2ludCh0LGksdGhpcy54LHRoaXMueSkpfWdldFJhbmdlKCl7dmFyIHQ9dGhpcy5vcHRpb25zfHx7fTtyZXR1cm4gdC5yYWRpdXMrdC5oaXRSYWRpdXN9fWZ1bmN0aW9uIGdldEJhckJvdW5kcyh0LGUpe3Zhcnt4OmUseTppLGJhc2U6YSx3aWR0aDpzLGhlaWdodDpufT10LmdldFByb3BzKFsieCIsInkiLCJiYXNlIiwid2lkdGgiLCJoZWlnaHQiXSxlKTtsZXQgcixvLGwsaCxkO3JldHVybiBoPXQuaG9yaXpvbnRhbD8oZD1uLzIscj1NYXRoLm1pbihlLGEpLG89TWF0aC5tYXgoZSxhKSxsPWktZCxpK2QpOihkPXMvMixyPWUtZCxvPWUrZCxsPU1hdGgubWluKGksYSksTWF0aC5tYXgoaSxhKSkse2xlZnQ6cix0b3A6bCxyaWdodDpvLGJvdHRvbTpofX1mdW5jdGlvbiBza2lwT3JMaW1pdCh0LGUsaSxhKXtyZXR1cm4gdD8wOl9saW1pdFZhbHVlKGUsaSxhKX1mdW5jdGlvbiBwYXJzZUJvcmRlcldpZHRoKHQsZSxpKXt2YXIgYT10Lm9wdGlvbnMuYm9yZGVyV2lkdGgsdD10LmJvcmRlclNraXBwZWQsYT10b1RSQkwoYSk7cmV0dXJue3Q6c2tpcE9yTGltaXQodC50b3AsYS50b3AsMCxpKSxyOnNraXBPckxpbWl0KHQucmlnaHQsYS5yaWdodCwwLGUpLGI6c2tpcE9yTGltaXQodC5ib3R0b20sYS5ib3R0b20sMCxpKSxsOnNraXBPckxpbWl0KHQubGVmdCxhLmxlZnQsMCxlKX19ZnVuY3Rpb24gcGFyc2VCb3JkZXJSYWRpdXModCxlLGkpe3ZhciBhPXQuZ2V0UHJvcHMoWyJlbmFibGVCb3JkZXJSYWRpdXMiXSlbImVuYWJsZUJvcmRlclJhZGl1cyJdLHM9dC5vcHRpb25zLmJvcmRlclJhZGl1cyxuPXRvVFJCTENvcm5lcnMocyksZT1NYXRoLm1pbihlLGkpLGk9dC5ib3JkZXJTa2lwcGVkLHQ9YXx8aXNPYmplY3Qocyk7cmV0dXJue3RvcExlZnQ6c2tpcE9yTGltaXQoIXR8fGkudG9wfHxpLmxlZnQsbi50b3BMZWZ0LDAsZSksdG9wUmlnaHQ6c2tpcE9yTGltaXQoIXR8fGkudG9wfHxpLnJpZ2h0LG4udG9wUmlnaHQsMCxlKSxib3R0b21MZWZ0OnNraXBPckxpbWl0KCF0fHxpLmJvdHRvbXx8aS5sZWZ0LG4uYm90dG9tTGVmdCwwLGUpLGJvdHRvbVJpZ2h0OnNraXBPckxpbWl0KCF0fHxpLmJvdHRvbXx8aS5yaWdodCxuLmJvdHRvbVJpZ2h0LDAsZSl9fWZ1bmN0aW9uIGJvdW5kaW5nUmVjdHModCl7dmFyIGU9Z2V0QmFyQm91bmRzKHQpLGk9ZS5yaWdodC1lLmxlZnQsYT1lLmJvdHRvbS1lLnRvcCxzPXBhcnNlQm9yZGVyV2lkdGgodCxpLzIsYS8yKSx0PXBhcnNlQm9yZGVyUmFkaXVzKHQsaS8yLGEvMik7cmV0dXJue291dGVyOnt4OmUubGVmdCx5OmUudG9wLHc6aSxoOmEscmFkaXVzOnR9LGlubmVyOnt4OmUubGVmdCtzLmwseTplLnRvcCtzLnQsdzppLXMubC1zLnIsaDphLXMudC1zLmIscmFkaXVzOnt0b3BMZWZ0Ok1hdGgubWF4KDAsdC50b3BMZWZ0LU1hdGgubWF4KHMudCxzLmwpKSx0b3BSaWdodDpNYXRoLm1heCgwLHQudG9wUmlnaHQtTWF0aC5tYXgocy50LHMucikpLGJvdHRvbUxlZnQ6TWF0aC5tYXgoMCx0LmJvdHRvbUxlZnQtTWF0aC5tYXgocy5iLHMubCkpLGJvdHRvbVJpZ2h0Ok1hdGgubWF4KDAsdC5ib3R0b21SaWdodC1NYXRoLm1heChzLmIscy5yKSl9fX19ZnVuY3Rpb24gaW5SYW5nZSh0LGUsaSxhKXt2YXIgcz1udWxsPT09ZSxuPW51bGw9PT1pLHQ9dCYmIShzJiZuKSYmZ2V0QmFyQm91bmRzKHQsYSk7cmV0dXJuIHQmJihzfHxfaXNCZXR3ZWVuKGUsdC5sZWZ0LHQucmlnaHQpKSYmKG58fF9pc0JldHdlZW4oaSx0LnRvcCx0LmJvdHRvbSkpfWZ1bmN0aW9uIGhhc1JhZGl1cyh0KXtyZXR1cm4gdC50b3BMZWZ0fHx0LnRvcFJpZ2h0fHx0LmJvdHRvbUxlZnR8fHQuYm90dG9tUmlnaHR9ZnVuY3Rpb24gYWRkTm9ybWFsUmVjdFBhdGgodCxlKXt0LnJlY3QoZS54LGUueSxlLncsZS5oKX1mdW5jdGlvbiBpbmZsYXRlUmVjdCh0LGUsaT17fSl7dmFyIGE9dC54IT09aS54Py1lOjAscz10LnkhPT1pLnk/LWU6MCxuPSh0LngrdC53IT09aS54K2kudz9lOjApLWEsaT0odC55K3QuaCE9PWkueStpLmg/ZTowKS1zO3JldHVybnt4OnQueCthLHk6dC55K3Msdzp0LncrbixoOnQuaCtpLHJhZGl1czp0LnJhZGl1c319Y2xhc3MgQmFyRWxlbWVudCBleHRlbmRzIEVsZW1lbnR7c3RhdGljIGlkPSJiYXIiO3N0YXRpYyBkZWZhdWx0cz17Ym9yZGVyU2tpcHBlZDoic3RhcnQiLGJvcmRlcldpZHRoOjAsYm9yZGVyUmFkaXVzOjAsaW5mbGF0ZUFtb3VudDoiYXV0byIscG9pbnRTdHlsZTp2b2lkIDB9O3N0YXRpYyBkZWZhdWx0Um91dGVzPXtiYWNrZ3JvdW5kQ29sb3I6ImJhY2tncm91bmRDb2xvciIsYm9yZGVyQ29sb3I6ImJvcmRlckNvbG9yIn07Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLm9wdGlvbnM9dm9pZCAwLHRoaXMuaG9yaXpvbnRhbD12b2lkIDAsdGhpcy5iYXNlPXZvaWQgMCx0aGlzLndpZHRoPXZvaWQgMCx0aGlzLmhlaWdodD12b2lkIDAsdGhpcy5pbmZsYXRlQW1vdW50PXZvaWQgMCx0JiZPYmplY3QuYXNzaWduKHRoaXMsdCl9ZHJhdyh0KXt2YXJ7aW5mbGF0ZUFtb3VudDplLG9wdGlvbnM6e2JvcmRlckNvbG9yOmksYmFja2dyb3VuZENvbG9yOmF9fT10aGlzLHtpbm5lcjpzLG91dGVyOm59PWJvdW5kaW5nUmVjdHModGhpcyk7Y29uc3Qgcj1oYXNSYWRpdXMobi5yYWRpdXMpP2FkZFJvdW5kZWRSZWN0UGF0aDphZGROb3JtYWxSZWN0UGF0aDt0LnNhdmUoKSxuLnc9PT1zLncmJm4uaD09PXMuaHx8KHQuYmVnaW5QYXRoKCkscih0LGluZmxhdGVSZWN0KG4sZSxzKSksdC5jbGlwKCkscih0LGluZmxhdGVSZWN0KHMsLWUsbikpLHQuZmlsbFN0eWxlPWksdC5maWxsKCJldmVub2RkIikpLHQuYmVnaW5QYXRoKCkscih0LGluZmxhdGVSZWN0KHMsZSkpLHQuZmlsbFN0eWxlPWEsdC5maWxsKCksdC5yZXN0b3JlKCl9aW5SYW5nZSh0LGUsaSl7cmV0dXJuIGluUmFuZ2UodGhpcyx0LGUsaSl9aW5YUmFuZ2UodCxlKXtyZXR1cm4gaW5SYW5nZSh0aGlzLHQsbnVsbCxlKX1pbllSYW5nZSh0LGUpe3JldHVybiBpblJhbmdlKHRoaXMsbnVsbCx0LGUpfWdldENlbnRlclBvaW50KHQpe3Zhcnt4OnQseTplLGJhc2U6aSxob3Jpem9udGFsOmF9PXRoaXMuZ2V0UHJvcHMoWyJ4IiwieSIsImJhc2UiLCJob3Jpem9udGFsIl0sdCk7cmV0dXJue3g6YT8odCtpKS8yOnQseTphP2U6KGUraSkvMn19Z2V0UmFuZ2UodCl7cmV0dXJuIngiPT09dD90aGlzLndpZHRoLzI6dGhpcy5oZWlnaHQvMn19dmFyIGVsZW1lbnRzPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLEFyY0VsZW1lbnQ6QXJjRWxlbWVudCxCYXJFbGVtZW50OkJhckVsZW1lbnQsTGluZUVsZW1lbnQ6TGluZUVsZW1lbnQsUG9pbnRFbGVtZW50OlBvaW50RWxlbWVudH0pO2NvbnN0IEJPUkRFUl9DT0xPUlM9WyJyZ2IoNTQsIDE2MiwgMjM1KSIsInJnYigyNTUsIDk5LCAxMzIpIiwicmdiKDI1NSwgMTU5LCA2NCkiLCJyZ2IoMjU1LCAyMDUsIDg2KSIsInJnYig3NSwgMTkyLCAxOTIpIiwicmdiKDE1MywgMTAyLCAyNTUpIiwicmdiKDIwMSwgMjAzLCAyMDcpIl0sQkFDS0dST1VORF9DT0xPUlM9Qk9SREVSX0NPTE9SUy5tYXAodD0+dC5yZXBsYWNlKCJyZ2IoIiwicmdiYSgiKS5yZXBsYWNlKCIpIiwiLCAwLjUpIikpO2Z1bmN0aW9uIGdldEJvcmRlckNvbG9yKHQpe3JldHVybiBCT1JERVJfQ09MT1JTW3QlQk9SREVSX0NPTE9SUy5sZW5ndGhdfWZ1bmN0aW9uIGdldEJhY2tncm91bmRDb2xvcih0KXtyZXR1cm4gQkFDS0dST1VORF9DT0xPUlNbdCVCQUNLR1JPVU5EX0NPTE9SUy5sZW5ndGhdfWZ1bmN0aW9uIGNvbG9yaXplRGVmYXVsdERhdGFzZXQodCxlKXtyZXR1cm4gdC5ib3JkZXJDb2xvcj1nZXRCb3JkZXJDb2xvcihlKSx0LmJhY2tncm91bmRDb2xvcj1nZXRCYWNrZ3JvdW5kQ29sb3IoZSksKytlfWZ1bmN0aW9uIGNvbG9yaXplRG91Z2hudXREYXRhc2V0KHQsZSl7cmV0dXJuIHQuYmFja2dyb3VuZENvbG9yPXQuZGF0YS5tYXAoKCk9PmdldEJvcmRlckNvbG9yKGUrKykpLGV9ZnVuY3Rpb24gY29sb3JpemVQb2xhckFyZWFEYXRhc2V0KHQsZSl7cmV0dXJuIHQuYmFja2dyb3VuZENvbG9yPXQuZGF0YS5tYXAoKCk9PmdldEJhY2tncm91bmRDb2xvcihlKyspKSxlfWZ1bmN0aW9uIGdldENvbG9yaXplcihpKXtsZXQgYT0wO3JldHVybih0LGUpPT57ZT1pLmdldERhdGFzZXRNZXRhKGUpLmNvbnRyb2xsZXI7ZSBpbnN0YW5jZW9mIERvdWdobnV0Q29udHJvbGxlcj9hPWNvbG9yaXplRG91Z2hudXREYXRhc2V0KHQsYSk6ZSBpbnN0YW5jZW9mIFBvbGFyQXJlYUNvbnRyb2xsZXI/YT1jb2xvcml6ZVBvbGFyQXJlYURhdGFzZXQodCxhKTplJiYoYT1jb2xvcml6ZURlZmF1bHREYXRhc2V0KHQsYSkpfX1mdW5jdGlvbiBjb250YWluc0NvbG9yc0RlZmluaXRpb25zKHQpe2xldCBlO2ZvcihlIGluIHQpaWYodFtlXS5ib3JkZXJDb2xvcnx8dFtlXS5iYWNrZ3JvdW5kQ29sb3IpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gY29udGFpbnNDb2xvcnNEZWZpbml0aW9uKHQpe3JldHVybiB0JiYodC5ib3JkZXJDb2xvcnx8dC5iYWNrZ3JvdW5kQ29sb3IpfXZhciBwbHVnaW5fY29sb3JzPXtpZDoiY29sb3JzIixkZWZhdWx0czp7ZW5hYmxlZDohMCxmb3JjZU92ZXJyaWRlOiExfSxiZWZvcmVMYXlvdXQodCxlLGkpe2lmKGkuZW5hYmxlZCl7Y29uc3R7ZGF0YTp7ZGF0YXNldHM6c30sb3B0aW9uczpufT10LmNvbmZpZzt2YXIgYT1uWyJlbGVtZW50cyJdOyFpLmZvcmNlT3ZlcnJpZGUmJihjb250YWluc0NvbG9yc0RlZmluaXRpb25zKHMpfHxjb250YWluc0NvbG9yc0RlZmluaXRpb24obil8fGEmJmNvbnRhaW5zQ29sb3JzRGVmaW5pdGlvbnMoYSkpfHwoaT1nZXRDb2xvcml6ZXIodCkscy5mb3JFYWNoKGkpKX19fTtmdW5jdGlvbiBsdHRiRGVjaW1hdGlvbihhLHMsbix0LGUpe3ZhciBpPWUuc2FtcGxlc3x8dDtpZihuPD1pKXJldHVybiBhLnNsaWNlKHMscytuKTtjb25zdCByPVtdO3ZhciBvPShuLTIpLyhpLTIpO2xldCBsPTA7ZT1zK24tMTtsZXQgaD1zLGQsYyx1LGcscDtmb3IocltsKytdPWFbaF0sZD0wO2Q8aS0yO2QrKyl7bGV0IHQ9MCxlPTAsaTt2YXIgZj1NYXRoLmZsb29yKChkKzEpKm8pKzErcyxtPU1hdGgubWluKE1hdGguZmxvb3IoKGQrMikqbykrMSxuKStzLHY9bS1mO2ZvcihpPWY7aTxtO2krKyl0Kz1hW2ldLngsZSs9YVtpXS55O3QvPXYsZS89djt2YXIgZj1NYXRoLmZsb29yKGQqbykrMStzLHg9TWF0aC5taW4oTWF0aC5mbG9vcigoZCsxKSpvKSsxLG4pK3Mse3g6Yix5Ol99PWFbaF07Zm9yKHU9LTEsaT1mO2k8eDtpKyspKGc9LjUqTWF0aC5hYnMoKGItdCkqKGFbaV0ueS1fKS0oYi1hW2ldLngpKihlLV8pKSk+dSYmKHU9ZyxjPWFbaV0scD1pKTtyW2wrK109YyxoPXB9cmV0dXJuIHJbbCsrXT1hW2VdLHJ9ZnVuY3Rpb24gbWluTWF4RGVjaW1hdGlvbih0LGUsaSxhKXtsZXQgcz0wLG49MCxyLG8sbCxoLGQsYyx1LGcscCxmO2NvbnN0IG09W107dmFyIHY9dFtlXS54LHg9dFtlK2ktMV0ueC12O2ZvcihyPWU7cjxlK2k7KytyKXtsPSgobz10W3JdKS54LXYpL3gqYSxoPW8ueTt2YXIgYixfLHksaz0wfGw7az09PWQ/KGg8cD8ocD1oLGM9cik6aD5mJiYoZj1oLHU9cikscz0obipzK28ueCkvKytuKTooYj1yLTEsaXNOdWxsT3JVbmRlZihjKXx8aXNOdWxsT3JVbmRlZih1KXx8KF89TWF0aC5taW4oYyx1KSx5PU1hdGgubWF4KGMsdSksXyE9PWcmJl8hPT1iJiZtLnB1c2goey4uLnRbX10seDpzfSkseSE9PWcmJnkhPT1iJiZtLnB1c2goey4uLnRbeV0seDpzfSkpLDA8ciYmYiE9PWcmJm0ucHVzaCh0W2JdKSxtLnB1c2gobyksZD1rLG49MCxwPWY9aCxjPXU9Zz1yKX1yZXR1cm4gbX1mdW5jdGlvbiBjbGVhbkRlY2ltYXRlZERhdGFzZXQodCl7dmFyIGU7dC5fZGVjaW1hdGVkJiYoZT10Ll9kYXRhLGRlbGV0ZSB0Ll9kZWNpbWF0ZWQsZGVsZXRlIHQuX2RhdGEsT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImRhdGEiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSkpfWZ1bmN0aW9uIGNsZWFuRGVjaW1hdGVkRGF0YSh0KXt0LmRhdGEuZGF0YXNldHMuZm9yRWFjaCh0PT57Y2xlYW5EZWNpbWF0ZWREYXRhc2V0KHQpfSl9ZnVuY3Rpb24gZ2V0U3RhcnRBbmRDb3VudE9mVmlzaWJsZVBvaW50c1NpbXBsaWZpZWQodCxlKXt2YXIgaT1lLmxlbmd0aDtsZXQgYT0wLHM7Y29uc3Qgbj10WyJpU2NhbGUiXTt2YXJ7bWluOnQsbWF4OnIsbWluRGVmaW5lZDpvLG1heERlZmluZWQ6bH09bi5nZXRVc2VyQm91bmRzKCk7cmV0dXJuIG8mJihhPV9saW1pdFZhbHVlKF9sb29rdXBCeUtleShlLG4uYXhpcyx0KS5sbywwLGktMSkpLHM9bD9fbGltaXRWYWx1ZShfbG9va3VwQnlLZXkoZSxuLmF4aXMscikuaGkrMSxhLGkpLWE6aS1hLHtzdGFydDphLGNvdW50OnN9fXZhciBwbHVnaW5fZGVjaW1hdGlvbj17aWQ6ImRlY2ltYXRpb24iLGRlZmF1bHRzOnthbGdvcml0aG06Im1pbi1tYXgiLGVuYWJsZWQ6ITF9LGJlZm9yZUVsZW1lbnRzVXBkYXRlOihvLHQsbCk9PntpZihsLmVuYWJsZWQpe2NvbnN0IGg9by53aWR0aDtvLmRhdGEuZGF0YXNldHMuZm9yRWFjaCgoZSx0KT0+e3ZhcntfZGF0YTppLGluZGV4QXhpczphfT1lLHQ9by5nZXREYXRhc2V0TWV0YSh0KSxzPWl8fGUuZGF0YTtpZigieSIhPT1yZXNvbHZlKFthLG8ub3B0aW9ucy5pbmRleEF4aXNdKSYmdC5jb250cm9sbGVyLnN1cHBvcnRzRGVjaW1hdGlvbil7YT1vLnNjYWxlc1t0LnhBeGlzSURdO2lmKCgibGluZWFyIj09PWEudHlwZXx8InRpbWUiPT09YS50eXBlKSYmIW8ub3B0aW9ucy5wYXJzaW5nKXt2YXJ7c3RhcnQ6bixjb3VudDpyfT1nZXRTdGFydEFuZENvdW50T2ZWaXNpYmxlUG9pbnRzU2ltcGxpZmllZCh0LHMpO2lmKHI8PShsLnRocmVzaG9sZHx8NCpoKSljbGVhbkRlY2ltYXRlZERhdGFzZXQoZSk7ZWxzZXtpc051bGxPclVuZGVmKGkpJiYoZS5fZGF0YT1zLGRlbGV0ZSBlLmRhdGEsT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImRhdGEiLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVjaW1hdGVkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGF0YT10fX0pKTtsZXQgdDtzd2l0Y2gobC5hbGdvcml0aG0pe2Nhc2UibHR0YiI6dD1sdHRiRGVjaW1hdGlvbihzLG4scixoLGwpO2JyZWFrO2Nhc2UibWluLW1heCI6dD1taW5NYXhEZWNpbWF0aW9uKHMsbixyLGgpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBkZWNpbWF0aW9uIGFsZ29yaXRobSAnJHtsLmFsZ29yaXRobX0nYCl9ZS5fZGVjaW1hdGVkPXR9fX19KX1lbHNlIGNsZWFuRGVjaW1hdGVkRGF0YShvKX0sZGVzdHJveSh0KXtjbGVhbkRlY2ltYXRlZERhdGEodCl9fTtmdW5jdGlvbiBfc2VnbWVudHModCxlLGkpe3ZhciBhPXQuc2VnbWVudHMscz10LnBvaW50cyxuPWUucG9pbnRzO2NvbnN0IHI9W107Zm9yKGNvbnN0IGMgb2YgYSl7dmFye3N0YXJ0Om8sZW5kOmx9PWMsbD1fZmluZFNlZ21lbnRFbmQobyxsLHMpLGg9X2dldEJvdW5kcyhpLHNbb10sc1tsXSxjLmxvb3ApO2lmKGUuc2VnbWVudHMpZm9yKGNvbnN0IHUgb2YgX2JvdW5kU2VnbWVudHMoZSxoKSl7dmFyIGQ9X2dldEJvdW5kcyhpLG5bdS5zdGFydF0sblt1LmVuZF0sdS5sb29wKTtmb3IoY29uc3QgZyBvZiBfYm91bmRTZWdtZW50KGMscyxkKSlyLnB1c2goe3NvdXJjZTpnLHRhcmdldDp1LHN0YXJ0OntbaV06X2dldEVkZ2UoaCxkLCJzdGFydCIsTWF0aC5tYXgpfSxlbmQ6e1tpXTpfZ2V0RWRnZShoLGQsImVuZCIsTWF0aC5taW4pfX0pfWVsc2Ugci5wdXNoKHtzb3VyY2U6Yyx0YXJnZXQ6aCxzdGFydDpzW29dLGVuZDpzW2xdfSl9cmV0dXJuIHJ9ZnVuY3Rpb24gX2dldEJvdW5kcyhpLGEscyx0KXtpZighdCl7bGV0IHQ9YVtpXSxlPXNbaV07cmV0dXJuImFuZ2xlIj09PWkmJih0PV9ub3JtYWxpemVBbmdsZSh0KSxlPV9ub3JtYWxpemVBbmdsZShlKSkse3Byb3BlcnR5Omksc3RhcnQ6dCxlbmQ6ZX19fWZ1bmN0aW9uIF9wb2ludHNGcm9tU2VnbWVudHModCxlKXtjb25zdHt4Omk9bnVsbCx5OmE9bnVsbH09dHx8e30scz1lLnBvaW50cyxuPVtdO3JldHVybiBlLnNlZ21lbnRzLmZvckVhY2goKHtzdGFydDp0LGVuZDplfSk9PntlPV9maW5kU2VnbWVudEVuZCh0LGUscyk7dD1zW3RdLGU9c1tlXTtudWxsIT09YT8obi5wdXNoKHt4OnQueCx5OmF9KSxuLnB1c2goe3g6ZS54LHk6YX0pKTpudWxsIT09aSYmKG4ucHVzaCh7eDppLHk6dC55fSksbi5wdXNoKHt4OmkseTplLnl9KSl9KSxufWZ1bmN0aW9uIF9maW5kU2VnbWVudEVuZCh0LGUsaSl7Zm9yKDt0PGU7ZS0tKXt2YXIgYT1pW2VdO2lmKCFpc05hTihhLngpJiYhaXNOYU4oYS55KSlicmVha31yZXR1cm4gZX1mdW5jdGlvbiBfZ2V0RWRnZSh0LGUsaSxhKXtyZXR1cm4gdCYmZT9hKHRbaV0sZVtpXSk6dD90W2ldOmU/ZVtpXTowfWZ1bmN0aW9uIF9jcmVhdGVCb3VuZGFyeUxpbmUodCxlKXtsZXQgaT1bXSxhPSExO3JldHVybihpPWlzQXJyYXkodCk/KGE9ITAsdCk6X3BvaW50c0Zyb21TZWdtZW50cyh0LGUpKS5sZW5ndGg/bmV3IExpbmVFbGVtZW50KHtwb2ludHM6aSxvcHRpb25zOnt0ZW5zaW9uOjB9LF9sb29wOmEsX2Z1bGxMb29wOmF9KTpudWxsfWZ1bmN0aW9uIF9zaG91bGRBcHBseUZpbGwodCl7cmV0dXJuIHQmJiExIT09dC5maWxsfWZ1bmN0aW9uIF9yZXNvbHZlVGFyZ2V0KHQsZSxpKXt2YXIgYTtsZXQgcz10W2VdLmZpbGw7Y29uc3Qgbj1bZV07aWYoIWkpcmV0dXJuIHM7Zm9yKDshMSE9PXMmJi0xPT09bi5pbmRleE9mKHMpOyl7aWYoIWlzTnVtYmVyRmluaXRlKHMpKXJldHVybiBzO2lmKCEoYT10W3NdKSlyZXR1cm4hMTtpZihhLnZpc2libGUpcmV0dXJuIHM7bi5wdXNoKHMpLHM9YS5maWxsfXJldHVybiExfWZ1bmN0aW9uIF9kZWNvZGVGaWxsKHQsZSxpKXt0PXBhcnNlRmlsbE9wdGlvbih0KTtpZihpc09iamVjdCh0KSlyZXR1cm4haXNOYU4odC52YWx1ZSkmJnQ7dmFyIGE9cGFyc2VGbG9hdCh0KTtyZXR1cm4gaXNOdW1iZXJGaW5pdGUoYSkmJk1hdGguZmxvb3IoYSk9PT1hP2RlY29kZVRhcmdldEluZGV4KHRbMF0sZSxhLGkpOjA8PVsib3JpZ2luIiwic3RhcnQiLCJlbmQiLCJzdGFjayIsInNoYXBlIl0uaW5kZXhPZih0KSYmdH1mdW5jdGlvbiBkZWNvZGVUYXJnZXRJbmRleCh0LGUsaSxhKXtyZXR1cm4hKChpPSItIiE9PXQmJiIrIiE9PXQ/aTplK2kpPT09ZXx8aTwwfHxhPD1pKSYmaX1mdW5jdGlvbiBfZ2V0VGFyZ2V0UGl4ZWwodCxlKXtsZXQgaT1udWxsO3JldHVybiJzdGFydCI9PT10P2k9ZS5ib3R0b206ImVuZCI9PT10P2k9ZS50b3A6aXNPYmplY3QodCk/aT1lLmdldFBpeGVsRm9yVmFsdWUodC52YWx1ZSk6ZS5nZXRCYXNlUGl4ZWwmJihpPWUuZ2V0QmFzZVBpeGVsKCkpLGl9ZnVuY3Rpb24gX2dldFRhcmdldFZhbHVlKHQsZSxpKXtsZXQgYTtyZXR1cm4gYT0ic3RhcnQiPT09dD9pOiJlbmQiPT09dD9lLm9wdGlvbnMucmV2ZXJzZT9lLm1pbjplLm1heDppc09iamVjdCh0KT90LnZhbHVlOmUuZ2V0QmFzZVZhbHVlKCl9ZnVuY3Rpb24gcGFyc2VGaWxsT3B0aW9uKHQpe3ZhciB0PXQub3B0aW9ucyxlPXQuZmlsbDtsZXQgaT12YWx1ZU9yRGVmYXVsdChlJiZlLnRhcmdldCxlKTtyZXR1cm4hMSE9PShpPXZvaWQgMD09PWk/ISF0LmJhY2tncm91bmRDb2xvcjppKSYmbnVsbCE9PWkmJighMD09PWk/Im9yaWdpbiI6aSl9ZnVuY3Rpb24gX2J1aWxkU3RhY2tMaW5lKHQpe3ZhcntzY2FsZTp0LGluZGV4OmUsbGluZTppfT10LGE9W10scz1pLnNlZ21lbnRzLG49aS5wb2ludHM7Y29uc3Qgcj1nZXRMaW5lc0JlbG93KHQsZSk7ci5wdXNoKF9jcmVhdGVCb3VuZGFyeUxpbmUoe3g6bnVsbCx5OnQuYm90dG9tfSxpKSk7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe3ZhciBvPXNbdF07Zm9yKGxldCB0PW8uc3RhcnQ7dDw9by5lbmQ7dCsrKWFkZFBvaW50c0JlbG93KGEsblt0XSxyKX1yZXR1cm4gbmV3IExpbmVFbGVtZW50KHtwb2ludHM6YSxvcHRpb25zOnt9fSl9ZnVuY3Rpb24gZ2V0TGluZXNCZWxvdyh0LGUpe2NvbnN0IGk9W107dmFyIGE9dC5nZXRNYXRjaGluZ1Zpc2libGVNZXRhcygibGluZSIpO2ZvcihsZXQgdD0wO3Q8YS5sZW5ndGg7dCsrKXt2YXIgcz1hW3RdO2lmKHMuaW5kZXg9PT1lKWJyZWFrO3MuaGlkZGVufHxpLnVuc2hpZnQocy5kYXRhc2V0KX1yZXR1cm4gaX1mdW5jdGlvbiBhZGRQb2ludHNCZWxvdyhlLGksYSl7Y29uc3Qgcz1bXTtmb3IobGV0IHQ9MDt0PGEubGVuZ3RoO3QrKyl7dmFye2ZpcnN0Om4sbGFzdDpyLHBvaW50Om99PWZpbmRQb2ludChhW3RdLGksIngiKTtpZighKCFvfHxuJiZyKSlpZihuKXMudW5zaGlmdChvKTtlbHNlIGlmKGUucHVzaChvKSwhcilicmVha31lLnB1c2goLi4ucyl9ZnVuY3Rpb24gZmluZFBvaW50KHQsZSxpKXtlPXQuaW50ZXJwb2xhdGUoZSxpKTtpZighZSlyZXR1cm57fTt2YXIgYT1lW2ldLHM9dC5zZWdtZW50cyxuPXQucG9pbnRzO2xldCByPSExLG89ITE7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe3ZhciBsPXNbdF0saD1uW2wuc3RhcnRdW2ldLGw9bltsLmVuZF1baV07aWYoX2lzQmV0d2VlbihhLGgsbCkpe3I9YT09PWgsbz1hPT09bDticmVha319cmV0dXJue2ZpcnN0OnIsbGFzdDpvLHBvaW50OmV9fWNsYXNzIHNpbXBsZUFyY3tjb25zdHJ1Y3Rvcih0KXt0aGlzLng9dC54LHRoaXMueT10LnksdGhpcy5yYWRpdXM9dC5yYWRpdXN9cGF0aFNlZ21lbnQodCxlLGkpe3Zhcnt4OmEseTpzLHJhZGl1czpufT10aGlzO3JldHVybiB0LmFyYyhhLHMsbiwoZT1lfHx7c3RhcnQ6MCxlbmQ6VEFVfSkuZW5kLGUuc3RhcnQsITApLCFpLmJvdW5kc31pbnRlcnBvbGF0ZSh0KXt2YXJ7eDplLHk6aSxyYWRpdXM6YX09dGhpcyx0PXQuYW5nbGU7cmV0dXJue3g6ZStNYXRoLmNvcyh0KSphLHk6aStNYXRoLnNpbih0KSphLGFuZ2xlOnR9fX1mdW5jdGlvbiBfZ2V0VGFyZ2V0KHQpe3ZhcntjaGFydDplLGZpbGw6aSxsaW5lOmF9PXQ7aWYoaXNOdW1iZXJGaW5pdGUoaSkpcmV0dXJuIGdldExpbmVCeUluZGV4KGUsaSk7aWYoInN0YWNrIj09PWkpcmV0dXJuIF9idWlsZFN0YWNrTGluZSh0KTtpZigic2hhcGUiPT09aSlyZXR1cm4hMDtlPWNvbXB1dGVCb3VuZGFyeSh0KTtyZXR1cm4gZSBpbnN0YW5jZW9mIHNpbXBsZUFyYz9lOl9jcmVhdGVCb3VuZGFyeUxpbmUoZSxhKX1mdW5jdGlvbiBnZXRMaW5lQnlJbmRleCh0LGUpe3ZhciBpPXQuZ2V0RGF0YXNldE1ldGEoZSk7cmV0dXJuIGkmJnQuaXNEYXRhc2V0VmlzaWJsZShlKT9pLmRhdGFzZXQ6bnVsbH1mdW5jdGlvbiBjb21wdXRlQm91bmRhcnkodCl7cmV0dXJuKCh0LnNjYWxlfHx7fSkuZ2V0UG9pbnRQb3NpdGlvbkZvclZhbHVlP2NvbXB1dGVDaXJjdWxhckJvdW5kYXJ5OmNvbXB1dGVMaW5lYXJCb3VuZGFyeSkodCl9ZnVuY3Rpb24gY29tcHV0ZUxpbmVhckJvdW5kYXJ5KHQpe2NvbnN0e3NjYWxlOmU9e30sZmlsbDppfT10O3ZhciBhLHQ9X2dldFRhcmdldFBpeGVsKGksZSk7cmV0dXJuIGlzTnVtYmVyRmluaXRlKHQpP3t4OihhPWUuaXNIb3Jpem9udGFsKCkpP3Q6bnVsbCx5OmE/bnVsbDp0fTpudWxsfWZ1bmN0aW9uIGNvbXB1dGVDaXJjdWxhckJvdW5kYXJ5KHQpe2NvbnN0e3NjYWxlOmUsZmlsbDppfT10O3ZhciB0PWUub3B0aW9ucyxhPWUuZ2V0TGFiZWxzKCkubGVuZ3RoLHM9dC5yZXZlcnNlP2UubWF4OmUubWluLG49X2dldFRhcmdldFZhbHVlKGksZSxzKTtjb25zdCByPVtdO2lmKHQuZ3JpZC5jaXJjdWxhcilyZXR1cm4gdD1lLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZSgwLHMpLG5ldyBzaW1wbGVBcmMoe3g6dC54LHk6dC55LHJhZGl1czplLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKG4pfSk7Zm9yKGxldCB0PTA7dDxhOysrdClyLnB1c2goZS5nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUodCxuKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gX2RyYXdmaWxsKHQsZSxpKXt2YXIgYT1fZ2V0VGFyZ2V0KGUpLHtsaW5lOmUsc2NhbGU6cyxheGlzOm59PWUscj1lLm9wdGlvbnMsbz1yLmZpbGwscj1yLmJhY2tncm91bmRDb2xvcix7YWJvdmU6bz1yLGJlbG93OnI9cn09b3x8e307YSYmZS5wb2ludHMubGVuZ3RoJiYoY2xpcEFyZWEodCxpKSxkb0ZpbGwodCx7bGluZTplLHRhcmdldDphLGFib3ZlOm8sYmVsb3c6cixhcmVhOmksc2NhbGU6cyxheGlzOm59KSx1bmNsaXBBcmVhKHQpKX1mdW5jdGlvbiBkb0ZpbGwodCxlKXt2YXJ7bGluZTppLHRhcmdldDphLGFib3ZlOnMsYmVsb3c6bixhcmVhOnIsc2NhbGU6b309ZSxlPWkuX2xvb3A/ImFuZ2xlIjplLmF4aXM7dC5zYXZlKCksIngiPT09ZSYmbiE9PXMmJihjbGlwVmVydGljYWwodCxhLHIudG9wKSxmaWxsKHQse2xpbmU6aSx0YXJnZXQ6YSxjb2xvcjpzLHNjYWxlOm8scHJvcGVydHk6ZX0pLHQucmVzdG9yZSgpLHQuc2F2ZSgpLGNsaXBWZXJ0aWNhbCh0LGEsci5ib3R0b20pKSxmaWxsKHQse2xpbmU6aSx0YXJnZXQ6YSxjb2xvcjpuLHNjYWxlOm8scHJvcGVydHk6ZX0pLHQucmVzdG9yZSgpfWZ1bmN0aW9uIGNsaXBWZXJ0aWNhbCh0LGUsaSl7dmFye3NlZ21lbnRzOmEscG9pbnRzOnN9PWU7bGV0IG49ITAscj0hMTt0LmJlZ2luUGF0aCgpO2Zvcihjb25zdCBkIG9mIGEpe3ZhcntzdGFydDpvLGVuZDpsfT1kLGg9c1tvXSxvPXNbX2ZpbmRTZWdtZW50RW5kKG8sbCxzKV07bj8odC5tb3ZlVG8oaC54LGgueSksbj0hMSk6KHQubGluZVRvKGgueCxpKSx0LmxpbmVUbyhoLngsaC55KSksKHI9ISFlLnBhdGhTZWdtZW50KHQsZCx7bW92ZTpyfSkpP3QuY2xvc2VQYXRoKCk6dC5saW5lVG8oby54LGkpfXQubGluZVRvKGUuZmlyc3QoKS54LGkpLHQuY2xvc2VQYXRoKCksdC5jbGlwKCl9ZnVuY3Rpb24gZmlsbChlLHQpe2NvbnN0e2xpbmU6aSx0YXJnZXQ6YSxwcm9wZXJ0eTpzLGNvbG9yOm4sc2NhbGU6cn09dDt2YXIgbyxsLGgsZDtmb3Ioe3NvdXJjZTpvLHRhcmdldDpsLHN0YXJ0OmgsZW5kOmR9b2YgX3NlZ21lbnRzKGksYSxzKSl7dmFye3N0eWxlOntiYWNrZ3JvdW5kQ29sb3I6Yz1ufT17fX09byx1PSEwIT09YSxjPShlLnNhdmUoKSxlLmZpbGxTdHlsZT1jLGNsaXBCb3VuZHMoZSxyLHUmJl9nZXRCb3VuZHMocyxoLGQpKSxlLmJlZ2luUGF0aCgpLCEhaS5wYXRoU2VnbWVudChlLG8pKTtsZXQgdDt1JiYoYz9lLmNsb3NlUGF0aCgpOmludGVycG9sYXRlZExpbmVUbyhlLGEsZCxzKSx1PSEhYS5wYXRoU2VnbWVudChlLGwse21vdmU6YyxyZXZlcnNlOiEwfSksKHQ9YyYmdSl8fGludGVycG9sYXRlZExpbmVUbyhlLGEsaCxzKSksZS5jbG9zZVBhdGgoKSxlLmZpbGwodD8iZXZlbm9kZCI6Im5vbnplcm8iKSxlLnJlc3RvcmUoKX19ZnVuY3Rpb24gY2xpcEJvdW5kcyh0LGUsaSl7dmFye3RvcDplLGJvdHRvbTphfT1lLmNoYXJ0LmNoYXJ0QXJlYSx7cHJvcGVydHk6aSxzdGFydDpzLGVuZDpufT1pfHx7fTsieCI9PT1pJiYodC5iZWdpblBhdGgoKSx0LnJlY3QocyxlLG4tcyxhLWUpLHQuY2xpcCgpKX1mdW5jdGlvbiBpbnRlcnBvbGF0ZWRMaW5lVG8odCxlLGksYSl7ZT1lLmludGVycG9sYXRlKGksYSk7ZSYmdC5saW5lVG8oZS54LGUueSl9dmFyIGluZGV4PXtpZDoiZmlsbGVyIixhZnRlckRhdGFzZXRzVXBkYXRlKHQsZSxpKXt2YXIgYT0odC5kYXRhLmRhdGFzZXRzfHxbXSkubGVuZ3RoO2NvbnN0IHM9W107bGV0IG4scixvLGw7Zm9yKHI9MDtyPGE7KytyKW89KG49dC5nZXREYXRhc2V0TWV0YShyKSkuZGF0YXNldCxsPW51bGwsbyYmby5vcHRpb25zJiZvIGluc3RhbmNlb2YgTGluZUVsZW1lbnQmJihsPXt2aXNpYmxlOnQuaXNEYXRhc2V0VmlzaWJsZShyKSxpbmRleDpyLGZpbGw6X2RlY29kZUZpbGwobyxyLGEpLGNoYXJ0OnQsYXhpczpuLmNvbnRyb2xsZXIub3B0aW9ucy5pbmRleEF4aXMsc2NhbGU6bi52U2NhbGUsbGluZTpvfSksbi4kZmlsbGVyPWwscy5wdXNoKGwpO2ZvcihyPTA7cjxhOysrcikobD1zW3JdKSYmITEhPT1sLmZpbGwmJihsLmZpbGw9X3Jlc29sdmVUYXJnZXQocyxyLGkucHJvcGFnYXRlKSl9LGJlZm9yZURyYXcoZSx0LGkpe3ZhciBhPSJiZWZvcmVEcmF3Ij09PWkuZHJhd1RpbWUscz1lLmdldFNvcnRlZFZpc2libGVEYXRhc2V0TWV0YXMoKSxuPWUuY2hhcnRBcmVhO2ZvcihsZXQgdD1zLmxlbmd0aC0xOzA8PXQ7LS10KXtjb25zdCByPXNbdF0uJGZpbGxlcjtyJiYoci5saW5lLnVwZGF0ZUNvbnRyb2xQb2ludHMobixyLmF4aXMpLGEmJnIuZmlsbCYmX2RyYXdmaWxsKGUuY3R4LHIsbikpfX0sYmVmb3JlRGF0YXNldHNEcmF3KGUsdCxpKXtpZigiYmVmb3JlRGF0YXNldHNEcmF3Ij09PWkuZHJhd1RpbWUpe3ZhciBhPWUuZ2V0U29ydGVkVmlzaWJsZURhdGFzZXRNZXRhcygpO2ZvcihsZXQgdD1hLmxlbmd0aC0xOzA8PXQ7LS10KXt2YXIgcz1hW3RdLiRmaWxsZXI7X3Nob3VsZEFwcGx5RmlsbChzKSYmX2RyYXdmaWxsKGUuY3R4LHMsZS5jaGFydEFyZWEpfX19LGJlZm9yZURhdGFzZXREcmF3KHQsZSxpKXtlPWUubWV0YS4kZmlsbGVyO19zaG91bGRBcHBseUZpbGwoZSkmJiJiZWZvcmVEYXRhc2V0RHJhdyI9PT1pLmRyYXdUaW1lJiZfZHJhd2ZpbGwodC5jdHgsZSx0LmNoYXJ0QXJlYSl9LGRlZmF1bHRzOntwcm9wYWdhdGU6ITAsZHJhd1RpbWU6ImJlZm9yZURhdGFzZXREcmF3In19O2NvbnN0IGdldEJveFNpemU9KHQsZSk9PntsZXR7Ym94SGVpZ2h0Omk9ZSxib3hXaWR0aDphPWV9PXQ7cmV0dXJuIHQudXNlUG9pbnRTdHlsZSYmKGk9TWF0aC5taW4oaSxlKSxhPXQucG9pbnRTdHlsZVdpZHRofHxNYXRoLm1pbihhLGUpKSx7Ym94V2lkdGg6YSxib3hIZWlnaHQ6aSxpdGVtSGVpZ2h0Ok1hdGgubWF4KGUsaSl9fSxpdGVtc0VxdWFsPSh0LGUpPT5udWxsIT09dCYmbnVsbCE9PWUmJnQuZGF0YXNldEluZGV4PT09ZS5kYXRhc2V0SW5kZXgmJnQuaW5kZXg9PT1lLmluZGV4O2NsYXNzIExlZ2VuZCBleHRlbmRzIEVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLl9hZGRlZD0hMSx0aGlzLmxlZ2VuZEhpdEJveGVzPVtdLHRoaXMuX2hvdmVyZWRJdGVtPW51bGwsdGhpcy5kb3VnaG51dE1vZGU9ITEsdGhpcy5jaGFydD10LmNoYXJ0LHRoaXMub3B0aW9ucz10Lm9wdGlvbnMsdGhpcy5jdHg9dC5jdHgsdGhpcy5sZWdlbmRJdGVtcz12b2lkIDAsdGhpcy5jb2x1bW5TaXplcz12b2lkIDAsdGhpcy5saW5lV2lkdGhzPXZvaWQgMCx0aGlzLm1heEhlaWdodD12b2lkIDAsdGhpcy5tYXhXaWR0aD12b2lkIDAsdGhpcy50b3A9dm9pZCAwLHRoaXMuYm90dG9tPXZvaWQgMCx0aGlzLmxlZnQ9dm9pZCAwLHRoaXMucmlnaHQ9dm9pZCAwLHRoaXMuaGVpZ2h0PXZvaWQgMCx0aGlzLndpZHRoPXZvaWQgMCx0aGlzLl9tYXJnaW5zPXZvaWQgMCx0aGlzLnBvc2l0aW9uPXZvaWQgMCx0aGlzLndlaWdodD12b2lkIDAsdGhpcy5mdWxsU2l6ZT12b2lkIDB9dXBkYXRlKHQsZSxpKXt0aGlzLm1heFdpZHRoPXQsdGhpcy5tYXhIZWlnaHQ9ZSx0aGlzLl9tYXJnaW5zPWksdGhpcy5zZXREaW1lbnNpb25zKCksdGhpcy5idWlsZExhYmVscygpLHRoaXMuZml0KCl9c2V0RGltZW5zaW9ucygpe3RoaXMuaXNIb3Jpem9udGFsKCk/KHRoaXMud2lkdGg9dGhpcy5tYXhXaWR0aCx0aGlzLmxlZnQ9dGhpcy5fbWFyZ2lucy5sZWZ0LHRoaXMucmlnaHQ9dGhpcy53aWR0aCk6KHRoaXMuaGVpZ2h0PXRoaXMubWF4SGVpZ2h0LHRoaXMudG9wPXRoaXMuX21hcmdpbnMudG9wLHRoaXMuYm90dG9tPXRoaXMuaGVpZ2h0KX1idWlsZExhYmVscygpe2NvbnN0IGk9dGhpcy5vcHRpb25zLmxhYmVsc3x8e307bGV0IHQ9Y2FsbGJhY2soaS5nZW5lcmF0ZUxhYmVscyxbdGhpcy5jaGFydF0sdGhpcyl8fFtdO2kuZmlsdGVyJiYodD10LmZpbHRlcih0PT5pLmZpbHRlcih0LHRoaXMuY2hhcnQuZGF0YSkpKSxpLnNvcnQmJih0PXQuc29ydCgodCxlKT0+aS5zb3J0KHQsZSx0aGlzLmNoYXJ0LmRhdGEpKSksdGhpcy5vcHRpb25zLnJldmVyc2UmJnQucmV2ZXJzZSgpLHRoaXMubGVnZW5kSXRlbXM9dH1maXQoKXtjb25zdHtvcHRpb25zOmksY3R4OmF9PXRoaXM7aWYoaS5kaXNwbGF5KXt2YXIgcz1pLmxhYmVscyxuPXRvRm9udChzLmZvbnQpLHI9bi5zaXplLG89dGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCkse2JveFdpZHRoOnMsaXRlbUhlaWdodDpsfT1nZXRCb3hTaXplKHMscik7bGV0IHQsZTthLmZvbnQ9bi5zdHJpbmcsdGhpcy5pc0hvcml6b250YWwoKT8odD10aGlzLm1heFdpZHRoLGU9dGhpcy5fZml0Um93cyhvLHIscyxsKSsxMCk6KGU9dGhpcy5tYXhIZWlnaHQsdD10aGlzLl9maXRDb2xzKG8sbixzLGwpKzEwKSx0aGlzLndpZHRoPU1hdGgubWluKHQsaS5tYXhXaWR0aHx8dGhpcy5tYXhXaWR0aCksdGhpcy5oZWlnaHQ9TWF0aC5taW4oZSxpLm1heEhlaWdodHx8dGhpcy5tYXhIZWlnaHQpfWVsc2UgdGhpcy53aWR0aD10aGlzLmhlaWdodD0wfV9maXRSb3dzKHQsaSxhLHMpe2NvbnN0e2N0eDpuLG1heFdpZHRoOnIsb3B0aW9uczp7bGFiZWxzOntwYWRkaW5nOm99fX09dGhpcyxsPXRoaXMubGVnZW5kSGl0Qm94ZXM9W10saD10aGlzLmxpbmVXaWR0aHM9WzBdLGQ9cytvO2xldCBjPXQsdT0obi50ZXh0QWxpZ249ImxlZnQiLG4udGV4dEJhc2VsaW5lPSJtaWRkbGUiLC0xKSxnPS1kO3JldHVybiB0aGlzLmxlZ2VuZEl0ZW1zLmZvckVhY2goKHQsZSk9Pnt0PWEraS8yK24ubWVhc3VyZVRleHQodC50ZXh0KS53aWR0aDsoMD09PWV8fGhbaC5sZW5ndGgtMV0rdCsyKm8+cikmJihjKz1kLGhbaC5sZW5ndGgtKDA8ZT8wOjEpXT0wLGcrPWQsdSsrKSxsW2VdPXtsZWZ0OjAsdG9wOmcscm93OnUsd2lkdGg6dCxoZWlnaHQ6c30saFtoLmxlbmd0aC0xXSs9dCtvfSksY31fZml0Q29scyh0LGEscyxuKXtjb25zdHtjdHg6cixtYXhIZWlnaHQ6ZSxvcHRpb25zOntsYWJlbHM6e3BhZGRpbmc6b319fT10aGlzLGw9dGhpcy5sZWdlbmRIaXRCb3hlcz1bXSxoPXRoaXMuY29sdW1uU2l6ZXM9W10sZD1lLXQ7bGV0IGM9byx1PTAsZz0wLHA9MCxmPTA7cmV0dXJuIHRoaXMubGVnZW5kSXRlbXMuZm9yRWFjaCgodCxlKT0+e3ZhcntpdGVtV2lkdGg6dCxpdGVtSGVpZ2h0Oml9PWNhbGN1bGF0ZUl0ZW1TaXplKHMsYSxyLHQsbik7MDxlJiZnK2krMipvPmQmJihjKz11K28saC5wdXNoKHt3aWR0aDp1LGhlaWdodDpnfSkscCs9dStvLGYrKyx1PWc9MCksbFtlXT17bGVmdDpwLHRvcDpnLGNvbDpmLHdpZHRoOnQsaGVpZ2h0Oml9LHU9TWF0aC5tYXgodSx0KSxnKz1pK299KSxjKz11LGgucHVzaCh7d2lkdGg6dSxoZWlnaHQ6Z30pLGN9YWRqdXN0SGl0Qm94ZXMoKXtpZih0aGlzLm9wdGlvbnMuZGlzcGxheSl7dmFyIGk9dGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCkse2xlZ2VuZEhpdEJveGVzOmEsb3B0aW9uczp7YWxpZ246cyxsYWJlbHM6e3BhZGRpbmc6bn0scnRsOnR9fT10aGlzO2NvbnN0IHI9Z2V0UnRsQWRhcHRlcih0LHRoaXMubGVmdCx0aGlzLndpZHRoKTtpZih0aGlzLmlzSG9yaXpvbnRhbCgpKXtsZXQgdD0wLGU9X2FsaWduU3RhcnRFbmQocyx0aGlzLmxlZnQrbix0aGlzLnJpZ2h0LXRoaXMubGluZVdpZHRoc1t0XSk7Zm9yKGNvbnN0IG8gb2YgYSl0IT09by5yb3cmJih0PW8ucm93LGU9X2FsaWduU3RhcnRFbmQocyx0aGlzLmxlZnQrbix0aGlzLnJpZ2h0LXRoaXMubGluZVdpZHRoc1t0XSkpLG8udG9wKz10aGlzLnRvcCtpK24sby5sZWZ0PXIubGVmdEZvckx0cihyLngoZSksby53aWR0aCksZSs9by53aWR0aCtufWVsc2V7bGV0IHQ9MCxlPV9hbGlnblN0YXJ0RW5kKHMsdGhpcy50b3AraStuLHRoaXMuYm90dG9tLXRoaXMuY29sdW1uU2l6ZXNbdF0uaGVpZ2h0KTtmb3IoY29uc3QgbCBvZiBhKWwuY29sIT09dCYmKHQ9bC5jb2wsZT1fYWxpZ25TdGFydEVuZChzLHRoaXMudG9wK2krbix0aGlzLmJvdHRvbS10aGlzLmNvbHVtblNpemVzW3RdLmhlaWdodCkpLGwudG9wPWUsbC5sZWZ0Kz10aGlzLmxlZnQrbixsLmxlZnQ9ci5sZWZ0Rm9yTHRyKHIueChsLmxlZnQpLGwud2lkdGgpLGUrPWwuaGVpZ2h0K259fX1pc0hvcml6b250YWwoKXtyZXR1cm4idG9wIj09PXRoaXMub3B0aW9ucy5wb3NpdGlvbnx8ImJvdHRvbSI9PT10aGlzLm9wdGlvbnMucG9zaXRpb259ZHJhdygpe3ZhciB0O3RoaXMub3B0aW9ucy5kaXNwbGF5JiYodD10aGlzLmN0eCxjbGlwQXJlYSh0LHRoaXMpLHRoaXMuX2RyYXcoKSx1bmNsaXBBcmVhKHQpKX1fZHJhdygpe2NvbnN0e29wdGlvbnM6dSxjb2x1bW5TaXplczpnLGxpbmVXaWR0aHM6cCxjdHg6Zn09dGhpcyx7YWxpZ246bSxsYWJlbHM6dn09dSx4PWRlZmF1bHRzLmNvbG9yLGI9Z2V0UnRsQWRhcHRlcih1LnJ0bCx0aGlzLmxlZnQsdGhpcy53aWR0aCksXz10b0ZvbnQodi5mb250KSx5PXZbInBhZGRpbmciXSxrPV8uc2l6ZSxTPWsvMjtsZXQgRDt0aGlzLmRyYXdUaXRsZSgpLGYudGV4dEFsaWduPWIudGV4dEFsaWduKCJsZWZ0IiksZi50ZXh0QmFzZWxpbmU9Im1pZGRsZSIsZi5saW5lV2lkdGg9LjUsZi5mb250PV8uc3RyaW5nO2NvbnN0e2JveFdpZHRoOk0sYm94SGVpZ2h0OlAsaXRlbUhlaWdodDpBfT1nZXRCb3hTaXplKHYsayksdz10aGlzLmlzSG9yaXpvbnRhbCgpLEM9dGhpcy5fY29tcHV0ZVRpdGxlSGVpZ2h0KCksTz0oRD13P3t4Ol9hbGlnblN0YXJ0RW5kKG0sdGhpcy5sZWZ0K3ksdGhpcy5yaWdodC1wWzBdKSx5OnRoaXMudG9wK3krQyxsaW5lOjB9Ont4OnRoaXMubGVmdCt5LHk6X2FsaWduU3RhcnRFbmQobSx0aGlzLnRvcCtDK3ksdGhpcy5ib3R0b20tZ1swXS5oZWlnaHQpLGxpbmU6MH0sb3ZlcnJpZGVUZXh0RGlyZWN0aW9uKHRoaXMuY3R4LHUudGV4dERpcmVjdGlvbiksQSt5KTt0aGlzLmxlZ2VuZEl0ZW1zLmZvckVhY2goKHQsZSk9PntmLnN0cm9rZVN0eWxlPXQuZm9udENvbG9yLGYuZmlsbFN0eWxlPXQuZm9udENvbG9yO3ZhciBpPWYubWVhc3VyZVRleHQodC50ZXh0KS53aWR0aCxhPWIudGV4dEFsaWduKHQudGV4dEFsaWdufHwodC50ZXh0QWxpZ249di50ZXh0QWxpZ24pKSxpPU0rUytpO2xldCBzPUQueCxuPUQueTtiLnNldFdpZHRoKHRoaXMud2lkdGgpLHc/MDxlJiZzK2kreT50aGlzLnJpZ2h0JiYobj1ELnkrPU8sRC5saW5lKysscz1ELng9X2FsaWduU3RhcnRFbmQobSx0aGlzLmxlZnQreSx0aGlzLnJpZ2h0LXBbRC5saW5lXSkpOjA8ZSYmbitPPnRoaXMuYm90dG9tJiYocz1ELng9cytnW0QubGluZV0ud2lkdGgreSxELmxpbmUrKyxuPUQueT1fYWxpZ25TdGFydEVuZChtLHRoaXMudG9wK0MreSx0aGlzLmJvdHRvbS1nW0QubGluZV0uaGVpZ2h0KSk7dmFyIHIsbyxsLGgsZCxjLGU9Yi54KHMpO2U9ZSxoPW4sZD10LGlzTmFOKE0pfHxNPD0wfHxpc05hTihQKXx8UDwwfHwoZi5zYXZlKCkscj12YWx1ZU9yRGVmYXVsdChkLmxpbmVXaWR0aCwxKSxmLmZpbGxTdHlsZT12YWx1ZU9yRGVmYXVsdChkLmZpbGxTdHlsZSx4KSxmLmxpbmVDYXA9dmFsdWVPckRlZmF1bHQoZC5saW5lQ2FwLCJidXR0IiksZi5saW5lRGFzaE9mZnNldD12YWx1ZU9yRGVmYXVsdChkLmxpbmVEYXNoT2Zmc2V0LDApLGYubGluZUpvaW49dmFsdWVPckRlZmF1bHQoZC5saW5lSm9pbiwibWl0ZXIiKSxmLmxpbmVXaWR0aD1yLGYuc3Ryb2tlU3R5bGU9dmFsdWVPckRlZmF1bHQoZC5zdHJva2VTdHlsZSx4KSxmLnNldExpbmVEYXNoKHZhbHVlT3JEZWZhdWx0KGQubGluZURhc2gsW10pKSx2LnVzZVBvaW50U3R5bGU/KG89e3JhZGl1czpQKk1hdGguU1FSVDIvMixwb2ludFN0eWxlOmQucG9pbnRTdHlsZSxyb3RhdGlvbjpkLnJvdGF0aW9uLGJvcmRlcldpZHRoOnJ9LGw9Yi54UGx1cyhlLE0vMiksYz1oK1MsZHJhd1BvaW50TGVnZW5kKGYsbyxsLGMsdi5wb2ludFN0eWxlV2lkdGgmJk0pKToobz1oK01hdGgubWF4KChrLVApLzIsMCksbD1iLmxlZnRGb3JMdHIoZSxNKSxjPXRvVFJCTENvcm5lcnMoZC5ib3JkZXJSYWRpdXMpLGYuYmVnaW5QYXRoKCksT2JqZWN0LnZhbHVlcyhjKS5zb21lKHQ9PjAhPT10KT9hZGRSb3VuZGVkUmVjdFBhdGgoZix7eDpsLHk6byx3Ok0saDpQLHJhZGl1czpjfSk6Zi5yZWN0KGwsbyxNLFApLGYuZmlsbCgpLDAhPT1yJiZmLnN0cm9rZSgpKSxmLnJlc3RvcmUoKSkscz1fdGV4dFgoYSxzK00rUyx3P3MraTp0aGlzLnJpZ2h0LHUucnRsKSxoPWIueChzKSxlPW4sZD10LHJlbmRlclRleHQoZixkLnRleHQsaCxlK0EvMixfLHtzdHJpa2V0aHJvdWdoOmQuaGlkZGVuLHRleHRBbGlnbjpiLnRleHRBbGlnbihkLnRleHRBbGlnbil9KSx3P0QueCs9aSt5OiJzdHJpbmciIT10eXBlb2YgdC50ZXh0PyhjPV8ubGluZUhlaWdodCxELnkrPWNhbGN1bGF0ZUxlZ2VuZEl0ZW1IZWlnaHQodCxjKSt5KTpELnkrPU99KSxyZXN0b3JlVGV4dERpcmVjdGlvbih0aGlzLmN0eCx1LnRleHREaXJlY3Rpb24pfWRyYXdUaXRsZSgpe3ZhciBhPXRoaXMub3B0aW9ucyxzPWEudGl0bGUsbj10b0ZvbnQocy5mb250KSxyPXRvUGFkZGluZyhzLnBhZGRpbmcpO2lmKHMuZGlzcGxheSl7Y29uc3QgaD1nZXRSdGxBZGFwdGVyKGEucnRsLHRoaXMubGVmdCx0aGlzLndpZHRoKSxkPXRoaXMuY3R4O3ZhciBvPXMucG9zaXRpb24sbD1uLnNpemUvMixyPXIudG9wK2w7bGV0IHQsZT10aGlzLmxlZnQsaT10aGlzLndpZHRoO3RoaXMuaXNIb3Jpem9udGFsKCk/KGk9TWF0aC5tYXgoLi4udGhpcy5saW5lV2lkdGhzKSx0PXRoaXMudG9wK3IsZT1fYWxpZ25TdGFydEVuZChhLmFsaWduLGUsdGhpcy5yaWdodC1pKSk6KGw9dGhpcy5jb2x1bW5TaXplcy5yZWR1Y2UoKHQsZSk9Pk1hdGgubWF4KHQsZS5oZWlnaHQpLDApLHQ9citfYWxpZ25TdGFydEVuZChhLmFsaWduLHRoaXMudG9wLHRoaXMuYm90dG9tLWwtYS5sYWJlbHMucGFkZGluZy10aGlzLl9jb21wdXRlVGl0bGVIZWlnaHQoKSkpO3I9X2FsaWduU3RhcnRFbmQobyxlLGUraSk7ZC50ZXh0QWxpZ249aC50ZXh0QWxpZ24oX3RvTGVmdFJpZ2h0Q2VudGVyKG8pKSxkLnRleHRCYXNlbGluZT0ibWlkZGxlIixkLnN0cm9rZVN0eWxlPXMuY29sb3IsZC5maWxsU3R5bGU9cy5jb2xvcixkLmZvbnQ9bi5zdHJpbmcscmVuZGVyVGV4dChkLHMudGV4dCxyLHQsbil9fV9jb21wdXRlVGl0bGVIZWlnaHQoKXt2YXIgdD10aGlzLm9wdGlvbnMudGl0bGUsZT10b0ZvbnQodC5mb250KSxpPXRvUGFkZGluZyh0LnBhZGRpbmcpO3JldHVybiB0LmRpc3BsYXk/ZS5saW5lSGVpZ2h0K2kuaGVpZ2h0OjB9X2dldExlZ2VuZEl0ZW1BdCh0LGUpe2xldCBpLGEscztpZihfaXNCZXR3ZWVuKHQsdGhpcy5sZWZ0LHRoaXMucmlnaHQpJiZfaXNCZXR3ZWVuKGUsdGhpcy50b3AsdGhpcy5ib3R0b20pKWZvcihzPXRoaXMubGVnZW5kSGl0Qm94ZXMsaT0wO2k8cy5sZW5ndGg7KytpKWlmKGE9c1tpXSxfaXNCZXR3ZWVuKHQsYS5sZWZ0LGEubGVmdCthLndpZHRoKSYmX2lzQmV0d2VlbihlLGEudG9wLGEudG9wK2EuaGVpZ2h0KSlyZXR1cm4gdGhpcy5sZWdlbmRJdGVtc1tpXTtyZXR1cm4gbnVsbH1oYW5kbGVFdmVudCh0KXt2YXIgZSxpLGEscz10aGlzLm9wdGlvbnM7aXNMaXN0ZW5lZCh0LnR5cGUscykmJihlPXRoaXMuX2dldExlZ2VuZEl0ZW1BdCh0LngsdC55KSwibW91c2Vtb3ZlIj09PXQudHlwZXx8Im1vdXNlb3V0Ij09PXQudHlwZT8oaT10aGlzLl9ob3ZlcmVkSXRlbSxhPWl0ZW1zRXF1YWwoaSxlKSxpJiYhYSYmY2FsbGJhY2socy5vbkxlYXZlLFt0LGksdGhpc10sdGhpcyksKHRoaXMuX2hvdmVyZWRJdGVtPWUpJiYhYSYmY2FsbGJhY2socy5vbkhvdmVyLFt0LGUsdGhpc10sdGhpcykpOmUmJmNhbGxiYWNrKHMub25DbGljayxbdCxlLHRoaXNdLHRoaXMpKX19ZnVuY3Rpb24gY2FsY3VsYXRlSXRlbVNpemUodCxlLGksYSxzKXtyZXR1cm57aXRlbVdpZHRoOmNhbGN1bGF0ZUl0ZW1XaWR0aChhLHQsZSxpKSxpdGVtSGVpZ2h0OmNhbGN1bGF0ZUl0ZW1IZWlnaHQocyxhLGUubGluZUhlaWdodCl9fWZ1bmN0aW9uIGNhbGN1bGF0ZUl0ZW1XaWR0aCh0LGUsaSxhKXtsZXQgcz10LnRleHQ7cmV0dXJuIHMmJiJzdHJpbmciIT10eXBlb2YgcyYmKHM9cy5yZWR1Y2UoKHQsZSk9PnQubGVuZ3RoPmUubGVuZ3RoP3Q6ZSkpLGUraS5zaXplLzIrYS5tZWFzdXJlVGV4dChzKS53aWR0aH1mdW5jdGlvbiBjYWxjdWxhdGVJdGVtSGVpZ2h0KHQsZSxpKXtsZXQgYT10O3JldHVybiBhPSJzdHJpbmciIT10eXBlb2YgZS50ZXh0P2NhbGN1bGF0ZUxlZ2VuZEl0ZW1IZWlnaHQoZSxpKTphfWZ1bmN0aW9uIGNhbGN1bGF0ZUxlZ2VuZEl0ZW1IZWlnaHQodCxlKXtyZXR1cm4gZSoodC50ZXh0P3QudGV4dC5sZW5ndGg6MCl9ZnVuY3Rpb24gaXNMaXN0ZW5lZCh0LGUpe3JldHVybiEoIm1vdXNlbW92ZSIhPT10JiYibW91c2VvdXQiIT09dHx8IWUub25Ib3ZlciYmIWUub25MZWF2ZSl8fCEoIWUub25DbGlja3x8ImNsaWNrIiE9PXQmJiJtb3VzZXVwIiE9PXQpfXZhciBwbHVnaW5fbGVnZW5kPXtpZDoibGVnZW5kIixfZWxlbWVudDpMZWdlbmQsc3RhcnQodCxlLGkpe3ZhciBhPXQubGVnZW5kPW5ldyBMZWdlbmQoe2N0eDp0LmN0eCxvcHRpb25zOmksY2hhcnQ6dH0pO2xheW91dHMuY29uZmlndXJlKHQsYSxpKSxsYXlvdXRzLmFkZEJveCh0LGEpfSxzdG9wKHQpe2xheW91dHMucmVtb3ZlQm94KHQsdC5sZWdlbmQpLGRlbGV0ZSB0LmxlZ2VuZH0sYmVmb3JlVXBkYXRlKHQsZSxpKXtjb25zdCBhPXQubGVnZW5kO2xheW91dHMuY29uZmlndXJlKHQsYSxpKSxhLm9wdGlvbnM9aX0sYWZ0ZXJVcGRhdGUodCl7Y29uc3QgZT10LmxlZ2VuZDtlLmJ1aWxkTGFiZWxzKCksZS5hZGp1c3RIaXRCb3hlcygpfSxhZnRlckV2ZW50KHQsZSl7ZS5yZXBsYXl8fHQubGVnZW5kLmhhbmRsZUV2ZW50KGUuZXZlbnQpfSxkZWZhdWx0czp7ZGlzcGxheTohMCxwb3NpdGlvbjoidG9wIixhbGlnbjoiY2VudGVyIixmdWxsU2l6ZTohMCxyZXZlcnNlOiExLHdlaWdodDoxZTMsb25DbGljayh0LGUsaSl7dmFyIGE9ZS5kYXRhc2V0SW5kZXg7Y29uc3Qgcz1pLmNoYXJ0O3MuaXNEYXRhc2V0VmlzaWJsZShhKT8ocy5oaWRlKGEpLGUuaGlkZGVuPSEwKToocy5zaG93KGEpLGUuaGlkZGVuPSExKX0sb25Ib3ZlcjpudWxsLG9uTGVhdmU6bnVsbCxsYWJlbHM6e2NvbG9yOnQ9PnQuY2hhcnQub3B0aW9ucy5jb2xvcixib3hXaWR0aDo0MCxwYWRkaW5nOjEwLGdlbmVyYXRlTGFiZWxzKHQpe2NvbnN0IGE9dC5kYXRhLmRhdGFzZXRzLHt1c2VQb2ludFN0eWxlOnMscG9pbnRTdHlsZTpuLHRleHRBbGlnbjpyLGNvbG9yOm8sdXNlQm9yZGVyUmFkaXVzOmwsYm9yZGVyUmFkaXVzOmh9PXQubGVnZW5kLm9wdGlvbnNbImxhYmVscyJdO3JldHVybiB0Ll9nZXRTb3J0ZWREYXRhc2V0TWV0YXMoKS5tYXAodD0+e3ZhciBlPXQuY29udHJvbGxlci5nZXRTdHlsZShzPzA6dm9pZCAwKSxpPXRvUGFkZGluZyhlLmJvcmRlcldpZHRoKTtyZXR1cm57dGV4dDphW3QuaW5kZXhdLmxhYmVsLGZpbGxTdHlsZTplLmJhY2tncm91bmRDb2xvcixmb250Q29sb3I6byxoaWRkZW46IXQudmlzaWJsZSxsaW5lQ2FwOmUuYm9yZGVyQ2FwU3R5bGUsbGluZURhc2g6ZS5ib3JkZXJEYXNoLGxpbmVEYXNoT2Zmc2V0OmUuYm9yZGVyRGFzaE9mZnNldCxsaW5lSm9pbjplLmJvcmRlckpvaW5TdHlsZSxsaW5lV2lkdGg6KGkud2lkdGgraS5oZWlnaHQpLzQsc3Ryb2tlU3R5bGU6ZS5ib3JkZXJDb2xvcixwb2ludFN0eWxlOm58fGUucG9pbnRTdHlsZSxyb3RhdGlvbjplLnJvdGF0aW9uLHRleHRBbGlnbjpyfHxlLnRleHRBbGlnbixib3JkZXJSYWRpdXM6bCYmKGh8fGUuYm9yZGVyUmFkaXVzKSxkYXRhc2V0SW5kZXg6dC5pbmRleH19LHRoaXMpfX0sdGl0bGU6e2NvbG9yOnQ9PnQuY2hhcnQub3B0aW9ucy5jb2xvcixkaXNwbGF5OiExLHBvc2l0aW9uOiJjZW50ZXIiLHRleHQ6IiJ9fSxkZXNjcmlwdG9yczp7X3NjcmlwdGFibGU6dD0+IXQuc3RhcnRzV2l0aCgib24iKSxsYWJlbHM6e19zY3JpcHRhYmxlOnQ9PiFbImdlbmVyYXRlTGFiZWxzIiwiZmlsdGVyIiwic29ydCJdLmluY2x1ZGVzKHQpfX19O2NsYXNzIFRpdGxlIGV4dGVuZHMgRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMuY2hhcnQ9dC5jaGFydCx0aGlzLm9wdGlvbnM9dC5vcHRpb25zLHRoaXMuY3R4PXQuY3R4LHRoaXMuX3BhZGRpbmc9dm9pZCAwLHRoaXMudG9wPXZvaWQgMCx0aGlzLmJvdHRvbT12b2lkIDAsdGhpcy5sZWZ0PXZvaWQgMCx0aGlzLnJpZ2h0PXZvaWQgMCx0aGlzLndpZHRoPXZvaWQgMCx0aGlzLmhlaWdodD12b2lkIDAsdGhpcy5wb3NpdGlvbj12b2lkIDAsdGhpcy53ZWlnaHQ9dm9pZCAwLHRoaXMuZnVsbFNpemU9dm9pZCAwfXVwZGF0ZSh0LGUpe3ZhciBpPXRoaXMub3B0aW9uczt0aGlzLmxlZnQ9MCx0aGlzLnRvcD0wLGkuZGlzcGxheT8odGhpcy53aWR0aD10aGlzLnJpZ2h0PXQsdGhpcy5oZWlnaHQ9dGhpcy5ib3R0b209ZSx0PWlzQXJyYXkoaS50ZXh0KT9pLnRleHQubGVuZ3RoOjEsdGhpcy5fcGFkZGluZz10b1BhZGRpbmcoaS5wYWRkaW5nKSxlPXQqdG9Gb250KGkuZm9udCkubGluZUhlaWdodCt0aGlzLl9wYWRkaW5nLmhlaWdodCx0aGlzLmlzSG9yaXpvbnRhbCgpP3RoaXMuaGVpZ2h0PWU6dGhpcy53aWR0aD1lKTp0aGlzLndpZHRoPXRoaXMuaGVpZ2h0PXRoaXMucmlnaHQ9dGhpcy5ib3R0b209MH1pc0hvcml6b250YWwoKXt2YXIgdD10aGlzLm9wdGlvbnMucG9zaXRpb247cmV0dXJuInRvcCI9PT10fHwiYm90dG9tIj09PXR9X2RyYXdBcmdzKHQpe3Zhcnt0b3A6ZSxsZWZ0OmksYm90dG9tOmEscmlnaHQ6cyxvcHRpb25zOm59PXRoaXMscj1uLmFsaWduO2xldCBvPTAsbCxoLGQ7cmV0dXJuIGw9dGhpcy5pc0hvcml6b250YWwoKT8oaD1fYWxpZ25TdGFydEVuZChyLGkscyksZD1lK3Qscy1pKToobz0ibGVmdCI9PT1uLnBvc2l0aW9uPyhoPWkrdCxkPV9hbGlnblN0YXJ0RW5kKHIsYSxlKSwtLjUqUEkpOihoPXMtdCxkPV9hbGlnblN0YXJ0RW5kKHIsZSxhKSwuNSpQSSksYS1lKSx7dGl0bGVYOmgsdGl0bGVZOmQsbWF4V2lkdGg6bCxyb3RhdGlvbjpvfX1kcmF3KCl7dmFyIHQsZSxpLGEscyxuPXRoaXMuY3R4LHI9dGhpcy5vcHRpb25zO3IuZGlzcGxheSYmKGU9KHQ9dG9Gb250KHIuZm9udCkpLmxpbmVIZWlnaHQvMit0aGlzLl9wYWRkaW5nLnRvcCx7dGl0bGVYOmUsdGl0bGVZOmksbWF4V2lkdGg6YSxyb3RhdGlvbjpzfT10aGlzLl9kcmF3QXJncyhlKSxyZW5kZXJUZXh0KG4sci50ZXh0LDAsMCx0LHtjb2xvcjpyLmNvbG9yLG1heFdpZHRoOmEscm90YXRpb246cyx0ZXh0QWxpZ246X3RvTGVmdFJpZ2h0Q2VudGVyKHIuYWxpZ24pLHRleHRCYXNlbGluZToibWlkZGxlIix0cmFuc2xhdGlvbjpbZSxpXX0pKX19ZnVuY3Rpb24gY3JlYXRlVGl0bGUodCxlKXt2YXIgaT1uZXcgVGl0bGUoe2N0eDp0LmN0eCxvcHRpb25zOmUsY2hhcnQ6dH0pO2xheW91dHMuY29uZmlndXJlKHQsaSxlKSxsYXlvdXRzLmFkZEJveCh0LGkpLHQudGl0bGVCbG9jaz1pfXZhciBwbHVnaW5fdGl0bGU9e2lkOiJ0aXRsZSIsX2VsZW1lbnQ6VGl0bGUsc3RhcnQodCxlLGkpe2NyZWF0ZVRpdGxlKHQsaSl9LHN0b3AodCl7dmFyIGU9dC50aXRsZUJsb2NrO2xheW91dHMucmVtb3ZlQm94KHQsZSksZGVsZXRlIHQudGl0bGVCbG9ja30sYmVmb3JlVXBkYXRlKHQsZSxpKXtjb25zdCBhPXQudGl0bGVCbG9jaztsYXlvdXRzLmNvbmZpZ3VyZSh0LGEsaSksYS5vcHRpb25zPWl9LGRlZmF1bHRzOnthbGlnbjoiY2VudGVyIixkaXNwbGF5OiExLGZvbnQ6e3dlaWdodDoiYm9sZCJ9LGZ1bGxTaXplOiEwLHBhZGRpbmc6MTAscG9zaXRpb246InRvcCIsdGV4dDoiIix3ZWlnaHQ6MmUzfSxkZWZhdWx0Um91dGVzOntjb2xvcjoiY29sb3IifSxkZXNjcmlwdG9yczp7X3NjcmlwdGFibGU6ITAsX2luZGV4YWJsZTohMX19O2NvbnN0IG1hcD1uZXcgV2Vha01hcDt2YXIgcGx1Z2luX3N1YnRpdGxlPXtpZDoic3VidGl0bGUiLHN0YXJ0KHQsZSxpKXt2YXIgYT1uZXcgVGl0bGUoe2N0eDp0LmN0eCxvcHRpb25zOmksY2hhcnQ6dH0pO2xheW91dHMuY29uZmlndXJlKHQsYSxpKSxsYXlvdXRzLmFkZEJveCh0LGEpLG1hcC5zZXQodCxhKX0sc3RvcCh0KXtsYXlvdXRzLnJlbW92ZUJveCh0LG1hcC5nZXQodCkpLG1hcC5kZWxldGUodCl9LGJlZm9yZVVwZGF0ZSh0LGUsaSl7Y29uc3QgYT1tYXAuZ2V0KHQpO2xheW91dHMuY29uZmlndXJlKHQsYSxpKSxhLm9wdGlvbnM9aX0sZGVmYXVsdHM6e2FsaWduOiJjZW50ZXIiLGRpc3BsYXk6ITEsZm9udDp7d2VpZ2h0OiJub3JtYWwifSxmdWxsU2l6ZTohMCxwYWRkaW5nOjAscG9zaXRpb246InRvcCIsdGV4dDoiIix3ZWlnaHQ6MTUwMH0sZGVmYXVsdFJvdXRlczp7Y29sb3I6ImNvbG9yIn0sZGVzY3JpcHRvcnM6e19zY3JpcHRhYmxlOiEwLF9pbmRleGFibGU6ITF9fTtjb25zdCBwb3NpdGlvbmVycz17YXZlcmFnZSh0KXtpZighdC5sZW5ndGgpcmV0dXJuITE7bGV0IGUsaSxhPTAscz0wLG49MDtmb3IoZT0wLGk9dC5sZW5ndGg7ZTxpOysrZSl7Y29uc3Qgbz10W2VdLmVsZW1lbnQ7dmFyIHI7byYmby5oYXNWYWx1ZSgpJiYocj1vLnRvb2x0aXBQb3NpdGlvbigpLGErPXIueCxzKz1yLnksKytuKX1yZXR1cm57eDphL24seTpzL259fSxuZWFyZXN0KHQsZSl7aWYoIXQubGVuZ3RoKXJldHVybiExO2xldCBpPWUueCxhPWUueSxzPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxuLHIsbztmb3Iobj0wLHI9dC5sZW5ndGg7bjxyOysrbil7Y29uc3QgZD10W25dLmVsZW1lbnQ7dmFyIGw7ZCYmZC5oYXNWYWx1ZSgpJiYobD1kLmdldENlbnRlclBvaW50KCksKGw9ZGlzdGFuY2VCZXR3ZWVuUG9pbnRzKGUsbCkpPHMmJihzPWwsbz1kKSl9dmFyIGg7cmV0dXJuIG8mJihoPW8udG9vbHRpcFBvc2l0aW9uKCksaT1oLngsYT1oLnkpLHt4OmkseTphfX19O2Z1bmN0aW9uIHB1c2hPckNvbmNhdCh0LGUpe3JldHVybiBlJiYoaXNBcnJheShlKT9BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0LGUpOnQucHVzaChlKSksdH1mdW5jdGlvbiBzcGxpdE5ld2xpbmVzKHQpe3JldHVybigic3RyaW5nIj09dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBTdHJpbmcpJiYtMTx0LmluZGV4T2YoIlxuIik/dC5zcGxpdCgiXG4iKTp0fWZ1bmN0aW9uIGNyZWF0ZVRvb2x0aXBJdGVtKHQsZSl7dmFye2VsZW1lbnQ6ZSxkYXRhc2V0SW5kZXg6aSxpbmRleDphfT1lO2NvbnN0IHM9dC5nZXREYXRhc2V0TWV0YShpKS5jb250cm9sbGVyO3ZhcntsYWJlbDpuLHZhbHVlOnJ9PXMuZ2V0TGFiZWxBbmRWYWx1ZShhKTtyZXR1cm57Y2hhcnQ6dCxsYWJlbDpuLHBhcnNlZDpzLmdldFBhcnNlZChhKSxyYXc6dC5kYXRhLmRhdGFzZXRzW2ldLmRhdGFbYV0sZm9ybWF0dGVkVmFsdWU6cixkYXRhc2V0OnMuZ2V0RGF0YXNldCgpLGRhdGFJbmRleDphLGRhdGFzZXRJbmRleDppLGVsZW1lbnQ6ZX19ZnVuY3Rpb24gZ2V0VG9vbHRpcFNpemUodCxlKXtjb25zdCBpPXQuY2hhcnQuY3R4LHtib2R5OmEsZm9vdGVyOnMsdGl0bGU6bn09dDt2YXJ7Ym94V2lkdGg6cixib3hIZWlnaHQ6b309ZSxsPXRvRm9udChlLmJvZHlGb250KSxoPXRvRm9udChlLnRpdGxlRm9udCksZD10b0ZvbnQoZS5mb290ZXJGb250KSxjPW4ubGVuZ3RoLHU9cy5sZW5ndGgsZz1hLmxlbmd0aCxwPXRvUGFkZGluZyhlLnBhZGRpbmcpO2xldCBmPXAuaGVpZ2h0LG09MDt2YXIgdj1hLnJlZHVjZSgodCxlKT0+dCtlLmJlZm9yZS5sZW5ndGgrZS5saW5lcy5sZW5ndGgrZS5hZnRlci5sZW5ndGgsMCk7dis9dC5iZWZvcmVCb2R5Lmxlbmd0aCt0LmFmdGVyQm9keS5sZW5ndGgsYyYmKGYrPWMqaC5saW5lSGVpZ2h0KyhjLTEpKmUudGl0bGVTcGFjaW5nK2UudGl0bGVNYXJnaW5Cb3R0b20pLHYmJihjPWUuZGlzcGxheUNvbG9ycz9NYXRoLm1heChvLGwubGluZUhlaWdodCk6bC5saW5lSGVpZ2h0LGYrPWcqYysodi1nKSpsLmxpbmVIZWlnaHQrKHYtMSkqZS5ib2R5U3BhY2luZyksdSYmKGYrPWUuZm9vdGVyTWFyZ2luVG9wK3UqZC5saW5lSGVpZ2h0Kyh1LTEpKmUuZm9vdGVyU3BhY2luZyk7bGV0IHg9MDtmdW5jdGlvbiBiKHQpe209TWF0aC5tYXgobSxpLm1lYXN1cmVUZXh0KHQpLndpZHRoK3gpfXJldHVybiBpLnNhdmUoKSxpLmZvbnQ9aC5zdHJpbmcsZWFjaCh0LnRpdGxlLGIpLGkuZm9udD1sLnN0cmluZyxlYWNoKHQuYmVmb3JlQm9keS5jb25jYXQodC5hZnRlckJvZHkpLGIpLHg9ZS5kaXNwbGF5Q29sb3JzP3IrMitlLmJveFBhZGRpbmc6MCxlYWNoKGEsdD0+e2VhY2godC5iZWZvcmUsYiksZWFjaCh0LmxpbmVzLGIpLGVhY2godC5hZnRlcixiKX0pLHg9MCxpLmZvbnQ9ZC5zdHJpbmcsZWFjaCh0LmZvb3RlcixiKSxpLnJlc3RvcmUoKSx7d2lkdGg6bSs9cC53aWR0aCxoZWlnaHQ6Zn19ZnVuY3Rpb24gZGV0ZXJtaW5lWUFsaWduKHQsZSl7dmFye3k6ZSxoZWlnaHQ6aX09ZTtyZXR1cm4gZTxpLzI/InRvcCI6ZT50LmhlaWdodC1pLzI/ImJvdHRvbSI6ImNlbnRlciJ9ZnVuY3Rpb24gZG9lc05vdEZpdFdpdGhBbGlnbih0LGUsaSxhKXt2YXJ7eDphLHdpZHRoOnN9PWEsaT1pLmNhcmV0U2l6ZStpLmNhcmV0UGFkZGluZztyZXR1cm4ibGVmdCI9PT10JiZhK3MraT5lLndpZHRofHwoInJpZ2h0Ij09PXQmJmEtcy1pPDB8fHZvaWQgMCl9ZnVuY3Rpb24gZGV0ZXJtaW5lWEFsaWduKHQsZSxpLGEpe3Zhcnt4OnMsd2lkdGg6bn09aSx7d2lkdGg6cixjaGFydEFyZWE6e2xlZnQ6byxyaWdodDpsfX09dDtsZXQgaD0iY2VudGVyIjtyZXR1cm4iY2VudGVyIj09PWE/aD1zPD0obytsKS8yPyJsZWZ0IjoicmlnaHQiOnM8PW4vMj9oPSJsZWZ0IjpyLW4vMjw9cyYmKGg9InJpZ2h0IiksaD1kb2VzTm90Rml0V2l0aEFsaWduKGgsdCxlLGkpPyJjZW50ZXIiOmh9ZnVuY3Rpb24gZGV0ZXJtaW5lQWxpZ25tZW50KHQsZSxpKXt2YXIgYT1pLnlBbGlnbnx8ZS55QWxpZ258fGRldGVybWluZVlBbGlnbih0LGkpO3JldHVybnt4QWxpZ246aS54QWxpZ258fGUueEFsaWdufHxkZXRlcm1pbmVYQWxpZ24odCxlLGksYSkseUFsaWduOmF9fWZ1bmN0aW9uIGFsaWduWCh0LGUpe2xldHt4Omksd2lkdGg6YX09dDtyZXR1cm4icmlnaHQiPT09ZT9pLT1hOiJjZW50ZXIiPT09ZSYmKGktPWEvMiksaX1mdW5jdGlvbiBhbGlnblkodCxlLGkpe2xldHt5OmEsaGVpZ2h0OnN9PXQ7cmV0dXJuInRvcCI9PT1lP2ErPWk6YS09ImJvdHRvbSI9PT1lP3MraTpzLzIsYX1mdW5jdGlvbiBnZXRCYWNrZ3JvdW5kUG9pbnQodCxlLGksYSl7dmFye2NhcmV0U2l6ZTp0LGNhcmV0UGFkZGluZzpzLGNvcm5lclJhZGl1czpufT10LHt4QWxpZ246aSx5QWxpZ246cn09aSxzPXQrcyx7dG9wTGVmdDpuLHRvcFJpZ2h0Om8sYm90dG9tTGVmdDpsLGJvdHRvbVJpZ2h0Omh9PXRvVFJCTENvcm5lcnMobik7bGV0IGQ9YWxpZ25YKGUsaSk7dmFyIGM9YWxpZ25ZKGUscixzKTtyZXR1cm4iY2VudGVyIj09PXI/ImxlZnQiPT09aT9kKz1zOiJyaWdodCI9PT1pJiYoZC09cyk6ImxlZnQiPT09aT9kLT1NYXRoLm1heChuLGwpK3Q6InJpZ2h0Ij09PWkmJihkKz1NYXRoLm1heChvLGgpK3QpLHt4Ol9saW1pdFZhbHVlKGQsMCxhLndpZHRoLWUud2lkdGgpLHk6X2xpbWl0VmFsdWUoYywwLGEuaGVpZ2h0LWUuaGVpZ2h0KX19ZnVuY3Rpb24gZ2V0QWxpZ25lZFgodCxlLGkpe2k9dG9QYWRkaW5nKGkucGFkZGluZyk7cmV0dXJuImNlbnRlciI9PT1lP3QueCt0LndpZHRoLzI6InJpZ2h0Ij09PWU/dC54K3Qud2lkdGgtaS5yaWdodDp0LngraS5sZWZ0fWZ1bmN0aW9uIGdldEJlZm9yZUFmdGVyQm9keUxpbmVzKHQpe3JldHVybiBwdXNoT3JDb25jYXQoW10sc3BsaXROZXdsaW5lcyh0KSl9ZnVuY3Rpb24gY3JlYXRlVG9vbHRpcENvbnRleHQodCxlLGkpe3JldHVybiBjcmVhdGVDb250ZXh0KHQse3Rvb2x0aXA6ZSx0b29sdGlwSXRlbXM6aSx0eXBlOiJ0b29sdGlwIn0pfWZ1bmN0aW9uIG92ZXJyaWRlQ2FsbGJhY2tzKHQsZSl7ZT1lJiZlLmRhdGFzZXQmJmUuZGF0YXNldC50b29sdGlwJiZlLmRhdGFzZXQudG9vbHRpcC5jYWxsYmFja3M7cmV0dXJuIGU/dC5vdmVycmlkZShlKTp0fWNvbnN0IGRlZmF1bHRDYWxsYmFja3M9e2JlZm9yZVRpdGxlOm5vb3AsdGl0bGUodCl7aWYoMDx0Lmxlbmd0aCl7dmFyIHQ9dFswXSxlPXQuY2hhcnQuZGF0YS5sYWJlbHMsaT1lP2UubGVuZ3RoOjA7aWYodGhpcyYmdGhpcy5vcHRpb25zJiYiZGF0YXNldCI9PT10aGlzLm9wdGlvbnMubW9kZSlyZXR1cm4gdC5kYXRhc2V0LmxhYmVsfHwiIjtpZih0LmxhYmVsKXJldHVybiB0LmxhYmVsO2lmKDA8aSYmdC5kYXRhSW5kZXg8aSlyZXR1cm4gZVt0LmRhdGFJbmRleF19cmV0dXJuIiJ9LGFmdGVyVGl0bGU6bm9vcCxiZWZvcmVCb2R5Om5vb3AsYmVmb3JlTGFiZWw6bm9vcCxsYWJlbCh0KXtpZih0aGlzJiZ0aGlzLm9wdGlvbnMmJiJkYXRhc2V0Ij09PXRoaXMub3B0aW9ucy5tb2RlKXJldHVybiB0LmxhYmVsKyI6ICIrdC5mb3JtYXR0ZWRWYWx1ZXx8dC5mb3JtYXR0ZWRWYWx1ZTtsZXQgZT10LmRhdGFzZXQubGFiZWx8fCIiO2UmJihlKz0iOiAiKTt0PXQuZm9ybWF0dGVkVmFsdWU7cmV0dXJuIGlzTnVsbE9yVW5kZWYodCl8fChlKz10KSxlfSxsYWJlbENvbG9yKHQpe2NvbnN0IGU9dC5jaGFydC5nZXREYXRhc2V0TWV0YSh0LmRhdGFzZXRJbmRleCk7dD1lLmNvbnRyb2xsZXIuZ2V0U3R5bGUodC5kYXRhSW5kZXgpO3JldHVybntib3JkZXJDb2xvcjp0LmJvcmRlckNvbG9yLGJhY2tncm91bmRDb2xvcjp0LmJhY2tncm91bmRDb2xvcixib3JkZXJXaWR0aDp0LmJvcmRlcldpZHRoLGJvcmRlckRhc2g6dC5ib3JkZXJEYXNoLGJvcmRlckRhc2hPZmZzZXQ6dC5ib3JkZXJEYXNoT2Zmc2V0LGJvcmRlclJhZGl1czowfX0sbGFiZWxUZXh0Q29sb3IoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmJvZHlDb2xvcn0sbGFiZWxQb2ludFN0eWxlKHQpe2NvbnN0IGU9dC5jaGFydC5nZXREYXRhc2V0TWV0YSh0LmRhdGFzZXRJbmRleCk7dD1lLmNvbnRyb2xsZXIuZ2V0U3R5bGUodC5kYXRhSW5kZXgpO3JldHVybntwb2ludFN0eWxlOnQucG9pbnRTdHlsZSxyb3RhdGlvbjp0LnJvdGF0aW9ufX0sYWZ0ZXJMYWJlbDpub29wLGFmdGVyQm9keTpub29wLGJlZm9yZUZvb3Rlcjpub29wLGZvb3Rlcjpub29wLGFmdGVyRm9vdGVyOm5vb3B9O2Z1bmN0aW9uIGludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKHQsZSxpLGEpe3Q9dFtlXS5jYWxsKGksYSk7cmV0dXJuIHZvaWQgMD09PXQ/ZGVmYXVsdENhbGxiYWNrc1tlXS5jYWxsKGksYSk6dH1jbGFzcyBUb29sdGlwIGV4dGVuZHMgRWxlbWVudHtzdGF0aWMgcG9zaXRpb25lcnM9cG9zaXRpb25lcnM7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLm9wYWNpdHk9MCx0aGlzLl9hY3RpdmU9W10sdGhpcy5fZXZlbnRQb3NpdGlvbj12b2lkIDAsdGhpcy5fc2l6ZT12b2lkIDAsdGhpcy5fY2FjaGVkQW5pbWF0aW9ucz12b2lkIDAsdGhpcy5fdG9vbHRpcEl0ZW1zPVtdLHRoaXMuJGFuaW1hdGlvbnM9dm9pZCAwLHRoaXMuJGNvbnRleHQ9dm9pZCAwLHRoaXMuY2hhcnQ9dC5jaGFydCx0aGlzLm9wdGlvbnM9dC5vcHRpb25zLHRoaXMuZGF0YVBvaW50cz12b2lkIDAsdGhpcy50aXRsZT12b2lkIDAsdGhpcy5iZWZvcmVCb2R5PXZvaWQgMCx0aGlzLmJvZHk9dm9pZCAwLHRoaXMuYWZ0ZXJCb2R5PXZvaWQgMCx0aGlzLmZvb3Rlcj12b2lkIDAsdGhpcy54QWxpZ249dm9pZCAwLHRoaXMueUFsaWduPXZvaWQgMCx0aGlzLng9dm9pZCAwLHRoaXMueT12b2lkIDAsdGhpcy5oZWlnaHQ9dm9pZCAwLHRoaXMud2lkdGg9dm9pZCAwLHRoaXMuY2FyZXRYPXZvaWQgMCx0aGlzLmNhcmV0WT12b2lkIDAsdGhpcy5sYWJlbENvbG9ycz12b2lkIDAsdGhpcy5sYWJlbFBvaW50U3R5bGVzPXZvaWQgMCx0aGlzLmxhYmVsVGV4dENvbG9ycz12b2lkIDB9aW5pdGlhbGl6ZSh0KXt0aGlzLm9wdGlvbnM9dCx0aGlzLl9jYWNoZWRBbmltYXRpb25zPXZvaWQgMCx0aGlzLiRjb250ZXh0PXZvaWQgMH1fcmVzb2x2ZUFuaW1hdGlvbnMoKXt2YXIgdD10aGlzLl9jYWNoZWRBbmltYXRpb25zO2lmKHQpcmV0dXJuIHQ7dmFyIHQ9dGhpcy5jaGFydCxlPXRoaXMub3B0aW9ucy5zZXRDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKSx0PWUuZW5hYmxlZCYmdC5vcHRpb25zLmFuaW1hdGlvbiYmZS5hbmltYXRpb25zLGU9bmV3IEFuaW1hdGlvbnModGhpcy5jaGFydCx0KTtyZXR1cm4gdC5fY2FjaGVhYmxlJiYodGhpcy5fY2FjaGVkQW5pbWF0aW9ucz1PYmplY3QuZnJlZXplKGUpKSxlfWdldENvbnRleHQoKXtyZXR1cm4gdGhpcy4kY29udGV4dHx8KHRoaXMuJGNvbnRleHQ9Y3JlYXRlVG9vbHRpcENvbnRleHQodGhpcy5jaGFydC5nZXRDb250ZXh0KCksdGhpcyx0aGlzLl90b29sdGlwSXRlbXMpKX1nZXRUaXRsZSh0LGUpe3ZhciBlPWVbImNhbGxiYWNrcyJdLGk9aW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soZSwiYmVmb3JlVGl0bGUiLHRoaXMsdCksYT1pbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLCJ0aXRsZSIsdGhpcyx0KSxlPWludm9rZUNhbGxiYWNrV2l0aEZhbGxiYWNrKGUsImFmdGVyVGl0bGUiLHRoaXMsdCksdD1wdXNoT3JDb25jYXQoW10sc3BsaXROZXdsaW5lcyhpKSk7cmV0dXJuIHQ9cHVzaE9yQ29uY2F0KHQsc3BsaXROZXdsaW5lcyhhKSkscHVzaE9yQ29uY2F0KHQsc3BsaXROZXdsaW5lcyhlKSl9Z2V0QmVmb3JlQm9keSh0LGUpe3JldHVybiBnZXRCZWZvcmVBZnRlckJvZHlMaW5lcyhpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLmNhbGxiYWNrcywiYmVmb3JlQm9keSIsdGhpcyx0KSl9Z2V0Qm9keSh0LGUpe2NvbnN0IGE9ZVsiY2FsbGJhY2tzIl0scz1bXTtyZXR1cm4gZWFjaCh0LHQ9Pnt2YXIgZT17YmVmb3JlOltdLGxpbmVzOltdLGFmdGVyOltdfSxpPW92ZXJyaWRlQ2FsbGJhY2tzKGEsdCk7cHVzaE9yQ29uY2F0KGUuYmVmb3JlLHNwbGl0TmV3bGluZXMoaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soaSwiYmVmb3JlTGFiZWwiLHRoaXMsdCkpKSxwdXNoT3JDb25jYXQoZS5saW5lcyxpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhpLCJsYWJlbCIsdGhpcyx0KSkscHVzaE9yQ29uY2F0KGUuYWZ0ZXIsc3BsaXROZXdsaW5lcyhpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhpLCJhZnRlckxhYmVsIix0aGlzLHQpKSkscy5wdXNoKGUpfSksc31nZXRBZnRlckJvZHkodCxlKXtyZXR1cm4gZ2V0QmVmb3JlQWZ0ZXJCb2R5TGluZXMoaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soZS5jYWxsYmFja3MsImFmdGVyQm9keSIsdGhpcyx0KSl9Z2V0Rm9vdGVyKHQsZSl7dmFyIGU9ZVsiY2FsbGJhY2tzIl0saT1pbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLCJiZWZvcmVGb290ZXIiLHRoaXMsdCksYT1pbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLCJmb290ZXIiLHRoaXMsdCksZT1pbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLCJhZnRlckZvb3RlciIsdGhpcyx0KSx0PXB1c2hPckNvbmNhdChbXSxzcGxpdE5ld2xpbmVzKGkpKTtyZXR1cm4gdD1wdXNoT3JDb25jYXQodCxzcGxpdE5ld2xpbmVzKGEpKSxwdXNoT3JDb25jYXQodCxzcGxpdE5ld2xpbmVzKGUpKX1fY3JlYXRlSXRlbXMoYSl7dmFyIHQ9dGhpcy5fYWN0aXZlO2NvbnN0IHM9dGhpcy5jaGFydC5kYXRhLGk9W10sbj1bXSxyPVtdO2xldCBlPVtdLG8sbDtmb3Iobz0wLGw9dC5sZW5ndGg7bzxsOysrbyllLnB1c2goY3JlYXRlVG9vbHRpcEl0ZW0odGhpcy5jaGFydCx0W29dKSk7cmV0dXJuIGEuZmlsdGVyJiYoZT1lLmZpbHRlcigodCxlLGkpPT5hLmZpbHRlcih0LGUsaSxzKSkpLGEuaXRlbVNvcnQmJihlPWUuc29ydCgodCxlKT0+YS5pdGVtU29ydCh0LGUscykpKSxlYWNoKGUsdD0+e3ZhciBlPW92ZXJyaWRlQ2FsbGJhY2tzKGEuY2FsbGJhY2tzLHQpO2kucHVzaChpbnZva2VDYWxsYmFja1dpdGhGYWxsYmFjayhlLCJsYWJlbENvbG9yIix0aGlzLHQpKSxuLnB1c2goaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soZSwibGFiZWxQb2ludFN0eWxlIix0aGlzLHQpKSxyLnB1c2goaW52b2tlQ2FsbGJhY2tXaXRoRmFsbGJhY2soZSwibGFiZWxUZXh0Q29sb3IiLHRoaXMsdCkpfSksdGhpcy5sYWJlbENvbG9ycz1pLHRoaXMubGFiZWxQb2ludFN0eWxlcz1uLHRoaXMubGFiZWxUZXh0Q29sb3JzPXIsdGhpcy5kYXRhUG9pbnRzPWV9dXBkYXRlKHQsZSl7Y29uc3QgaT10aGlzLm9wdGlvbnMuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7dmFyIGEscyxuLHI9dGhpcy5fYWN0aXZlO2xldCBvLGw9W107ci5sZW5ndGg/KHI9cG9zaXRpb25lcnNbaS5wb3NpdGlvbl0uY2FsbCh0aGlzLHIsdGhpcy5fZXZlbnRQb3NpdGlvbiksbD10aGlzLl9jcmVhdGVJdGVtcyhpKSx0aGlzLnRpdGxlPXRoaXMuZ2V0VGl0bGUobCxpKSx0aGlzLmJlZm9yZUJvZHk9dGhpcy5nZXRCZWZvcmVCb2R5KGwsaSksdGhpcy5ib2R5PXRoaXMuZ2V0Qm9keShsLGkpLHRoaXMuYWZ0ZXJCb2R5PXRoaXMuZ2V0QWZ0ZXJCb2R5KGwsaSksdGhpcy5mb290ZXI9dGhpcy5nZXRGb290ZXIobCxpKSxhPXRoaXMuX3NpemU9Z2V0VG9vbHRpcFNpemUodGhpcyxpKSxuPU9iamVjdC5hc3NpZ24oe30scixhKSxzPWRldGVybWluZUFsaWdubWVudCh0aGlzLmNoYXJ0LGksbiksbj1nZXRCYWNrZ3JvdW5kUG9pbnQoaSxuLHMsdGhpcy5jaGFydCksdGhpcy54QWxpZ249cy54QWxpZ24sdGhpcy55QWxpZ249cy55QWxpZ24sbz17b3BhY2l0eToxLHg6bi54LHk6bi55LHdpZHRoOmEud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0LGNhcmV0WDpyLngsY2FyZXRZOnIueX0pOjAhPT10aGlzLm9wYWNpdHkmJihvPXtvcGFjaXR5OjB9KSx0aGlzLl90b29sdGlwSXRlbXM9bCx0aGlzLiRjb250ZXh0PXZvaWQgMCxvJiZ0aGlzLl9yZXNvbHZlQW5pbWF0aW9ucygpLnVwZGF0ZSh0aGlzLG8pLHQmJmkuZXh0ZXJuYWwmJmkuZXh0ZXJuYWwuY2FsbCh0aGlzLHtjaGFydDp0aGlzLmNoYXJ0LHRvb2x0aXA6dGhpcyxyZXBsYXk6ZX0pfWRyYXdDYXJldCh0LGUsaSxhKXt0PXRoaXMuZ2V0Q2FyZXRQb3NpdGlvbih0LGksYSk7ZS5saW5lVG8odC54MSx0LnkxKSxlLmxpbmVUbyh0LngyLHQueTIpLGUubGluZVRvKHQueDMsdC55Myl9Z2V0Q2FyZXRQb3NpdGlvbih0LGUsaSl7dmFye3hBbGlnbjphLHlBbGlnbjpzfT10aGlzLHtjYXJldFNpemU6aSxjb3JuZXJSYWRpdXM6bn09aSx7dG9wTGVmdDpuLHRvcFJpZ2h0OnIsYm90dG9tTGVmdDpvLGJvdHRvbVJpZ2h0Omx9PXRvVFJCTENvcm5lcnMobikse3g6dCx5Omh9PXQse3dpZHRoOmUsaGVpZ2h0OmR9PWU7bGV0IGMsdSxnLHAsZixtO3JldHVybiJjZW50ZXIiPT09cz8oZj1oK2QvMixtPSJsZWZ0Ij09PWE/KGM9dCx1PWMtaSxwPWYraSxmLWkpOihjPXQrZSx1PWMraSxwPWYtaSxmK2kpLGc9Yyk6KHU9ImxlZnQiPT09YT90K01hdGgubWF4KG4sbykraToicmlnaHQiPT09YT90K2UtTWF0aC5tYXgocixsKS1pOnRoaXMuY2FyZXRYLGc9InRvcCI9PT1zPyhwPWgsZj1wLWksYz11LWksdStpKToocD1oK2QsZj1wK2ksYz11K2ksdS1pKSxtPXApLHt4MTpjLHgyOnUseDM6Zyx5MTpwLHkyOmYseTM6bX19ZHJhd1RpdGxlKHQsZSxpKXt2YXIgYT10aGlzLnRpdGxlLHM9YS5sZW5ndGg7bGV0IG4scixvO2lmKHMpe2NvbnN0IGw9Z2V0UnRsQWRhcHRlcihpLnJ0bCx0aGlzLngsdGhpcy53aWR0aCk7Zm9yKHQueD1nZXRBbGlnbmVkWCh0aGlzLGkudGl0bGVBbGlnbixpKSxlLnRleHRBbGlnbj1sLnRleHRBbGlnbihpLnRpdGxlQWxpZ24pLGUudGV4dEJhc2VsaW5lPSJtaWRkbGUiLG49dG9Gb250KGkudGl0bGVGb250KSxyPWkudGl0bGVTcGFjaW5nLGUuZmlsbFN0eWxlPWkudGl0bGVDb2xvcixlLmZvbnQ9bi5zdHJpbmcsbz0wO288czsrK28pZS5maWxsVGV4dChhW29dLGwueCh0LngpLHQueStuLmxpbmVIZWlnaHQvMiksdC55Kz1uLmxpbmVIZWlnaHQrcixvKzE9PT1zJiYodC55Kz1pLnRpdGxlTWFyZ2luQm90dG9tLXIpfX1fZHJhd0NvbG9yQm94KHQsZSxpLGEscyl7dmFyIG4scj10aGlzLmxhYmVsQ29sb3JzW2ldLG89dGhpcy5sYWJlbFBvaW50U3R5bGVzW2ldLHtib3hIZWlnaHQ6bCxib3hXaWR0aDpofT1zLGQ9dG9Gb250KHMuYm9keUZvbnQpLGM9Z2V0QWxpZ25lZFgodGhpcywibGVmdCIscyksYz1hLngoYyksZD1sPGQubGluZUhlaWdodD8oZC5saW5lSGVpZ2h0LWwpLzI6MCxlPWUueStkO3MudXNlUG9pbnRTdHlsZT8oZD17cmFkaXVzOk1hdGgubWluKGgsbCkvMixwb2ludFN0eWxlOm8ucG9pbnRTdHlsZSxyb3RhdGlvbjpvLnJvdGF0aW9uLGJvcmRlcldpZHRoOjF9LG89YS5sZWZ0Rm9yTHRyKGMsaCkraC8yLG49ZStsLzIsdC5zdHJva2VTdHlsZT1zLm11bHRpS2V5QmFja2dyb3VuZCx0LmZpbGxTdHlsZT1zLm11bHRpS2V5QmFja2dyb3VuZCxkcmF3UG9pbnQodCxkLG8sbiksdC5zdHJva2VTdHlsZT1yLmJvcmRlckNvbG9yLHQuZmlsbFN0eWxlPXIuYmFja2dyb3VuZENvbG9yLGRyYXdQb2ludCh0LGQsbyxuKSk6KHQubGluZVdpZHRoPWlzT2JqZWN0KHIuYm9yZGVyV2lkdGgpP01hdGgubWF4KC4uLk9iamVjdC52YWx1ZXMoci5ib3JkZXJXaWR0aCkpOnIuYm9yZGVyV2lkdGh8fDEsdC5zdHJva2VTdHlsZT1yLmJvcmRlckNvbG9yLHQuc2V0TGluZURhc2goci5ib3JkZXJEYXNofHxbXSksdC5saW5lRGFzaE9mZnNldD1yLmJvcmRlckRhc2hPZmZzZXR8fDAsZD1hLmxlZnRGb3JMdHIoYyxoKSxvPWEubGVmdEZvckx0cihhLnhQbHVzKGMsMSksaC0yKSxuPXRvVFJCTENvcm5lcnMoci5ib3JkZXJSYWRpdXMpLE9iamVjdC52YWx1ZXMobikuc29tZSh0PT4wIT09dCk/KHQuYmVnaW5QYXRoKCksdC5maWxsU3R5bGU9cy5tdWx0aUtleUJhY2tncm91bmQsYWRkUm91bmRlZFJlY3RQYXRoKHQse3g6ZCx5OmUsdzpoLGg6bCxyYWRpdXM6bn0pLHQuZmlsbCgpLHQuc3Ryb2tlKCksdC5maWxsU3R5bGU9ci5iYWNrZ3JvdW5kQ29sb3IsdC5iZWdpblBhdGgoKSxhZGRSb3VuZGVkUmVjdFBhdGgodCx7eDpvLHk6ZSsxLHc6aC0yLGg6bC0yLHJhZGl1czpufSksdC5maWxsKCkpOih0LmZpbGxTdHlsZT1zLm11bHRpS2V5QmFja2dyb3VuZCx0LmZpbGxSZWN0KGQsZSxoLGwpLHQuc3Ryb2tlUmVjdChkLGUsaCxsKSx0LmZpbGxTdHlsZT1yLmJhY2tncm91bmRDb2xvcix0LmZpbGxSZWN0KG8sZSsxLGgtMixsLTIpKSksdC5maWxsU3R5bGU9dGhpcy5sYWJlbFRleHRDb2xvcnNbaV19ZHJhd0JvZHkoZSxpLHQpe3ZhciBhPXRoaXNbImJvZHkiXTtjb25zdHtib2R5U3BhY2luZzpzLGJvZHlBbGlnbjpuLGRpc3BsYXlDb2xvcnM6cixib3hIZWlnaHQ6byxib3hXaWR0aDpsLGJveFBhZGRpbmc6aH09dDt2YXIgZD10b0ZvbnQodC5ib2R5Rm9udCk7bGV0IGM9ZC5saW5lSGVpZ2h0LHU9MDtjb25zdCBnPWdldFJ0bEFkYXB0ZXIodC5ydGwsdGhpcy54LHRoaXMud2lkdGgpO2Z1bmN0aW9uIHAodCl7aS5maWxsVGV4dCh0LGcueChlLngrdSksZS55K2MvMiksZS55Kz1jK3N9dmFyIGY9Zy50ZXh0QWxpZ24obik7bGV0IG0sdix4LGIsXyx5LGs7Zm9yKGkudGV4dEFsaWduPW4saS50ZXh0QmFzZWxpbmU9Im1pZGRsZSIsaS5mb250PWQuc3RyaW5nLGUueD1nZXRBbGlnbmVkWCh0aGlzLGYsdCksaS5maWxsU3R5bGU9dC5ib2R5Q29sb3IsZWFjaCh0aGlzLmJlZm9yZUJvZHkscCksdT1yJiYicmlnaHQiIT09Zj8iY2VudGVyIj09PW4/bC8yK2g6bCsyK2g6MCxiPTAseT1hLmxlbmd0aDtiPHk7KytiKXtmb3IobT1hW2JdLHY9dGhpcy5sYWJlbFRleHRDb2xvcnNbYl0saS5maWxsU3R5bGU9dixlYWNoKG0uYmVmb3JlLHApLHg9bS5saW5lcyxyJiZ4Lmxlbmd0aCYmKHRoaXMuX2RyYXdDb2xvckJveChpLGUsYixnLHQpLGM9TWF0aC5tYXgoZC5saW5lSGVpZ2h0LG8pKSxfPTAsaz14Lmxlbmd0aDtfPGs7KytfKXAoeFtfXSksYz1kLmxpbmVIZWlnaHQ7ZWFjaChtLmFmdGVyLHApfXU9MCxjPWQubGluZUhlaWdodCxlYWNoKHRoaXMuYWZ0ZXJCb2R5LHApLGUueS09c31kcmF3Rm9vdGVyKHQsZSxpKXt2YXIgYT10aGlzLmZvb3RlcixzPWEubGVuZ3RoO2xldCBuLHI7aWYocyl7Y29uc3Qgbz1nZXRSdGxBZGFwdGVyKGkucnRsLHRoaXMueCx0aGlzLndpZHRoKTtmb3IodC54PWdldEFsaWduZWRYKHRoaXMsaS5mb290ZXJBbGlnbixpKSx0LnkrPWkuZm9vdGVyTWFyZ2luVG9wLGUudGV4dEFsaWduPW8udGV4dEFsaWduKGkuZm9vdGVyQWxpZ24pLGUudGV4dEJhc2VsaW5lPSJtaWRkbGUiLG49dG9Gb250KGkuZm9vdGVyRm9udCksZS5maWxsU3R5bGU9aS5mb290ZXJDb2xvcixlLmZvbnQ9bi5zdHJpbmcscj0wO3I8czsrK3IpZS5maWxsVGV4dChhW3JdLG8ueCh0LngpLHQueStuLmxpbmVIZWlnaHQvMiksdC55Kz1uLmxpbmVIZWlnaHQraS5mb290ZXJTcGFjaW5nfX1kcmF3QmFja2dyb3VuZCh0LGUsaSxhKXt2YXJ7eEFsaWduOnMseUFsaWduOm59PXRoaXMse3g6cix5Om99PXQse3dpZHRoOmwsaGVpZ2h0Omh9PWkse3RvcExlZnQ6ZCx0b3BSaWdodDpjLGJvdHRvbUxlZnQ6dSxib3R0b21SaWdodDpnfT10b1RSQkxDb3JuZXJzKGEuY29ybmVyUmFkaXVzKTtlLmZpbGxTdHlsZT1hLmJhY2tncm91bmRDb2xvcixlLnN0cm9rZVN0eWxlPWEuYm9yZGVyQ29sb3IsZS5saW5lV2lkdGg9YS5ib3JkZXJXaWR0aCxlLmJlZ2luUGF0aCgpLGUubW92ZVRvKHIrZCxvKSwidG9wIj09PW4mJnRoaXMuZHJhd0NhcmV0KHQsZSxpLGEpLGUubGluZVRvKHIrbC1jLG8pLGUucXVhZHJhdGljQ3VydmVUbyhyK2wsbyxyK2wsbytjKSwiY2VudGVyIj09PW4mJiJyaWdodCI9PT1zJiZ0aGlzLmRyYXdDYXJldCh0LGUsaSxhKSxlLmxpbmVUbyhyK2wsbytoLWcpLGUucXVhZHJhdGljQ3VydmVUbyhyK2wsbytoLHIrbC1nLG8raCksImJvdHRvbSI9PT1uJiZ0aGlzLmRyYXdDYXJldCh0LGUsaSxhKSxlLmxpbmVUbyhyK3UsbytoKSxlLnF1YWRyYXRpY0N1cnZlVG8ocixvK2gscixvK2gtdSksImNlbnRlciI9PT1uJiYibGVmdCI9PT1zJiZ0aGlzLmRyYXdDYXJldCh0LGUsaSxhKSxlLmxpbmVUbyhyLG8rZCksZS5xdWFkcmF0aWNDdXJ2ZVRvKHIsbyxyK2QsbyksZS5jbG9zZVBhdGgoKSxlLmZpbGwoKSwwPGEuYm9yZGVyV2lkdGgmJmUuc3Ryb2tlKCl9X3VwZGF0ZUFuaW1hdGlvblRhcmdldCh0KXt2YXIgZSxpLGEscz10aGlzLmNoYXJ0LG49dGhpcy4kYW5pbWF0aW9ucyxyPW4mJm4ueCxuPW4mJm4ueTsocnx8bikmJihlPXBvc2l0aW9uZXJzW3QucG9zaXRpb25dLmNhbGwodGhpcyx0aGlzLl9hY3RpdmUsdGhpcy5fZXZlbnRQb3NpdGlvbikpJiYoaT10aGlzLl9zaXplPWdldFRvb2x0aXBTaXplKHRoaXMsdCksYT1nZXRCYWNrZ3JvdW5kUG9pbnQodCxhPU9iamVjdC5hc3NpZ24oe30sZSx0aGlzLl9zaXplKSx0PWRldGVybWluZUFsaWdubWVudChzLHQsYSkscyksci5fdG89PT1hLngmJm4uX3RvPT09YS55fHwodGhpcy54QWxpZ249dC54QWxpZ24sdGhpcy55QWxpZ249dC55QWxpZ24sdGhpcy53aWR0aD1pLndpZHRoLHRoaXMuaGVpZ2h0PWkuaGVpZ2h0LHRoaXMuY2FyZXRYPWUueCx0aGlzLmNhcmV0WT1lLnksdGhpcy5fcmVzb2x2ZUFuaW1hdGlvbnMoKS51cGRhdGUodGhpcyxhKSkpfV93aWxsUmVuZGVyKCl7cmV0dXJuISF0aGlzLm9wYWNpdHl9ZHJhdyh0KXt2YXIgZT10aGlzLm9wdGlvbnMuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7bGV0IGk9dGhpcy5vcGFjaXR5O2lmKGkpe3RoaXMuX3VwZGF0ZUFuaW1hdGlvblRhcmdldChlKTt2YXIgYT17d2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHR9O2NvbnN0IHI9e3g6dGhpcy54LHk6dGhpcy55fTtpPU1hdGguYWJzKGkpPC4wMDE/MDppO3ZhciBzPXRvUGFkZGluZyhlLnBhZGRpbmcpLG49dGhpcy50aXRsZS5sZW5ndGh8fHRoaXMuYmVmb3JlQm9keS5sZW5ndGh8fHRoaXMuYm9keS5sZW5ndGh8fHRoaXMuYWZ0ZXJCb2R5Lmxlbmd0aHx8dGhpcy5mb290ZXIubGVuZ3RoO2UuZW5hYmxlZCYmbiYmKHQuc2F2ZSgpLHQuZ2xvYmFsQWxwaGE9aSx0aGlzLmRyYXdCYWNrZ3JvdW5kKHIsdCxhLGUpLG92ZXJyaWRlVGV4dERpcmVjdGlvbih0LGUudGV4dERpcmVjdGlvbiksci55Kz1zLnRvcCx0aGlzLmRyYXdUaXRsZShyLHQsZSksdGhpcy5kcmF3Qm9keShyLHQsZSksdGhpcy5kcmF3Rm9vdGVyKHIsdCxlKSxyZXN0b3JlVGV4dERpcmVjdGlvbih0LGUudGV4dERpcmVjdGlvbiksdC5yZXN0b3JlKCkpfX1nZXRBY3RpdmVFbGVtZW50cygpe3JldHVybiB0aGlzLl9hY3RpdmV8fFtdfXNldEFjdGl2ZUVsZW1lbnRzKHQsZSl7dmFyIGk9dGhpcy5fYWN0aXZlLHQ9dC5tYXAoKHtkYXRhc2V0SW5kZXg6dCxpbmRleDplfSk9Pnt2YXIgaT10aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHQpO2lmKGkpcmV0dXJue2RhdGFzZXRJbmRleDp0LGVsZW1lbnQ6aS5kYXRhW2VdLGluZGV4OmV9O3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgYSBkYXRhc2V0IGF0IGluZGV4ICIrdCl9KSxpPSFfZWxlbWVudHNFcXVhbChpLHQpLGE9dGhpcy5fcG9zaXRpb25DaGFuZ2VkKHQsZSk7KGl8fGEpJiYodGhpcy5fYWN0aXZlPXQsdGhpcy5fZXZlbnRQb3NpdGlvbj1lLHRoaXMuX2lnbm9yZVJlcGxheUV2ZW50cz0hMCx0aGlzLnVwZGF0ZSghMCkpfWhhbmRsZUV2ZW50KHQsZSxpPSEwKXtpZihlJiZ0aGlzLl9pZ25vcmVSZXBsYXlFdmVudHMpcmV0dXJuITE7dGhpcy5faWdub3JlUmVwbGF5RXZlbnRzPSExO3ZhciBhPXRoaXMub3B0aW9ucyxzPXRoaXMuX2FjdGl2ZXx8W10saT10aGlzLl9nZXRBY3RpdmVFbGVtZW50cyh0LHMsZSxpKSxuPXRoaXMuX3Bvc2l0aW9uQ2hhbmdlZChpLHQpLHM9ZXx8IV9lbGVtZW50c0VxdWFsKGkscyl8fG47cmV0dXJuIHMmJih0aGlzLl9hY3RpdmU9aSwoYS5lbmFibGVkfHxhLmV4dGVybmFsKSYmKHRoaXMuX2V2ZW50UG9zaXRpb249e3g6dC54LHk6dC55fSx0aGlzLnVwZGF0ZSghMCxlKSkpLHN9X2dldEFjdGl2ZUVsZW1lbnRzKHQsZSxpLGEpe3ZhciBzPXRoaXMub3B0aW9ucztpZigibW91c2VvdXQiPT09dC50eXBlKXJldHVybltdO2lmKCFhKXJldHVybiBlLmZpbHRlcih0PT50aGlzLmNoYXJ0LmRhdGEuZGF0YXNldHNbdC5kYXRhc2V0SW5kZXhdJiZ2b2lkIDAhPT10aGlzLmNoYXJ0LmdldERhdGFzZXRNZXRhKHQuZGF0YXNldEluZGV4KS5jb250cm9sbGVyLmdldFBhcnNlZCh0LmluZGV4KSk7Y29uc3Qgbj10aGlzLmNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudEZvck1vZGUodCxzLm1vZGUscyxpKTtyZXR1cm4gcy5yZXZlcnNlJiZuLnJldmVyc2UoKSxufV9wb3NpdGlvbkNoYW5nZWQodCxlKXt2YXJ7Y2FyZXRYOmksY2FyZXRZOmEsb3B0aW9uczpzfT10aGlzLHM9cG9zaXRpb25lcnNbcy5wb3NpdGlvbl0uY2FsbCh0aGlzLHQsZSk7cmV0dXJuITEhPT1zJiYoaSE9PXMueHx8YSE9PXMueSl9fXZhciBwbHVnaW5fdG9vbHRpcD17aWQ6InRvb2x0aXAiLF9lbGVtZW50OlRvb2x0aXAscG9zaXRpb25lcnM6cG9zaXRpb25lcnMsYWZ0ZXJJbml0KHQsZSxpKXtpJiYodC50b29sdGlwPW5ldyBUb29sdGlwKHtjaGFydDp0LG9wdGlvbnM6aX0pKX0sYmVmb3JlVXBkYXRlKHQsZSxpKXt0LnRvb2x0aXAmJnQudG9vbHRpcC5pbml0aWFsaXplKGkpfSxyZXNldCh0LGUsaSl7dC50b29sdGlwJiZ0LnRvb2x0aXAuaW5pdGlhbGl6ZShpKX0sYWZ0ZXJEcmF3KHQpe2NvbnN0IGU9dC50b29sdGlwO3ZhciBpO2UmJmUuX3dpbGxSZW5kZXIoKSYmKCEoaT17dG9vbHRpcDplfSkhPT10Lm5vdGlmeVBsdWdpbnMoImJlZm9yZVRvb2x0aXBEcmF3Iix7Li4uaSxjYW5jZWxhYmxlOiEwfSkmJihlLmRyYXcodC5jdHgpLHQubm90aWZ5UGx1Z2lucygiYWZ0ZXJUb29sdGlwRHJhdyIsaSkpKX0sYWZ0ZXJFdmVudCh0LGUpe3ZhciBpO3QudG9vbHRpcCYmKGk9ZS5yZXBsYXksdC50b29sdGlwLmhhbmRsZUV2ZW50KGUuZXZlbnQsaSxlLmluQ2hhcnRBcmVhKSYmKGUuY2hhbmdlZD0hMCkpfSxkZWZhdWx0czp7ZW5hYmxlZDohMCxleHRlcm5hbDpudWxsLHBvc2l0aW9uOiJhdmVyYWdlIixiYWNrZ3JvdW5kQ29sb3I6InJnYmEoMCwwLDAsMC44KSIsdGl0bGVDb2xvcjoiI2ZmZiIsdGl0bGVGb250Ont3ZWlnaHQ6ImJvbGQifSx0aXRsZVNwYWNpbmc6Mix0aXRsZU1hcmdpbkJvdHRvbTo2LHRpdGxlQWxpZ246ImxlZnQiLGJvZHlDb2xvcjoiI2ZmZiIsYm9keVNwYWNpbmc6Mixib2R5Rm9udDp7fSxib2R5QWxpZ246ImxlZnQiLGZvb3RlckNvbG9yOiIjZmZmIixmb290ZXJTcGFjaW5nOjIsZm9vdGVyTWFyZ2luVG9wOjYsZm9vdGVyRm9udDp7d2VpZ2h0OiJib2xkIn0sZm9vdGVyQWxpZ246ImxlZnQiLHBhZGRpbmc6NixjYXJldFBhZGRpbmc6MixjYXJldFNpemU6NSxjb3JuZXJSYWRpdXM6Nixib3hIZWlnaHQ6KHQsZSk9PmUuYm9keUZvbnQuc2l6ZSxib3hXaWR0aDoodCxlKT0+ZS5ib2R5Rm9udC5zaXplLG11bHRpS2V5QmFja2dyb3VuZDoiI2ZmZiIsZGlzcGxheUNvbG9yczohMCxib3hQYWRkaW5nOjAsYm9yZGVyQ29sb3I6InJnYmEoMCwwLDAsMCkiLGJvcmRlcldpZHRoOjAsYW5pbWF0aW9uOntkdXJhdGlvbjo0MDAsZWFzaW5nOiJlYXNlT3V0UXVhcnQifSxhbmltYXRpb25zOntudW1iZXJzOnt0eXBlOiJudW1iZXIiLHByb3BlcnRpZXM6WyJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiY2FyZXRYIiwiY2FyZXRZIl19LG9wYWNpdHk6e2Vhc2luZzoibGluZWFyIixkdXJhdGlvbjoyMDB9fSxjYWxsYmFja3M6ZGVmYXVsdENhbGxiYWNrc30sZGVmYXVsdFJvdXRlczp7Ym9keUZvbnQ6ImZvbnQiLGZvb3RlckZvbnQ6ImZvbnQiLHRpdGxlRm9udDoiZm9udCJ9LGRlc2NyaXB0b3JzOntfc2NyaXB0YWJsZTp0PT4iZmlsdGVyIiE9PXQmJiJpdGVtU29ydCIhPT10JiYiZXh0ZXJuYWwiIT09dCxfaW5kZXhhYmxlOiExLGNhbGxiYWNrczp7X3NjcmlwdGFibGU6ITEsX2luZGV4YWJsZTohMX0sYW5pbWF0aW9uOntfZmFsbGJhY2s6ITF9LGFuaW1hdGlvbnM6e19mYWxsYmFjazoiYW5pbWF0aW9uIn19LGFkZGl0aW9uYWxPcHRpb25TY29wZXM6WyJpbnRlcmFjdGlvbiJdfSxwbHVnaW5zPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLENvbG9yczpwbHVnaW5fY29sb3JzLERlY2ltYXRpb246cGx1Z2luX2RlY2ltYXRpb24sRmlsbGVyOmluZGV4LExlZ2VuZDpwbHVnaW5fbGVnZW5kLFN1YlRpdGxlOnBsdWdpbl9zdWJ0aXRsZSxUaXRsZTpwbHVnaW5fdGl0bGUsVG9vbHRpcDpwbHVnaW5fdG9vbHRpcH0pO2NvbnN0IGFkZElmU3RyaW5nPSh0LGUsaSxhKT0+KCJzdHJpbmciPT10eXBlb2YgZT8oaT10LnB1c2goZSktMSxhLnVuc2hpZnQoe2luZGV4OmksbGFiZWw6ZX0pKTppc05hTihlKSYmKGk9bnVsbCksaSk7ZnVuY3Rpb24gZmluZE9yQWRkTGFiZWwodCxlLGksYSl7dmFyIHM9dC5pbmRleE9mKGUpO3JldHVybi0xPT09cz9hZGRJZlN0cmluZyh0LGUsaSxhKTpzIT09dC5sYXN0SW5kZXhPZihlKT9pOnN9Y29uc3QgdmFsaWRJbmRleD0odCxlKT0+bnVsbD09PXQ/bnVsbDpfbGltaXRWYWx1ZShNYXRoLnJvdW5kKHQpLDAsZSk7ZnVuY3Rpb24gX2dldExhYmVsRm9yVmFsdWUodCl7dmFyIGU9dGhpcy5nZXRMYWJlbHMoKTtyZXR1cm4gMDw9dCYmdDxlLmxlbmd0aD9lW3RdOnR9Y2xhc3MgQ2F0ZWdvcnlTY2FsZSBleHRlbmRzIFNjYWxle3N0YXRpYyBpZD0iY2F0ZWdvcnkiO3N0YXRpYyBkZWZhdWx0cz17dGlja3M6e2NhbGxiYWNrOl9nZXRMYWJlbEZvclZhbHVlfX07Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5fc3RhcnRWYWx1ZT12b2lkIDAsdGhpcy5fdmFsdWVSYW5nZT0wLHRoaXMuX2FkZGVkTGFiZWxzPVtdfWluaXQodCl7dmFyIGU9dGhpcy5fYWRkZWRMYWJlbHM7aWYoZS5sZW5ndGgpe2NvbnN0IHM9dGhpcy5nZXRMYWJlbHMoKTtmb3IodmFye2luZGV4OmksbGFiZWw6YX1vZiBlKXNbaV09PT1hJiZzLnNwbGljZShpLDEpO3RoaXMuX2FkZGVkTGFiZWxzPVtdfXN1cGVyLmluaXQodCl9cGFyc2UodCxlKXtpZihpc051bGxPclVuZGVmKHQpKXJldHVybiBudWxsO3ZhciBpPXRoaXMuZ2V0TGFiZWxzKCk7cmV0dXJuIGU9aXNGaW5pdGUoZSkmJmlbZV09PT10P2U6ZmluZE9yQWRkTGFiZWwoaSx0LHZhbHVlT3JEZWZhdWx0KGUsdCksdGhpcy5fYWRkZWRMYWJlbHMpLHZhbGlkSW5kZXgoZSxpLmxlbmd0aC0xKX1kZXRlcm1pbmVEYXRhTGltaXRzKCl7dmFye21pbkRlZmluZWQ6dCxtYXhEZWZpbmVkOmV9PXRoaXMuZ2V0VXNlckJvdW5kcygpO2xldHttaW46aSxtYXg6YX09dGhpcy5nZXRNaW5NYXgoITApOyJ0aWNrcyI9PT10aGlzLm9wdGlvbnMuYm91bmRzJiYodHx8KGk9MCksZXx8KGE9dGhpcy5nZXRMYWJlbHMoKS5sZW5ndGgtMSkpLHRoaXMubWluPWksdGhpcy5tYXg9YX1idWlsZFRpY2tzKCl7dmFyIGU9dGhpcy5taW4saT10aGlzLm1heCx0PXRoaXMub3B0aW9ucy5vZmZzZXQ7Y29uc3QgYT1bXTtsZXQgcz10aGlzLmdldExhYmVscygpO3M9MD09PWUmJmk9PT1zLmxlbmd0aC0xP3M6cy5zbGljZShlLGkrMSksdGhpcy5fdmFsdWVSYW5nZT1NYXRoLm1heChzLmxlbmd0aC0odD8wOjEpLDEpLHRoaXMuX3N0YXJ0VmFsdWU9dGhpcy5taW4tKHQ/LjU6MCk7Zm9yKGxldCB0PWU7dDw9aTt0KyspYS5wdXNoKHt2YWx1ZTp0fSk7cmV0dXJuIGF9Z2V0TGFiZWxGb3JWYWx1ZSh0KXtyZXR1cm4gX2dldExhYmVsRm9yVmFsdWUuY2FsbCh0aGlzLHQpfWNvbmZpZ3VyZSgpe3N1cGVyLmNvbmZpZ3VyZSgpLHRoaXMuaXNIb3Jpem9udGFsKCl8fCh0aGlzLl9yZXZlcnNlUGl4ZWxzPSF0aGlzLl9yZXZlcnNlUGl4ZWxzKX1nZXRQaXhlbEZvclZhbHVlKHQpe3JldHVybiBudWxsPT09KHQ9Im51bWJlciIhPXR5cGVvZiB0P3RoaXMucGFyc2UodCk6dCk/TmFOOnRoaXMuZ2V0UGl4ZWxGb3JEZWNpbWFsKCh0LXRoaXMuX3N0YXJ0VmFsdWUpL3RoaXMuX3ZhbHVlUmFuZ2UpfWdldFBpeGVsRm9yVGljayh0KXt2YXIgZT10aGlzLnRpY2tzO3JldHVybiB0PDB8fHQ+ZS5sZW5ndGgtMT9udWxsOnRoaXMuZ2V0UGl4ZWxGb3JWYWx1ZShlW3RdLnZhbHVlKX1nZXRWYWx1ZUZvclBpeGVsKHQpe3JldHVybiBNYXRoLnJvdW5kKHRoaXMuX3N0YXJ0VmFsdWUrdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwodCkqdGhpcy5fdmFsdWVSYW5nZSl9Z2V0QmFzZVBpeGVsKCl7cmV0dXJuIHRoaXMuYm90dG9tfX1mdW5jdGlvbiBnZW5lcmF0ZVRpY2tzJDEodCxlKXtjb25zdCBpPVtdO3Zhcntib3VuZHM6YSxzdGVwOnMsbWluOm4sbWF4OnIscHJlY2lzaW9uOm8sY291bnQ6bCxtYXhUaWNrczpoLG1heERpZ2l0czpkLGluY2x1ZGVCb3VuZHM6Y309dCx1PXN8fDEsZz1oLTEse21pbjplLG1heDpwfT1lLGY9IWlzTnVsbE9yVW5kZWYobiksbT0haXNOdWxsT3JVbmRlZihyKSx2PSFpc051bGxPclVuZGVmKGwpLGQ9KHAtZSkvKGQrMSk7bGV0IHg9bmljZU51bSgocC1lKS9nL3UpKnUsYixfLHksaztpZih4PDFlLTE0JiYhZiYmIW0pcmV0dXJuW3t2YWx1ZTplfSx7dmFsdWU6cH1dOyhrPU1hdGguY2VpbChwL3gpLU1hdGguZmxvb3IoZS94KSk+ZyYmKHg9bmljZU51bShrKngvZy91KSp1KSxpc051bGxPclVuZGVmKG8pfHwoYj1NYXRoLnBvdygxMCxvKSx4PU1hdGguY2VpbCh4KmIpL2IpLHk9InRpY2tzIj09PWE/KF89TWF0aC5mbG9vcihlL3gpKngsTWF0aC5jZWlsKHAveCkqeCk6KF89ZSxwKSxmJiZtJiZzJiZhbG1vc3RXaG9sZSgoci1uKS9zLHgvMWUzKT8oaz1NYXRoLnJvdW5kKE1hdGgubWluKChyLW4pL3gsaCkpLHg9KHItbikvayxfPW4seT1yKTp2PyhfPWY/bjpfLHk9bT9yOnksaz1sLTEseD0oeS1fKS9rKTooaz0oeS1fKS94LGs9YWxtb3N0RXF1YWxzKGssTWF0aC5yb3VuZChrKSx4LzFlMyk/TWF0aC5yb3VuZChrKTpNYXRoLmNlaWwoaykpO2c9TWF0aC5tYXgoX2RlY2ltYWxQbGFjZXMoeCksX2RlY2ltYWxQbGFjZXMoXykpO2I9TWF0aC5wb3coMTAsaXNOdWxsT3JVbmRlZihvKT9nOm8pLF89TWF0aC5yb3VuZChfKmIpL2IseT1NYXRoLnJvdW5kKHkqYikvYjtsZXQgUz0wO2ZvcihmJiYoYyYmXyE9PW4/KGkucHVzaCh7dmFsdWU6bn0pLF88biYmUysrLGFsbW9zdEVxdWFscyhNYXRoLnJvdW5kKChfK1MqeCkqYikvYixuLHJlbGF0aXZlTGFiZWxTaXplKG4sZCx0KSkmJlMrKyk6XzxuJiZTKyspO1M8azsrK1Mpe3ZhciBEPU1hdGgucm91bmQoKF8rUyp4KSpiKS9iO2lmKG0mJnI8RClicmVhaztpLnB1c2goe3ZhbHVlOkR9KX1yZXR1cm4gbSYmYyYmeSE9PXI/aS5sZW5ndGgmJmFsbW9zdEVxdWFscyhpW2kubGVuZ3RoLTFdLnZhbHVlLHIscmVsYXRpdmVMYWJlbFNpemUocixkLHQpKT9pW2kubGVuZ3RoLTFdLnZhbHVlPXI6aS5wdXNoKHt2YWx1ZTpyfSk6bSYmeSE9PXJ8fGkucHVzaCh7dmFsdWU6eX0pLGl9ZnVuY3Rpb24gcmVsYXRpdmVMYWJlbFNpemUodCxlLHtob3Jpem9udGFsOmksbWluUm90YXRpb246YX0pe2E9dG9SYWRpYW5zKGEpLGk9KGk/TWF0aC5zaW4oYSk6TWF0aC5jb3MoYSkpfHwuMDAxO3JldHVybiBNYXRoLm1pbihlL2ksLjc1KmUqKCIiK3QpLmxlbmd0aCl9Y2xhc3MgTGluZWFyU2NhbGVCYXNlIGV4dGVuZHMgU2NhbGV7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5zdGFydD12b2lkIDAsdGhpcy5lbmQ9dm9pZCAwLHRoaXMuX3N0YXJ0VmFsdWU9dm9pZCAwLHRoaXMuX2VuZFZhbHVlPXZvaWQgMCx0aGlzLl92YWx1ZVJhbmdlPTB9cGFyc2UodCxlKXtyZXR1cm4gaXNOdWxsT3JVbmRlZih0KXx8KCJudW1iZXIiPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIE51bWJlcikmJiFpc0Zpbml0ZSgrdCk/bnVsbDordH1oYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCl7dmFyIHQ9dGhpcy5vcHRpb25zWyJiZWdpbkF0WmVybyJdO2NvbnN0e21pbkRlZmluZWQ6ZSxtYXhEZWZpbmVkOml9PXRoaXMuZ2V0VXNlckJvdW5kcygpO2xldHttaW46YSxtYXg6c309dGhpczt2YXIgbixyLG89dD0+YT1lP2E6dCxsPXQ9PnM9aT9zOnQ7dCYmKHI9c2lnbihhKSxuPXNpZ24ocykscjwwJiZuPDA/bCgwKTowPHImJjA8biYmbygwKSksYT09PXMmJihyPTA9PT1zPzE6TWF0aC5hYnMoLjA1KnMpLGwocytyKSx0fHxvKGEtcikpLHRoaXMubWluPWEsdGhpcy5tYXg9c31nZXRUaWNrTGltaXQoKXtsZXR7bWF4VGlja3NMaW1pdDp0LHN0ZXBTaXplOmV9PXRoaXMub3B0aW9ucy50aWNrcyxpO3JldHVybiBlPzFlMzwoaT1NYXRoLmNlaWwodGhpcy5tYXgvZSktTWF0aC5mbG9vcih0aGlzLm1pbi9lKSsxKSYmKGNvbnNvbGUud2Fybihgc2NhbGVzLiR7dGhpcy5pZH0udGlja3Muc3RlcFNpemU6ICR7ZX0gd291bGQgcmVzdWx0IGdlbmVyYXRpbmcgdXAgdG8gJHtpfSB0aWNrcy4gTGltaXRpbmcgdG8gMTAwMC5gKSxpPTFlMyk6KGk9dGhpcy5jb21wdXRlVGlja0xpbWl0KCksdD10fHwxMSksaT10P01hdGgubWluKHQsaSk6aX1jb21wdXRlVGlja0xpbWl0KCl7cmV0dXJuIE51bWJlci5QT1NJVElWRV9JTkZJTklUWX1idWlsZFRpY2tzKCl7dmFyIHQ9dGhpcy5vcHRpb25zLGU9dC50aWNrcyxpPXRoaXMuZ2V0VGlja0xpbWl0KCk7Y29uc3QgYT1nZW5lcmF0ZVRpY2tzJDEoe21heFRpY2tzOk1hdGgubWF4KDIsaSksYm91bmRzOnQuYm91bmRzLG1pbjp0Lm1pbixtYXg6dC5tYXgscHJlY2lzaW9uOmUucHJlY2lzaW9uLHN0ZXA6ZS5zdGVwU2l6ZSxjb3VudDplLmNvdW50LG1heERpZ2l0czp0aGlzLl9tYXhEaWdpdHMoKSxob3Jpem9udGFsOnRoaXMuaXNIb3Jpem9udGFsKCksbWluUm90YXRpb246ZS5taW5Sb3RhdGlvbnx8MCxpbmNsdWRlQm91bmRzOiExIT09ZS5pbmNsdWRlQm91bmRzfSx0aGlzLl9yYW5nZXx8dGhpcyk7cmV0dXJuInRpY2tzIj09PXQuYm91bmRzJiZfc2V0TWluQW5kTWF4QnlLZXkoYSx0aGlzLCJ2YWx1ZSIpLHQucmV2ZXJzZT8oYS5yZXZlcnNlKCksdGhpcy5zdGFydD10aGlzLm1heCx0aGlzLmVuZD10aGlzLm1pbik6KHRoaXMuc3RhcnQ9dGhpcy5taW4sdGhpcy5lbmQ9dGhpcy5tYXgpLGF9Y29uZmlndXJlKCl7dmFyIHQ9dGhpcy50aWNrcztsZXQgZT10aGlzLm1pbixpPXRoaXMubWF4O3N1cGVyLmNvbmZpZ3VyZSgpLHRoaXMub3B0aW9ucy5vZmZzZXQmJnQubGVuZ3RoJiYodD0oaS1lKS9NYXRoLm1heCh0Lmxlbmd0aC0xLDEpLzIsZS09dCxpKz10KSx0aGlzLl9zdGFydFZhbHVlPWUsdGhpcy5fZW5kVmFsdWU9aSx0aGlzLl92YWx1ZVJhbmdlPWktZX1nZXRMYWJlbEZvclZhbHVlKHQpe3JldHVybiBmb3JtYXROdW1iZXIodCx0aGlzLmNoYXJ0Lm9wdGlvbnMubG9jYWxlLHRoaXMub3B0aW9ucy50aWNrcy5mb3JtYXQpfX1jbGFzcyBMaW5lYXJTY2FsZSBleHRlbmRzIExpbmVhclNjYWxlQmFzZXtzdGF0aWMgaWQ9ImxpbmVhciI7c3RhdGljIGRlZmF1bHRzPXt0aWNrczp7Y2FsbGJhY2s6VGlja3MuZm9ybWF0dGVycy5udW1lcmljfX07ZGV0ZXJtaW5lRGF0YUxpbWl0cygpe3ZhcnttaW46dCxtYXg6ZX09dGhpcy5nZXRNaW5NYXgoITApO3RoaXMubWluPWlzTnVtYmVyRmluaXRlKHQpP3Q6MCx0aGlzLm1heD1pc051bWJlckZpbml0ZShlKT9lOjEsdGhpcy5oYW5kbGVUaWNrUmFuZ2VPcHRpb25zKCl9Y29tcHV0ZVRpY2tMaW1pdCgpe3ZhciB0PXRoaXMuaXNIb3Jpem9udGFsKCksZT10P3RoaXMud2lkdGg6dGhpcy5oZWlnaHQsaT10b1JhZGlhbnModGhpcy5vcHRpb25zLnRpY2tzLm1pblJvdGF0aW9uKSx0PSh0P01hdGguc2luKGkpOk1hdGguY29zKGkpKXx8LjAwMSxpPXRoaXMuX3Jlc29sdmVUaWNrRm9udE9wdGlvbnMoMCk7cmV0dXJuIE1hdGguY2VpbChlL01hdGgubWluKDQwLGkubGluZUhlaWdodC90KSl9Z2V0UGl4ZWxGb3JWYWx1ZSh0KXtyZXR1cm4gbnVsbD09PXQ/TmFOOnRoaXMuZ2V0UGl4ZWxGb3JEZWNpbWFsKCh0LXRoaXMuX3N0YXJ0VmFsdWUpL3RoaXMuX3ZhbHVlUmFuZ2UpfWdldFZhbHVlRm9yUGl4ZWwodCl7cmV0dXJuIHRoaXMuX3N0YXJ0VmFsdWUrdGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwodCkqdGhpcy5fdmFsdWVSYW5nZX19Y29uc3QgbG9nMTBGbG9vcj10PT5NYXRoLmZsb29yKGxvZzEwKHQpKSxjaGFuZ2VFeHBvbmVudD0odCxlKT0+TWF0aC5wb3coMTAsbG9nMTBGbG9vcih0KStlKTtmdW5jdGlvbiBpc01ham9yKHQpe3JldHVybiAxPT10L01hdGgucG93KDEwLGxvZzEwRmxvb3IodCkpfWZ1bmN0aW9uIHN0ZXBzKHQsZSxpKXtpPU1hdGgucG93KDEwLGkpLHQ9TWF0aC5mbG9vcih0L2kpO3JldHVybiBNYXRoLmNlaWwoZS9pKS10fWZ1bmN0aW9uIHN0YXJ0RXhwKHQsZSl7dmFyIGk9ZS10O2xldCBhPWxvZzEwRmxvb3IoaSk7Zm9yKDsxMDxzdGVwcyh0LGUsYSk7KWErKztmb3IoO3N0ZXBzKHQsZSxhKTwxMDspYS0tO3JldHVybiBNYXRoLm1pbihhLGxvZzEwRmxvb3IodCkpfWZ1bmN0aW9uIGdlbmVyYXRlVGlja3ModCx7bWluOmUsbWF4Oml9KXtlPWZpbml0ZU9yRGVmYXVsdCh0Lm1pbixlKTtjb25zdCBhPVtdO3ZhciBzPWxvZzEwRmxvb3IoZSk7bGV0IG49c3RhcnRFeHAoZSxpKSxyPW48MD9NYXRoLnBvdygxMCxNYXRoLmFicyhuKSk6MTt2YXIgbz1NYXRoLnBvdygxMCxuKSxsPXM+bj9NYXRoLnBvdygxMCxzKTowLHM9TWF0aC5yb3VuZCgoZS1sKSpyKS9yLGg9TWF0aC5mbG9vcigoZS1sKS9vLzEwKSpvKjEwO2xldCBkPU1hdGguZmxvb3IoKHMtaCkvTWF0aC5wb3coMTAsbikpLGM9ZmluaXRlT3JEZWZhdWx0KHQubWluLE1hdGgucm91bmQoKGwraCtkKk1hdGgucG93KDEwLG4pKSpyKS9yKTtmb3IoO2M8aTspYS5wdXNoKHt2YWx1ZTpjLG1ham9yOmlzTWFqb3IoYyksc2lnbmlmaWNhbmQ6ZH0pLDEwPD1kP2Q9ZDwxNT8xNToyMDpkKyssMjA8PWQmJihuKyssZD0yLHI9MDw9bj8xOnIpLGM9TWF0aC5yb3VuZCgobCtoK2QqTWF0aC5wb3coMTAsbikpKnIpL3I7ZT1maW5pdGVPckRlZmF1bHQodC5tYXgsYyk7cmV0dXJuIGEucHVzaCh7dmFsdWU6ZSxtYWpvcjppc01ham9yKGUpLHNpZ25pZmljYW5kOmR9KSxhfWNsYXNzIExvZ2FyaXRobWljU2NhbGUgZXh0ZW5kcyBTY2FsZXtzdGF0aWMgaWQ9ImxvZ2FyaXRobWljIjtzdGF0aWMgZGVmYXVsdHM9e3RpY2tzOntjYWxsYmFjazpUaWNrcy5mb3JtYXR0ZXJzLmxvZ2FyaXRobWljLG1ham9yOntlbmFibGVkOiEwfX19O2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnQ9dm9pZCAwLHRoaXMuZW5kPXZvaWQgMCx0aGlzLl9zdGFydFZhbHVlPXZvaWQgMCx0aGlzLl92YWx1ZVJhbmdlPTB9cGFyc2UodCxlKXt0PUxpbmVhclNjYWxlQmFzZS5wcm90b3R5cGUucGFyc2UuYXBwbHkodGhpcyxbdCxlXSk7aWYoMCE9PXQpcmV0dXJuIGlzTnVtYmVyRmluaXRlKHQpJiYwPHQ/dDpudWxsO3RoaXMuX3plcm89ITB9ZGV0ZXJtaW5lRGF0YUxpbWl0cygpe3ZhcnttaW46dCxtYXg6ZX09dGhpcy5nZXRNaW5NYXgoITApO3RoaXMubWluPWlzTnVtYmVyRmluaXRlKHQpP01hdGgubWF4KDAsdCk6bnVsbCx0aGlzLm1heD1pc051bWJlckZpbml0ZShlKT9NYXRoLm1heCgwLGUpOm51bGwsdGhpcy5vcHRpb25zLmJlZ2luQXRaZXJvJiYodGhpcy5femVybz0hMCksdGhpcy5femVybyYmdGhpcy5taW4hPT10aGlzLl9zdWdnZXN0ZWRNaW4mJiFpc051bWJlckZpbml0ZSh0aGlzLl91c2VyTWluKSYmKHRoaXMubWluPXQ9PT1jaGFuZ2VFeHBvbmVudCh0aGlzLm1pbiwwKT9jaGFuZ2VFeHBvbmVudCh0aGlzLm1pbiwtMSk6Y2hhbmdlRXhwb25lbnQodGhpcy5taW4sMCkpLHRoaXMuaGFuZGxlVGlja1JhbmdlT3B0aW9ucygpfWhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKXtjb25zdHttaW5EZWZpbmVkOmUsbWF4RGVmaW5lZDppfT10aGlzLmdldFVzZXJCb3VuZHMoKTtsZXQgYT10aGlzLm1pbixzPXRoaXMubWF4O3ZhciB0PXQ9PmE9ZT9hOnQsbj10PT5zPWk/czp0O2E9PT1zJiYoYTw9MD8odCgxKSxuKDEwKSk6KHQoY2hhbmdlRXhwb25lbnQoYSwtMSkpLG4oY2hhbmdlRXhwb25lbnQocywxKSkpKSxhPD0wJiZ0KGNoYW5nZUV4cG9uZW50KHMsLTEpKSxzPD0wJiZuKGNoYW5nZUV4cG9uZW50KGEsMSkpLHRoaXMubWluPWEsdGhpcy5tYXg9c31idWlsZFRpY2tzKCl7dmFyIHQ9dGhpcy5vcHRpb25zO2NvbnN0IGU9Z2VuZXJhdGVUaWNrcyh7bWluOnRoaXMuX3VzZXJNaW4sbWF4OnRoaXMuX3VzZXJNYXh9LHRoaXMpO3JldHVybiJ0aWNrcyI9PT10LmJvdW5kcyYmX3NldE1pbkFuZE1heEJ5S2V5KGUsdGhpcywidmFsdWUiKSx0LnJldmVyc2U/KGUucmV2ZXJzZSgpLHRoaXMuc3RhcnQ9dGhpcy5tYXgsdGhpcy5lbmQ9dGhpcy5taW4pOih0aGlzLnN0YXJ0PXRoaXMubWluLHRoaXMuZW5kPXRoaXMubWF4KSxlfWdldExhYmVsRm9yVmFsdWUodCl7cmV0dXJuIHZvaWQgMD09PXQ/IjAiOmZvcm1hdE51bWJlcih0LHRoaXMuY2hhcnQub3B0aW9ucy5sb2NhbGUsdGhpcy5vcHRpb25zLnRpY2tzLmZvcm1hdCl9Y29uZmlndXJlKCl7dmFyIHQ9dGhpcy5taW47c3VwZXIuY29uZmlndXJlKCksdGhpcy5fc3RhcnRWYWx1ZT1sb2cxMCh0KSx0aGlzLl92YWx1ZVJhbmdlPWxvZzEwKHRoaXMubWF4KS1sb2cxMCh0KX1nZXRQaXhlbEZvclZhbHVlKHQpe3JldHVybiBudWxsPT09KHQ9dm9pZCAwIT09dCYmMCE9PXQ/dDp0aGlzLm1pbil8fGlzTmFOKHQpP05hTjp0aGlzLmdldFBpeGVsRm9yRGVjaW1hbCh0PT09dGhpcy5taW4/MDoobG9nMTAodCktdGhpcy5fc3RhcnRWYWx1ZSkvdGhpcy5fdmFsdWVSYW5nZSl9Z2V0VmFsdWVGb3JQaXhlbCh0KXt0PXRoaXMuZ2V0RGVjaW1hbEZvclBpeGVsKHQpO3JldHVybiBNYXRoLnBvdygxMCx0aGlzLl9zdGFydFZhbHVlK3QqdGhpcy5fdmFsdWVSYW5nZSl9fWZ1bmN0aW9uIGdldFRpY2tCYWNrZHJvcEhlaWdodCh0KXt2YXIgZT10LnRpY2tzO3JldHVybiBlLmRpc3BsYXkmJnQuZGlzcGxheT8odD10b1BhZGRpbmcoZS5iYWNrZHJvcFBhZGRpbmcpLHZhbHVlT3JEZWZhdWx0KGUuZm9udCYmZS5mb250LnNpemUsZGVmYXVsdHMuZm9udC5zaXplKSt0LmhlaWdodCk6MH1mdW5jdGlvbiBtZWFzdXJlTGFiZWxTaXplKHQsZSxpKXtyZXR1cm4gaT1pc0FycmF5KGkpP2k6W2ldLHt3Ol9sb25nZXN0VGV4dCh0LGUuc3RyaW5nLGkpLGg6aS5sZW5ndGgqZS5saW5lSGVpZ2h0fX1mdW5jdGlvbiBkZXRlcm1pbmVMaW1pdHModCxlLGksYSxzKXtyZXR1cm4gdD09PWF8fHQ9PT1zP3tzdGFydDplLWkvMixlbmQ6ZStpLzJ9OnQ8YXx8czx0P3tzdGFydDplLWksZW5kOmV9OntzdGFydDplLGVuZDplK2l9fWZ1bmN0aW9uIGZpdFdpdGhQb2ludExhYmVscyhlKXt2YXIgaT17bDplLmxlZnQrZS5fcGFkZGluZy5sZWZ0LHI6ZS5yaWdodC1lLl9wYWRkaW5nLnJpZ2h0LHQ6ZS50b3ArZS5fcGFkZGluZy50b3AsYjplLmJvdHRvbS1lLl9wYWRkaW5nLmJvdHRvbX0sYT1PYmplY3QuYXNzaWduKHt9LGkpO2NvbnN0IHM9W10sbj1bXTt2YXIgcj1lLl9wb2ludExhYmVscy5sZW5ndGg7Y29uc3Qgbz1lLm9wdGlvbnMucG9pbnRMYWJlbHM7dmFyIGw9by5jZW50ZXJQb2ludExhYmVscz9QSS9yOjA7Zm9yKGxldCB0PTA7dDxyO3QrKyl7dmFyIGg9by5zZXRDb250ZXh0KGUuZ2V0UG9pbnRMYWJlbENvbnRleHQodCkpLGQ9KG5bdF09aC5wYWRkaW5nLGUuZ2V0UG9pbnRQb3NpdGlvbih0LGUuZHJhd2luZ0FyZWErblt0XSxsKSksaD10b0ZvbnQoaC5mb250KSxoPW1lYXN1cmVMYWJlbFNpemUoZS5jdHgsaCxlLl9wb2ludExhYmVsc1t0XSksYz0oc1t0XT1oLF9ub3JtYWxpemVBbmdsZShlLmdldEluZGV4QW5nbGUodCkrbCkpLHU9TWF0aC5yb3VuZCh0b0RlZ3JlZXMoYykpO3VwZGF0ZUxpbWl0cyhhLGksYyxkZXRlcm1pbmVMaW1pdHModSxkLngsaC53LDAsMTgwKSxkZXRlcm1pbmVMaW1pdHModSxkLnksaC5oLDkwLDI3MCkpfWUuc2V0Q2VudGVyUG9pbnQoaS5sLWEubCxhLnItaS5yLGkudC1hLnQsYS5iLWkuYiksZS5fcG9pbnRMYWJlbEl0ZW1zPWJ1aWxkUG9pbnRMYWJlbEl0ZW1zKGUscyxuKX1mdW5jdGlvbiB1cGRhdGVMaW1pdHModCxlLGksYSxzKXt2YXIgbj1NYXRoLmFicyhNYXRoLnNpbihpKSksaT1NYXRoLmFicyhNYXRoLmNvcyhpKSk7bGV0IHI9MCxvPTA7YS5zdGFydDxlLmw/KHI9KGUubC1hLnN0YXJ0KS9uLHQubD1NYXRoLm1pbih0LmwsZS5sLXIpKTphLmVuZD5lLnImJihyPShhLmVuZC1lLnIpL24sdC5yPU1hdGgubWF4KHQucixlLnIrcikpLHMuc3RhcnQ8ZS50PyhvPShlLnQtcy5zdGFydCkvaSx0LnQ9TWF0aC5taW4odC50LGUudC1vKSk6cy5lbmQ+ZS5iJiYobz0ocy5lbmQtZS5iKS9pLHQuYj1NYXRoLm1heCh0LmIsZS5iK28pKX1mdW5jdGlvbiBjcmVhdGVQb2ludExhYmVsSXRlbSh0LGUsaSl7dmFyIGE9dC5kcmF3aW5nQXJlYSx7ZXh0cmE6aSxhZGRpdGlvbmFsQW5nbGU6cyxwYWRkaW5nOm4sc2l6ZTpyfT1pLHQ9dC5nZXRQb2ludFBvc2l0aW9uKGUsYStpK24scyksZT1NYXRoLnJvdW5kKHRvRGVncmVlcyhfbm9ybWFsaXplQW5nbGUodC5hbmdsZStIQUxGX1BJKSkpLGE9eUZvckFuZ2xlKHQueSxyLmgsZSksaT1nZXRUZXh0QWxpZ25Gb3JBbmdsZShlKSxuPWxlZnRGb3JUZXh0QWxpZ24odC54LHIudyxpKTtyZXR1cm57dmlzaWJsZTohMCx4OnQueCx5OmEsdGV4dEFsaWduOmksbGVmdDpuLHRvcDphLHJpZ2h0Om4rci53LGJvdHRvbTphK3IuaH19ZnVuY3Rpb24gaXNOb3RPdmVybGFwcGVkKHQsZSl7aWYoIWUpcmV0dXJuITA7dmFye2xlZnQ6dCx0b3A6aSxyaWdodDphLGJvdHRvbTpzfT10O3JldHVybiEoX2lzUG9pbnRJbkFyZWEoe3g6dCx5Oml9LGUpfHxfaXNQb2ludEluQXJlYSh7eDp0LHk6c30sZSl8fF9pc1BvaW50SW5BcmVhKHt4OmEseTppfSxlKXx8X2lzUG9pbnRJbkFyZWEoe3g6YSx5OnN9LGUpKX1mdW5jdGlvbiBidWlsZFBvaW50TGFiZWxJdGVtcyhlLGksYSl7Y29uc3Qgcz1bXTt2YXIgbj1lLl9wb2ludExhYmVscy5sZW5ndGgsdD1lLm9wdGlvbnMse2NlbnRlclBvaW50TGFiZWxzOnIsZGlzcGxheTpvfT10LnBvaW50TGFiZWxzO2NvbnN0IGw9e2V4dHJhOmdldFRpY2tCYWNrZHJvcEhlaWdodCh0KS8yLGFkZGl0aW9uYWxBbmdsZTpyP1BJL246MH07bGV0IGg7Zm9yKGxldCB0PTA7dDxuO3QrKyl7bC5wYWRkaW5nPWFbdF0sbC5zaXplPWlbdF07Y29uc3QgZD1jcmVhdGVQb2ludExhYmVsSXRlbShlLHQsbCk7cy5wdXNoKGQpLCJhdXRvIj09PW8mJihkLnZpc2libGU9aXNOb3RPdmVybGFwcGVkKGQsaCksZC52aXNpYmxlJiYoaD1kKSl9cmV0dXJuIHN9ZnVuY3Rpb24gZ2V0VGV4dEFsaWduRm9yQW5nbGUodCl7cmV0dXJuIDA9PT10fHwxODA9PT10PyJjZW50ZXIiOnQ8MTgwPyJsZWZ0IjoicmlnaHQifWZ1bmN0aW9uIGxlZnRGb3JUZXh0QWxpZ24odCxlLGkpe3JldHVybiJyaWdodCI9PT1pP3QtPWU6ImNlbnRlciI9PT1pJiYodC09ZS8yKSx0fWZ1bmN0aW9uIHlGb3JBbmdsZSh0LGUsaSl7cmV0dXJuIDkwPT09aXx8MjcwPT09aT90LT1lLzI6KDI3MDxpfHxpPDkwKSYmKHQtPWUpLHR9ZnVuY3Rpb24gZHJhd1BvaW50TGFiZWxCb3godCxlLGkpe3ZhciBhLHMse2xlZnQ6aSx0b3A6bixyaWdodDpyLGJvdHRvbTpvfT1pLGw9ZVsiYmFja2Ryb3BDb2xvciJdO2lzTnVsbE9yVW5kZWYobCl8fChhPXRvVFJCTENvcm5lcnMoZS5ib3JkZXJSYWRpdXMpLGU9dG9QYWRkaW5nKGUuYmFja2Ryb3BQYWRkaW5nKSx0LmZpbGxTdHlsZT1sLGw9aS1lLmxlZnQscz1uLWUudG9wLHI9ci1pK2Uud2lkdGgsaT1vLW4rZS5oZWlnaHQsT2JqZWN0LnZhbHVlcyhhKS5zb21lKHQ9PjAhPT10KT8odC5iZWdpblBhdGgoKSxhZGRSb3VuZGVkUmVjdFBhdGgodCx7eDpsLHk6cyx3OnIsaDppLHJhZGl1czphfSksdC5maWxsKCkpOnQuZmlsbFJlY3QobCxzLHIsaSkpfWZ1bmN0aW9uIGRyYXdQb2ludExhYmVscyhlLGkpe2NvbnN0e2N0eDphLG9wdGlvbnM6e3BvaW50TGFiZWxzOnN9fT1lO2ZvcihsZXQgdD1pLTE7MDw9dDt0LS0pe3ZhciBuLHIsbyxsLGg9ZS5fcG9pbnRMYWJlbEl0ZW1zW3RdO2gudmlzaWJsZSYmKGRyYXdQb2ludExhYmVsQm94KGEsbj1zLnNldENvbnRleHQoZS5nZXRQb2ludExhYmVsQ29udGV4dCh0KSksaCkscj10b0ZvbnQobi5mb250KSx7eDpoLHk6byx0ZXh0QWxpZ246bH09aCxyZW5kZXJUZXh0KGEsZS5fcG9pbnRMYWJlbHNbdF0saCxvK3IubGluZUhlaWdodC8yLHIse2NvbG9yOm4uY29sb3IsdGV4dEFsaWduOmwsdGV4dEJhc2VsaW5lOiJtaWRkbGUifSkpfX1mdW5jdGlvbiBwYXRoUmFkaXVzTGluZShlLGksdCxhKXtjb25zdCBzPWVbImN0eCJdO2lmKHQpcy5hcmMoZS54Q2VudGVyLGUueUNlbnRlcixpLDAsVEFVKTtlbHNle3ZhciBuPWUuZ2V0UG9pbnRQb3NpdGlvbigwLGkpO3MubW92ZVRvKG4ueCxuLnkpO2ZvcihsZXQgdD0xO3Q8YTt0Kyspbj1lLmdldFBvaW50UG9zaXRpb24odCxpKSxzLmxpbmVUbyhuLngsbi55KX19ZnVuY3Rpb24gZHJhd1JhZGl1c0xpbmUodCxlLGksYSxzKXtjb25zdCBuPXQuY3R4O3ZhciByPWUuY2lyY3VsYXIse2NvbG9yOmUsbGluZVdpZHRoOm99PWU7IXImJiFhfHwhZXx8IW98fGk8MHx8KG4uc2F2ZSgpLG4uc3Ryb2tlU3R5bGU9ZSxuLmxpbmVXaWR0aD1vLG4uc2V0TGluZURhc2gocy5kYXNoKSxuLmxpbmVEYXNoT2Zmc2V0PXMuZGFzaE9mZnNldCxuLmJlZ2luUGF0aCgpLHBhdGhSYWRpdXNMaW5lKHQsaSxyLGEpLG4uY2xvc2VQYXRoKCksbi5zdHJva2UoKSxuLnJlc3RvcmUoKSl9ZnVuY3Rpb24gY3JlYXRlUG9pbnRMYWJlbENvbnRleHQodCxlLGkpe3JldHVybiBjcmVhdGVDb250ZXh0KHQse2xhYmVsOmksaW5kZXg6ZSx0eXBlOiJwb2ludExhYmVsIn0pfWNsYXNzIFJhZGlhbExpbmVhclNjYWxlIGV4dGVuZHMgTGluZWFyU2NhbGVCYXNle3N0YXRpYyBpZD0icmFkaWFsTGluZWFyIjtzdGF0aWMgZGVmYXVsdHM9e2Rpc3BsYXk6ITAsYW5pbWF0ZTohMCxwb3NpdGlvbjoiY2hhcnRBcmVhIixhbmdsZUxpbmVzOntkaXNwbGF5OiEwLGxpbmVXaWR0aDoxLGJvcmRlckRhc2g6W10sYm9yZGVyRGFzaE9mZnNldDowfSxncmlkOntjaXJjdWxhcjohMX0sc3RhcnRBbmdsZTowLHRpY2tzOntzaG93TGFiZWxCYWNrZHJvcDohMCxjYWxsYmFjazpUaWNrcy5mb3JtYXR0ZXJzLm51bWVyaWN9LHBvaW50TGFiZWxzOntiYWNrZHJvcENvbG9yOnZvaWQgMCxiYWNrZHJvcFBhZGRpbmc6MixkaXNwbGF5OiEwLGZvbnQ6e3NpemU6MTB9LGNhbGxiYWNrKHQpe3JldHVybiB0fSxwYWRkaW5nOjUsY2VudGVyUG9pbnRMYWJlbHM6ITF9fTtzdGF0aWMgZGVmYXVsdFJvdXRlcz17ImFuZ2xlTGluZXMuY29sb3IiOiJib3JkZXJDb2xvciIsInBvaW50TGFiZWxzLmNvbG9yIjoiY29sb3IiLCJ0aWNrcy5jb2xvciI6ImNvbG9yIn07c3RhdGljIGRlc2NyaXB0b3JzPXthbmdsZUxpbmVzOntfZmFsbGJhY2s6ImdyaWQifX07Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy54Q2VudGVyPXZvaWQgMCx0aGlzLnlDZW50ZXI9dm9pZCAwLHRoaXMuZHJhd2luZ0FyZWE9dm9pZCAwLHRoaXMuX3BvaW50TGFiZWxzPVtdLHRoaXMuX3BvaW50TGFiZWxJdGVtcz1bXX1zZXREaW1lbnNpb25zKCl7dmFyIHQ9dGhpcy5fcGFkZGluZz10b1BhZGRpbmcoZ2V0VGlja0JhY2tkcm9wSGVpZ2h0KHRoaXMub3B0aW9ucykvMiksZT10aGlzLndpZHRoPXRoaXMubWF4V2lkdGgtdC53aWR0aCxpPXRoaXMuaGVpZ2h0PXRoaXMubWF4SGVpZ2h0LXQuaGVpZ2h0O3RoaXMueENlbnRlcj1NYXRoLmZsb29yKHRoaXMubGVmdCtlLzIrdC5sZWZ0KSx0aGlzLnlDZW50ZXI9TWF0aC5mbG9vcih0aGlzLnRvcCtpLzIrdC50b3ApLHRoaXMuZHJhd2luZ0FyZWE9TWF0aC5mbG9vcihNYXRoLm1pbihlLGkpLzIpfWRldGVybWluZURhdGFMaW1pdHMoKXt2YXJ7bWluOnQsbWF4OmV9PXRoaXMuZ2V0TWluTWF4KCExKTt0aGlzLm1pbj1pc051bWJlckZpbml0ZSh0KSYmIWlzTmFOKHQpP3Q6MCx0aGlzLm1heD1pc051bWJlckZpbml0ZShlKSYmIWlzTmFOKGUpP2U6MCx0aGlzLmhhbmRsZVRpY2tSYW5nZU9wdGlvbnMoKX1jb21wdXRlVGlja0xpbWl0KCl7cmV0dXJuIE1hdGguY2VpbCh0aGlzLmRyYXdpbmdBcmVhL2dldFRpY2tCYWNrZHJvcEhlaWdodCh0aGlzLm9wdGlvbnMpKX1nZW5lcmF0ZVRpY2tMYWJlbHModCl7TGluZWFyU2NhbGVCYXNlLnByb3RvdHlwZS5nZW5lcmF0ZVRpY2tMYWJlbHMuY2FsbCh0aGlzLHQpLHRoaXMuX3BvaW50TGFiZWxzPXRoaXMuZ2V0TGFiZWxzKCkubWFwKCh0LGUpPT57dD1jYWxsYmFjayh0aGlzLm9wdGlvbnMucG9pbnRMYWJlbHMuY2FsbGJhY2ssW3QsZV0sdGhpcyk7cmV0dXJuIHR8fDA9PT10P3Q6IiJ9KS5maWx0ZXIoKHQsZSk9PnRoaXMuY2hhcnQuZ2V0RGF0YVZpc2liaWxpdHkoZSkpfWZpdCgpe3ZhciB0PXRoaXMub3B0aW9uczt0LmRpc3BsYXkmJnQucG9pbnRMYWJlbHMuZGlzcGxheT9maXRXaXRoUG9pbnRMYWJlbHModGhpcyk6dGhpcy5zZXRDZW50ZXJQb2ludCgwLDAsMCwwKX1zZXRDZW50ZXJQb2ludCh0LGUsaSxhKXt0aGlzLnhDZW50ZXIrPU1hdGguZmxvb3IoKHQtZSkvMiksdGhpcy55Q2VudGVyKz1NYXRoLmZsb29yKChpLWEpLzIpLHRoaXMuZHJhd2luZ0FyZWEtPU1hdGgubWluKHRoaXMuZHJhd2luZ0FyZWEvMixNYXRoLm1heCh0LGUsaSxhKSl9Z2V0SW5kZXhBbmdsZSh0KXt2YXIgZT1UQVUvKHRoaXMuX3BvaW50TGFiZWxzLmxlbmd0aHx8MSksaT10aGlzLm9wdGlvbnMuc3RhcnRBbmdsZXx8MDtyZXR1cm4gX25vcm1hbGl6ZUFuZ2xlKHQqZSt0b1JhZGlhbnMoaSkpfWdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHQpe2lmKGlzTnVsbE9yVW5kZWYodCkpcmV0dXJuIE5hTjt2YXIgZT10aGlzLmRyYXdpbmdBcmVhLyh0aGlzLm1heC10aGlzLm1pbik7cmV0dXJuIHRoaXMub3B0aW9ucy5yZXZlcnNlPyh0aGlzLm1heC10KSplOih0LXRoaXMubWluKSplfWdldFZhbHVlRm9yRGlzdGFuY2VGcm9tQ2VudGVyKHQpe2lmKGlzTnVsbE9yVW5kZWYodCkpcmV0dXJuIE5hTjt0Lz10aGlzLmRyYXdpbmdBcmVhLyh0aGlzLm1heC10aGlzLm1pbik7cmV0dXJuIHRoaXMub3B0aW9ucy5yZXZlcnNlP3RoaXMubWF4LXQ6dGhpcy5taW4rdH1nZXRQb2ludExhYmVsQ29udGV4dCh0KXt2YXIgZT10aGlzLl9wb2ludExhYmVsc3x8W107aWYoMDw9dCYmdDxlLmxlbmd0aClyZXR1cm4gZT1lW3RdLGNyZWF0ZVBvaW50TGFiZWxDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpLHQsZSl9Z2V0UG9pbnRQb3NpdGlvbih0LGUsaT0wKXt0PXRoaXMuZ2V0SW5kZXhBbmdsZSh0KS1IQUxGX1BJK2k7cmV0dXJue3g6TWF0aC5jb3ModCkqZSt0aGlzLnhDZW50ZXIseTpNYXRoLnNpbih0KSplK3RoaXMueUNlbnRlcixhbmdsZTp0fX1nZXRQb2ludFBvc2l0aW9uRm9yVmFsdWUodCxlKXtyZXR1cm4gdGhpcy5nZXRQb2ludFBvc2l0aW9uKHQsdGhpcy5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZShlKSl9Z2V0QmFzZVBvc2l0aW9uKHQpe3JldHVybiB0aGlzLmdldFBvaW50UG9zaXRpb25Gb3JWYWx1ZSh0fHwwLHRoaXMuZ2V0QmFzZVZhbHVlKCkpfWdldFBvaW50TGFiZWxQb3NpdGlvbih0KXt2YXJ7bGVmdDp0LHRvcDplLHJpZ2h0OmksYm90dG9tOmF9PXRoaXMuX3BvaW50TGFiZWxJdGVtc1t0XTtyZXR1cm57bGVmdDp0LHRvcDplLHJpZ2h0OmksYm90dG9tOmF9fWRyYXdCYWNrZ3JvdW5kKCl7dmFye2JhY2tncm91bmRDb2xvcjp0LGdyaWQ6e2NpcmN1bGFyOmV9fT10aGlzLm9wdGlvbnM7aWYodCl7Y29uc3QgaT10aGlzLmN0eDtpLnNhdmUoKSxpLmJlZ2luUGF0aCgpLHBhdGhSYWRpdXNMaW5lKHRoaXMsdGhpcy5nZXREaXN0YW5jZUZyb21DZW50ZXJGb3JWYWx1ZSh0aGlzLl9lbmRWYWx1ZSksZSx0aGlzLl9wb2ludExhYmVscy5sZW5ndGgpLGkuY2xvc2VQYXRoKCksaS5maWxsU3R5bGU9dCxpLmZpbGwoKSxpLnJlc3RvcmUoKX19ZHJhd0dyaWQoKXtjb25zdCB0PXRoaXMuY3R4O3ZhciBlPXRoaXMub3B0aW9ucztjb25zdHthbmdsZUxpbmVzOmksZ3JpZDphLGJvcmRlcjpzfT1lLG49dGhpcy5fcG9pbnRMYWJlbHMubGVuZ3RoO2xldCByLG8sbDtpZihlLnBvaW50TGFiZWxzLmRpc3BsYXkmJmRyYXdQb2ludExhYmVscyh0aGlzLG4pLGEuZGlzcGxheSYmdGhpcy50aWNrcy5mb3JFYWNoKCh0LGUpPT57MCE9PWUmJihvPXRoaXMuZ2V0RGlzdGFuY2VGcm9tQ2VudGVyRm9yVmFsdWUodC52YWx1ZSksdD10aGlzLmdldENvbnRleHQoZSksZT1hLnNldENvbnRleHQodCksdD1zLnNldENvbnRleHQodCksZHJhd1JhZGl1c0xpbmUodGhpcyxlLG8sbix0KSl9KSxpLmRpc3BsYXkpe2Zvcih0LnNhdmUoKSxyPW4tMTswPD1yO3ItLSl7dmFyIGg9aS5zZXRDb250ZXh0KHRoaXMuZ2V0UG9pbnRMYWJlbENvbnRleHQocikpLHtjb2xvcjpkLGxpbmVXaWR0aDpjfT1oO2MmJmQmJih0LmxpbmVXaWR0aD1jLHQuc3Ryb2tlU3R5bGU9ZCx0LnNldExpbmVEYXNoKGguYm9yZGVyRGFzaCksdC5saW5lRGFzaE9mZnNldD1oLmJvcmRlckRhc2hPZmZzZXQsbz10aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKGUudGlja3MucmV2ZXJzZT90aGlzLm1pbjp0aGlzLm1heCksbD10aGlzLmdldFBvaW50UG9zaXRpb24ocixvKSx0LmJlZ2luUGF0aCgpLHQubW92ZVRvKHRoaXMueENlbnRlcix0aGlzLnlDZW50ZXIpLHQubGluZVRvKGwueCxsLnkpLHQuc3Ryb2tlKCkpfXQucmVzdG9yZSgpfX1kcmF3Qm9yZGVyKCl7fWRyYXdMYWJlbHMoKXtjb25zdCByPXRoaXMuY3R4LG89dGhpcy5vcHRpb25zLGw9by50aWNrcztpZihsLmRpc3BsYXkpe3ZhciB0PXRoaXMuZ2V0SW5kZXhBbmdsZSgwKTtsZXQgcyxuO3Iuc2F2ZSgpLHIudHJhbnNsYXRlKHRoaXMueENlbnRlcix0aGlzLnlDZW50ZXIpLHIucm90YXRlKHQpLHIudGV4dEFsaWduPSJjZW50ZXIiLHIudGV4dEJhc2VsaW5lPSJtaWRkbGUiLHRoaXMudGlja3MuZm9yRWFjaCgodCxlKT0+e3ZhciBpLGE7MD09PWUmJiFvLnJldmVyc2V8fChpPWwuc2V0Q29udGV4dCh0aGlzLmdldENvbnRleHQoZSkpLGE9dG9Gb250KGkuZm9udCkscz10aGlzLmdldERpc3RhbmNlRnJvbUNlbnRlckZvclZhbHVlKHRoaXMudGlja3NbZV0udmFsdWUpLGkuc2hvd0xhYmVsQmFja2Ryb3AmJihyLmZvbnQ9YS5zdHJpbmcsbj1yLm1lYXN1cmVUZXh0KHQubGFiZWwpLndpZHRoLHIuZmlsbFN0eWxlPWkuYmFja2Ryb3BDb2xvcixlPXRvUGFkZGluZyhpLmJhY2tkcm9wUGFkZGluZyksci5maWxsUmVjdCgtbi8yLWUubGVmdCwtcy1hLnNpemUvMi1lLnRvcCxuK2Uud2lkdGgsYS5zaXplK2UuaGVpZ2h0KSkscmVuZGVyVGV4dChyLHQubGFiZWwsMCwtcyxhLHtjb2xvcjppLmNvbG9yLHN0cm9rZUNvbG9yOmkudGV4dFN0cm9rZUNvbG9yLHN0cm9rZVdpZHRoOmkudGV4dFN0cm9rZVdpZHRofSkpfSksci5yZXN0b3JlKCl9fWRyYXdUaXRsZSgpe319Y29uc3QgSU5URVJWQUxTPXttaWxsaXNlY29uZDp7Y29tbW9uOiEwLHNpemU6MSxzdGVwczoxZTN9LHNlY29uZDp7Y29tbW9uOiEwLHNpemU6MWUzLHN0ZXBzOjYwfSxtaW51dGU6e2NvbW1vbjohMCxzaXplOjZlNCxzdGVwczo2MH0saG91cjp7Y29tbW9uOiEwLHNpemU6MzZlNSxzdGVwczoyNH0sZGF5Ontjb21tb246ITAsc2l6ZTo4NjRlNSxzdGVwczozMH0sd2Vlazp7Y29tbW9uOiExLHNpemU6NjA0OGU1LHN0ZXBzOjR9LG1vbnRoOntjb21tb246ITAsc2l6ZToyNjI4ZTYsc3RlcHM6MTJ9LHF1YXJ0ZXI6e2NvbW1vbjohMSxzaXplOjc4ODRlNixzdGVwczo0fSx5ZWFyOntjb21tb246ITAsc2l6ZTozMTU0ZTd9fSxVTklUUz1PYmplY3Qua2V5cyhJTlRFUlZBTFMpO2Z1bmN0aW9uIHNvcnRlcih0LGUpe3JldHVybiB0LWV9ZnVuY3Rpb24gcGFyc2UodCxlKXtpZihpc051bGxPclVuZGVmKGUpKXJldHVybiBudWxsO2NvbnN0IGk9dC5fYWRhcHRlcix7cGFyc2VyOmEscm91bmQ6cyxpc29XZWVrZGF5Om59PXQuX3BhcnNlT3B0cztsZXQgcj1lO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBhJiYocj1hKHIpKSxudWxsPT09KHI9aXNOdW1iZXJGaW5pdGUocik/cjoic3RyaW5nIj09dHlwZW9mIGE/aS5wYXJzZShyLGEpOmkucGFyc2UocikpP251bGw6KyhyPXM/IndlZWsiIT09c3x8IWlzTnVtYmVyKG4pJiYhMCE9PW4/aS5zdGFydE9mKHIscyk6aS5zdGFydE9mKHIsImlzb1dlZWsiLG4pOnIpfWZ1bmN0aW9uIGRldGVybWluZVVuaXRGb3JBdXRvVGlja3MoZSxpLGEscyl7dmFyIG49VU5JVFMubGVuZ3RoO2ZvcihsZXQgdD1VTklUUy5pbmRleE9mKGUpO3Q8bi0xOysrdCl7dmFyIHI9SU5URVJWQUxTW1VOSVRTW3RdXSxvPXIuc3RlcHN8fE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO2lmKHIuY29tbW9uJiZNYXRoLmNlaWwoKGEtaSkvKG8qci5zaXplKSk8PXMpcmV0dXJuIFVOSVRTW3RdfXJldHVybiBVTklUU1tuLTFdfWZ1bmN0aW9uIGRldGVybWluZVVuaXRGb3JGb3JtYXR0aW5nKGUsaSxhLHMsbil7Zm9yKGxldCB0PVVOSVRTLmxlbmd0aC0xO3Q+PVVOSVRTLmluZGV4T2YoYSk7dC0tKXt2YXIgcj1VTklUU1t0XTtpZihJTlRFUlZBTFNbcl0uY29tbW9uJiZlLl9hZGFwdGVyLmRpZmYobixzLHIpPj1pLTEpcmV0dXJuIHJ9cmV0dXJuIFVOSVRTW2E/VU5JVFMuaW5kZXhPZihhKTowXX1mdW5jdGlvbiBkZXRlcm1pbmVNYWpvclVuaXQoaSl7Zm9yKGxldCB0PVVOSVRTLmluZGV4T2YoaSkrMSxlPVVOSVRTLmxlbmd0aDt0PGU7Kyt0KWlmKElOVEVSVkFMU1tVTklUU1t0XV0uY29tbW9uKXJldHVybiBVTklUU1t0XX1mdW5jdGlvbiBhZGRUaWNrKHQsZSxpKXt2YXIgYSxzO2k/aS5sZW5ndGgmJih7bG86YSxoaTpzfT1fbG9va3VwKGksZSksdFtpW2FdPj1lP2lbYV06aVtzXV09ITApOnRbZV09ITB9ZnVuY3Rpb24gc2V0TWFqb3JUaWNrcyh0LGUsaSxhKXtjb25zdCBzPXQuX2FkYXB0ZXI7dmFyIHQ9K3Muc3RhcnRPZihlWzBdLnZhbHVlLGEpLG49ZVtlLmxlbmd0aC0xXS52YWx1ZTtsZXQgcixvO2ZvcihyPXQ7cjw9bjtyPStzLmFkZChyLDEsYSkpMDw9KG89aVtyXSkmJihlW29dLm1ham9yPSEwKTtyZXR1cm4gZX1mdW5jdGlvbiB0aWNrc0Zyb21UaW1lc3RhbXBzKHQsZSxpKXtjb25zdCBhPVtdLHM9e307dmFyIG49ZS5sZW5ndGg7bGV0IHIsbztmb3Iocj0wO3I8bjsrK3Ipbz1lW3JdLHNbb109cixhLnB1c2goe3ZhbHVlOm8sbWFqb3I6ITF9KTtyZXR1cm4gMCE9PW4mJmk/c2V0TWFqb3JUaWNrcyh0LGEscyxpKTphfWNsYXNzIFRpbWVTY2FsZSBleHRlbmRzIFNjYWxle3N0YXRpYyBpZD0idGltZSI7c3RhdGljIGRlZmF1bHRzPXtib3VuZHM6ImRhdGEiLGFkYXB0ZXJzOnt9LHRpbWU6e3BhcnNlcjohMSx1bml0OiExLHJvdW5kOiExLGlzb1dlZWtkYXk6ITEsbWluVW5pdDoibWlsbGlzZWNvbmQiLGRpc3BsYXlGb3JtYXRzOnt9fSx0aWNrczp7c291cmNlOiJhdXRvIixjYWxsYmFjazohMSxtYWpvcjp7ZW5hYmxlZDohMX19fTtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLl9jYWNoZT17ZGF0YTpbXSxsYWJlbHM6W10sYWxsOltdfSx0aGlzLl91bml0PSJkYXkiLHRoaXMuX21ham9yVW5pdD12b2lkIDAsdGhpcy5fb2Zmc2V0cz17fSx0aGlzLl9ub3JtYWxpemVkPSExLHRoaXMuX3BhcnNlT3B0cz12b2lkIDB9aW5pdCh0LGU9e30pe3ZhciBpPXQudGltZXx8KHQudGltZT17fSk7Y29uc3QgYT10aGlzLl9hZGFwdGVyPW5ldyBhZGFwdGVycy5fZGF0ZSh0LmFkYXB0ZXJzLmRhdGUpO2EuaW5pdChlKSxtZXJnZUlmKGkuZGlzcGxheUZvcm1hdHMsYS5mb3JtYXRzKCkpLHRoaXMuX3BhcnNlT3B0cz17cGFyc2VyOmkucGFyc2VyLHJvdW5kOmkucm91bmQsaXNvV2Vla2RheTppLmlzb1dlZWtkYXl9LHN1cGVyLmluaXQodCksdGhpcy5fbm9ybWFsaXplZD1lLm5vcm1hbGl6ZWR9cGFyc2UodCxlKXtyZXR1cm4gdm9pZCAwPT09dD9udWxsOnBhcnNlKHRoaXMsdCl9YmVmb3JlTGF5b3V0KCl7c3VwZXIuYmVmb3JlTGF5b3V0KCksdGhpcy5fY2FjaGU9e2RhdGE6W10sbGFiZWxzOltdLGFsbDpbXX19ZGV0ZXJtaW5lRGF0YUxpbWl0cygpe3ZhciB0PXRoaXMub3B0aW9ucztjb25zdCBlPXRoaXMuX2FkYXB0ZXI7dmFyIGk9dC50aW1lLnVuaXR8fCJkYXkiO2xldHttaW46YSxtYXg6cyxtaW5EZWZpbmVkOm4sbWF4RGVmaW5lZDpyfT10aGlzLmdldFVzZXJCb3VuZHMoKTtmdW5jdGlvbiBvKHQpe258fGlzTmFOKHQubWluKXx8KGE9TWF0aC5taW4oYSx0Lm1pbikpLHJ8fGlzTmFOKHQubWF4KXx8KHM9TWF0aC5tYXgocyx0Lm1heCkpfW4mJnJ8fChvKHRoaXMuX2dldExhYmVsQm91bmRzKCkpLCJ0aWNrcyI9PT10LmJvdW5kcyYmImxhYmVscyI9PT10LnRpY2tzLnNvdXJjZXx8byh0aGlzLmdldE1pbk1heCghMSkpKSxhPWlzTnVtYmVyRmluaXRlKGEpJiYhaXNOYU4oYSk/YTorZS5zdGFydE9mKERhdGUubm93KCksaSkscz1pc051bWJlckZpbml0ZShzKSYmIWlzTmFOKHMpP3M6K2UuZW5kT2YoRGF0ZS5ub3coKSxpKSsxLHRoaXMubWluPU1hdGgubWluKGEscy0xKSx0aGlzLm1heD1NYXRoLm1heChhKzEscyl9X2dldExhYmVsQm91bmRzKCl7dmFyIHQ9dGhpcy5nZXRMYWJlbFRpbWVzdGFtcHMoKTtsZXQgZT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksaT1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7cmV0dXJuIHQubGVuZ3RoJiYoZT10WzBdLGk9dFt0Lmxlbmd0aC0xXSkse21pbjplLG1heDppfX1idWlsZFRpY2tzKCl7dmFyIHQ9dGhpcy5vcHRpb25zLGU9dC50aW1lLGk9dC50aWNrcyxhPSJsYWJlbHMiPT09aS5zb3VyY2U/dGhpcy5nZXRMYWJlbFRpbWVzdGFtcHMoKTp0aGlzLl9nZW5lcmF0ZSgpLHM9KCJ0aWNrcyI9PT10LmJvdW5kcyYmYS5sZW5ndGgmJih0aGlzLm1pbj10aGlzLl91c2VyTWlufHxhWzBdLHRoaXMubWF4PXRoaXMuX3VzZXJNYXh8fGFbYS5sZW5ndGgtMV0pLHRoaXMubWluKSxuPXRoaXMubWF4O2NvbnN0IHI9X2ZpbHRlckJldHdlZW4oYSxzLG4pO3JldHVybiB0aGlzLl91bml0PWUudW5pdHx8KGkuYXV0b1NraXA/ZGV0ZXJtaW5lVW5pdEZvckF1dG9UaWNrcyhlLm1pblVuaXQsdGhpcy5taW4sdGhpcy5tYXgsdGhpcy5fZ2V0TGFiZWxDYXBhY2l0eShzKSk6ZGV0ZXJtaW5lVW5pdEZvckZvcm1hdHRpbmcodGhpcyxyLmxlbmd0aCxlLm1pblVuaXQsdGhpcy5taW4sdGhpcy5tYXgpKSx0aGlzLl9tYWpvclVuaXQ9aS5tYWpvci5lbmFibGVkJiYieWVhciIhPT10aGlzLl91bml0P2RldGVybWluZU1ham9yVW5pdCh0aGlzLl91bml0KTp2b2lkIDAsdGhpcy5pbml0T2Zmc2V0cyhhKSx0LnJldmVyc2UmJnIucmV2ZXJzZSgpLHRpY2tzRnJvbVRpbWVzdGFtcHModGhpcyxyLHRoaXMuX21ham9yVW5pdCl9YWZ0ZXJBdXRvU2tpcCgpe3RoaXMub3B0aW9ucy5vZmZzZXRBZnRlckF1dG9za2lwJiZ0aGlzLmluaXRPZmZzZXRzKHRoaXMudGlja3MubWFwKHQ9Pit0LnZhbHVlKSl9aW5pdE9mZnNldHModD1bXSl7bGV0IGU9MCxpPTA7dGhpcy5vcHRpb25zLm9mZnNldCYmdC5sZW5ndGgmJihhPXRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRbMF0pLGU9MT09PXQubGVuZ3RoPzEtYToodGhpcy5nZXREZWNpbWFsRm9yVmFsdWUodFsxXSktYSkvMixhPXRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHRbdC5sZW5ndGgtMV0pLGk9MT09PXQubGVuZ3RoP2E6KGEtdGhpcy5nZXREZWNpbWFsRm9yVmFsdWUodFt0Lmxlbmd0aC0yXSkpLzIpO3ZhciBhPXQubGVuZ3RoPDM/LjU6LjI1O2U9X2xpbWl0VmFsdWUoZSwwLGEpLGk9X2xpbWl0VmFsdWUoaSwwLGEpLHRoaXMuX29mZnNldHM9e3N0YXJ0OmUsZW5kOmksZmFjdG9yOjEvKGUrMStpKX19X2dlbmVyYXRlKCl7Y29uc3QgdD10aGlzLl9hZGFwdGVyO3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXgsYT10aGlzLm9wdGlvbnMscz1hLnRpbWUsbj1zLnVuaXR8fGRldGVybWluZVVuaXRGb3JBdXRvVGlja3Mocy5taW5Vbml0LGUsaSx0aGlzLl9nZXRMYWJlbENhcGFjaXR5KGUpKSxyPXZhbHVlT3JEZWZhdWx0KGEudGlja3Muc3RlcFNpemUsMSkscz0id2VlayI9PT1uJiZzLmlzb1dlZWtkYXksbz1pc051bWJlcihzKXx8ITA9PT1zLGw9e307bGV0IGg9ZSxkLGM7aWYobyYmKGg9K3Quc3RhcnRPZihoLCJpc29XZWVrIixzKSksaD0rdC5zdGFydE9mKGgsbz8iZGF5IjpuKSx0LmRpZmYoaSxlLG4pPjFlNSpyKXRocm93IG5ldyBFcnJvcihlKyIgYW5kICIraSsiIGFyZSB0b28gZmFyIGFwYXJ0IHdpdGggc3RlcFNpemUgb2YgIityKyIgIituKTt2YXIgdT0iZGF0YSI9PT1hLnRpY2tzLnNvdXJjZSYmdGhpcy5nZXREYXRhVGltZXN0YW1wcygpO2ZvcihkPWgsYz0wO2Q8aTtkPSt0LmFkZChkLHIsbiksYysrKWFkZFRpY2sobCxkLHUpO3JldHVybiBkIT09aSYmInRpY2tzIiE9PWEuYm91bmRzJiYxIT09Y3x8YWRkVGljayhsLGQsdSksT2JqZWN0LmtleXMobCkuc29ydChzb3J0ZXIpLm1hcCh0PT4rdCl9Z2V0TGFiZWxGb3JWYWx1ZSh0KXtjb25zdCBlPXRoaXMuX2FkYXB0ZXI7dmFyIGk9dGhpcy5vcHRpb25zLnRpbWU7cmV0dXJuIGkudG9vbHRpcEZvcm1hdD9lLmZvcm1hdCh0LGkudG9vbHRpcEZvcm1hdCk6ZS5mb3JtYXQodCxpLmRpc3BsYXlGb3JtYXRzLmRhdGV0aW1lKX1mb3JtYXQodCxlKXt2YXIgaT10aGlzLm9wdGlvbnMudGltZS5kaXNwbGF5Rm9ybWF0cyxhPXRoaXMuX3VuaXQsZT1lfHxpW2FdO3JldHVybiB0aGlzLl9hZGFwdGVyLmZvcm1hdCh0LGUpfV90aWNrRm9ybWF0RnVuY3Rpb24odCxlLGksYSl7dmFyIHM9dGhpcy5vcHRpb25zLG49cy50aWNrcy5jYWxsYmFjaztpZihuKXJldHVybiBjYWxsYmFjayhuLFt0LGUsaV0sdGhpcyk7dmFyIG49cy50aW1lLmRpc3BsYXlGb3JtYXRzLHM9dGhpcy5fdW5pdCxyPXRoaXMuX21ham9yVW5pdCxzPXMmJm5bc10sbj1yJiZuW3JdLGk9aVtlXSxlPXImJm4mJmkmJmkubWFqb3I7cmV0dXJuIHRoaXMuX2FkYXB0ZXIuZm9ybWF0KHQsYXx8KGU/bjpzKSl9Z2VuZXJhdGVUaWNrTGFiZWxzKHQpe2xldCBlLGksYTtmb3IoZT0wLGk9dC5sZW5ndGg7ZTxpOysrZSkoYT10W2VdKS5sYWJlbD10aGlzLl90aWNrRm9ybWF0RnVuY3Rpb24oYS52YWx1ZSxlLHQpfWdldERlY2ltYWxGb3JWYWx1ZSh0KXtyZXR1cm4gbnVsbD09PXQ/TmFOOih0LXRoaXMubWluKS8odGhpcy5tYXgtdGhpcy5taW4pfWdldFBpeGVsRm9yVmFsdWUodCl7dmFyIGU9dGhpcy5fb2Zmc2V0cyx0PXRoaXMuZ2V0RGVjaW1hbEZvclZhbHVlKHQpO3JldHVybiB0aGlzLmdldFBpeGVsRm9yRGVjaW1hbCgoZS5zdGFydCt0KSplLmZhY3Rvcil9Z2V0VmFsdWVGb3JQaXhlbCh0KXt2YXIgZT10aGlzLl9vZmZzZXRzLHQ9dGhpcy5nZXREZWNpbWFsRm9yUGl4ZWwodCkvZS5mYWN0b3ItZS5lbmQ7cmV0dXJuIHRoaXMubWluK3QqKHRoaXMubWF4LXRoaXMubWluKX1fZ2V0TGFiZWxTaXplKHQpe3ZhciBlPXRoaXMub3B0aW9ucy50aWNrcyx0PXRoaXMuY3R4Lm1lYXN1cmVUZXh0KHQpLndpZHRoLGU9dG9SYWRpYW5zKHRoaXMuaXNIb3Jpem9udGFsKCk/ZS5tYXhSb3RhdGlvbjplLm1pblJvdGF0aW9uKSxpPU1hdGguY29zKGUpLGU9TWF0aC5zaW4oZSksYT10aGlzLl9yZXNvbHZlVGlja0ZvbnRPcHRpb25zKDApLnNpemU7cmV0dXJue3c6dCppK2EqZSxoOnQqZSthKml9fV9nZXRMYWJlbENhcGFjaXR5KHQpe3ZhciBlPXRoaXMub3B0aW9ucy50aW1lLGk9ZS5kaXNwbGF5Rm9ybWF0cyxlPWlbZS51bml0XXx8aS5taWxsaXNlY29uZCxpPXRoaXMuX3RpY2tGb3JtYXRGdW5jdGlvbih0LDAsdGlja3NGcm9tVGltZXN0YW1wcyh0aGlzLFt0XSx0aGlzLl9tYWpvclVuaXQpLGUpLHQ9dGhpcy5fZ2V0TGFiZWxTaXplKGkpLGU9TWF0aC5mbG9vcih0aGlzLmlzSG9yaXpvbnRhbCgpP3RoaXMud2lkdGgvdC53OnRoaXMuaGVpZ2h0L3QuaCktMTtyZXR1cm4gMDxlP2U6MX1nZXREYXRhVGltZXN0YW1wcygpe2xldCB0PXRoaXMuX2NhY2hlLmRhdGF8fFtdLGUsaTtpZih0Lmxlbmd0aClyZXR1cm4gdDtjb25zdCBhPXRoaXMuZ2V0TWF0Y2hpbmdWaXNpYmxlTWV0YXMoKTtpZih0aGlzLl9ub3JtYWxpemVkJiZhLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FjaGUuZGF0YT1hWzBdLmNvbnRyb2xsZXIuZ2V0QWxsUGFyc2VkVmFsdWVzKHRoaXMpO2ZvcihlPTAsaT1hLmxlbmd0aDtlPGk7KytlKXQ9dC5jb25jYXQoYVtlXS5jb250cm9sbGVyLmdldEFsbFBhcnNlZFZhbHVlcyh0aGlzKSk7cmV0dXJuIHRoaXMuX2NhY2hlLmRhdGE9dGhpcy5ub3JtYWxpemUodCl9Z2V0TGFiZWxUaW1lc3RhbXBzKCl7Y29uc3QgdD10aGlzLl9jYWNoZS5sYWJlbHN8fFtdO2xldCBlLGk7aWYodC5sZW5ndGgpcmV0dXJuIHQ7dmFyIGE9dGhpcy5nZXRMYWJlbHMoKTtmb3IoZT0wLGk9YS5sZW5ndGg7ZTxpOysrZSl0LnB1c2gocGFyc2UodGhpcyxhW2VdKSk7cmV0dXJuIHRoaXMuX2NhY2hlLmxhYmVscz10aGlzLl9ub3JtYWxpemVkP3Q6dGhpcy5ub3JtYWxpemUodCl9bm9ybWFsaXplKHQpe3JldHVybiBfYXJyYXlVbmlxdWUodC5zb3J0KHNvcnRlcikpfX1mdW5jdGlvbiBpbnRlcnBvbGF0ZSh0LGUsaSl7bGV0IGE9MCxzPXQubGVuZ3RoLTEsbixyLG8sbDtpPyhlPj10W2FdLnBvcyYmZTw9dFtzXS5wb3MmJih7bG86YSxoaTpzfT1fbG9va3VwQnlLZXkodCwicG9zIixlKSkse3BvczpuLHRpbWU6b309dFthXSx7cG9zOnIsdGltZTpsfT10W3NdKTooZT49dFthXS50aW1lJiZlPD10W3NdLnRpbWUmJih7bG86YSxoaTpzfT1fbG9va3VwQnlLZXkodCwidGltZSIsZSkpLHt0aW1lOm4scG9zOm99PXRbYV0se3RpbWU6cixwb3M6bH09dFtzXSk7aT1yLW47cmV0dXJuIGk/bysobC1vKSooZS1uKS9pOm99Y2xhc3MgVGltZVNlcmllc1NjYWxlIGV4dGVuZHMgVGltZVNjYWxle3N0YXRpYyBpZD0idGltZXNlcmllcyI7c3RhdGljIGRlZmF1bHRzPVRpbWVTY2FsZS5kZWZhdWx0cztjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLl90YWJsZT1bXSx0aGlzLl9taW5Qb3M9dm9pZCAwLHRoaXMuX3RhYmxlUmFuZ2U9dm9pZCAwfWluaXRPZmZzZXRzKCl7dmFyIHQ9dGhpcy5fZ2V0VGltZXN0YW1wc0ZvclRhYmxlKCksZT10aGlzLl90YWJsZT10aGlzLmJ1aWxkTG9va3VwVGFibGUodCk7dGhpcy5fbWluUG9zPWludGVycG9sYXRlKGUsdGhpcy5taW4pLHRoaXMuX3RhYmxlUmFuZ2U9aW50ZXJwb2xhdGUoZSx0aGlzLm1heCktdGhpcy5fbWluUG9zLHN1cGVyLmluaXRPZmZzZXRzKHQpfWJ1aWxkTG9va3VwVGFibGUodCl7dmFye21pbjplLG1heDppfT10aGlzO2NvbnN0IGE9W10scz1bXTtsZXQgbixyLG8sbCxoO2ZvcihuPTAscj10Lmxlbmd0aDtuPHI7KytuKShsPXRbbl0pPj1lJiZsPD1pJiZhLnB1c2gobCk7aWYoYS5sZW5ndGg8MilyZXR1cm5be3RpbWU6ZSxwb3M6MH0se3RpbWU6aSxwb3M6MX1dO2ZvcihuPTAscj1hLmxlbmd0aDtuPHI7KytuKWg9YVtuKzFdLG89YVtuLTFdLGw9YVtuXSxNYXRoLnJvdW5kKChoK28pLzIpIT09bCYmcy5wdXNoKHt0aW1lOmwscG9zOm4vKHItMSl9KTtyZXR1cm4gc31fZ2VuZXJhdGUoKXt2YXIgdD10aGlzLm1pbixlPXRoaXMubWF4O2xldCBpPXN1cGVyLmdldERhdGFUaW1lc3RhbXBzKCk7cmV0dXJuIGkuaW5jbHVkZXModCkmJmkubGVuZ3RofHxpLnNwbGljZSgwLDAsdCksaS5pbmNsdWRlcyhlKSYmMSE9PWkubGVuZ3RofHxpLnB1c2goZSksaS5zb3J0KCh0LGUpPT50LWUpfV9nZXRUaW1lc3RhbXBzRm9yVGFibGUoKXtsZXQgdD10aGlzLl9jYWNoZS5hbGx8fFtdO2lmKHQubGVuZ3RoKXJldHVybiB0O2NvbnN0IGU9dGhpcy5nZXREYXRhVGltZXN0YW1wcygpO3ZhciBpPXRoaXMuZ2V0TGFiZWxUaW1lc3RhbXBzKCk7cmV0dXJuIHQ9ZS5sZW5ndGgmJmkubGVuZ3RoP3RoaXMubm9ybWFsaXplKGUuY29uY2F0KGkpKTplLmxlbmd0aD9lOmksdD10aGlzLl9jYWNoZS5hbGw9dH1nZXREZWNpbWFsRm9yVmFsdWUodCl7cmV0dXJuKGludGVycG9sYXRlKHRoaXMuX3RhYmxlLHQpLXRoaXMuX21pblBvcykvdGhpcy5fdGFibGVSYW5nZX1nZXRWYWx1ZUZvclBpeGVsKHQpe3ZhciBlPXRoaXMuX29mZnNldHMsdD10aGlzLmdldERlY2ltYWxGb3JQaXhlbCh0KS9lLmZhY3Rvci1lLmVuZDtyZXR1cm4gaW50ZXJwb2xhdGUodGhpcy5fdGFibGUsdCp0aGlzLl90YWJsZVJhbmdlK3RoaXMuX21pblBvcywhMCl9fXZhciBzY2FsZXM9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsQ2F0ZWdvcnlTY2FsZTpDYXRlZ29yeVNjYWxlLExpbmVhclNjYWxlOkxpbmVhclNjYWxlLExvZ2FyaXRobWljU2NhbGU6TG9nYXJpdGhtaWNTY2FsZSxSYWRpYWxMaW5lYXJTY2FsZTpSYWRpYWxMaW5lYXJTY2FsZSxUaW1lU2NhbGU6VGltZVNjYWxlLFRpbWVTZXJpZXNTY2FsZTpUaW1lU2VyaWVzU2NhbGV9KTtjb25zdCByZWdpc3RlcmFibGVzPVtjb250cm9sbGVycyxlbGVtZW50cyxwbHVnaW5zLHNjYWxlc107ZXhwb3J0e0FuaW1hdGlvbixBbmltYXRpb25zLEFyY0VsZW1lbnQsQmFyQ29udHJvbGxlcixCYXJFbGVtZW50LEJhc2VQbGF0Zm9ybSxCYXNpY1BsYXRmb3JtLEJ1YmJsZUNvbnRyb2xsZXIsQ2F0ZWdvcnlTY2FsZSxDaGFydCxwbHVnaW5fY29sb3JzIGFzIENvbG9ycyxEYXRhc2V0Q29udHJvbGxlcixwbHVnaW5fZGVjaW1hdGlvbiBhcyBEZWNpbWF0aW9uLERvbVBsYXRmb3JtLERvdWdobnV0Q29udHJvbGxlcixFbGVtZW50LGluZGV4IGFzIEZpbGxlcixJbnRlcmFjdGlvbixwbHVnaW5fbGVnZW5kIGFzIExlZ2VuZCxMaW5lQ29udHJvbGxlcixMaW5lRWxlbWVudCxMaW5lYXJTY2FsZSxMb2dhcml0aG1pY1NjYWxlLFBpZUNvbnRyb2xsZXIsUG9pbnRFbGVtZW50LFBvbGFyQXJlYUNvbnRyb2xsZXIsUmFkYXJDb250cm9sbGVyLFJhZGlhbExpbmVhclNjYWxlLFNjYWxlLFNjYXR0ZXJDb250cm9sbGVyLHBsdWdpbl9zdWJ0aXRsZSBhcyBTdWJUaXRsZSxUaWNrcyxUaW1lU2NhbGUsVGltZVNlcmllc1NjYWxlLHBsdWdpbl90aXRsZSBhcyBUaXRsZSxwbHVnaW5fdG9vbHRpcCBhcyBUb29sdGlwLGFkYXB0ZXJzIGFzIF9hZGFwdGVycyxfZGV0ZWN0UGxhdGZvcm0sYW5pbWF0b3IsY29udHJvbGxlcnMsZGVmYXVsdHMsZWxlbWVudHMsbGF5b3V0cyxwbHVnaW5zLHJlZ2lzdGVyYWJsZXMscmVnaXN0cnksc2NhbGVzfTs="));
	</script>
</head>
<body>
	<!-- Title Page -->
	<div class="title-page">
		<div>
			<h1>GIPS Report</h1>
			<p>Portfolio Performance Summary</p>
			<p>Generated on: @DateTime.Now.ToString("MMMM dd, yyyy")</p>
		</div>
	</div>

	<div class="page-break"></div>

	<!-- Report Header -->
	<header>
		<h1>Performance Overview</h1>
	</header>

	<!-- Chart Section -->
	<div class="container">
		<h2>Portfolio Performance</h2>
		<canvas id="performanceChart" width="800" height="400"></canvas>
	</div>

	<div class="page-break"></div>

	<!-- Detailed Table -->
	<header>
		<h1>Performance Data</h1>
	</header>

	<div class="container">
		<table>
			<thead>
				<tr>
					<th>Year</th>
					<th>Net Return</th>
					<th>Benchmark Return</th>
					<th>Assets (Million $)</th>
					<th>Standard Deviation</th>
				</tr>
			</thead>
			<tbody>
				@if (!Model.PortfolioPerformances.Any())
				{
					<tr>
						<td colspan="5" style="text-align: center;">No data available</td>
					</tr>
				}
				else
				{
					@foreach (var performance in Model.PortfolioPerformances)
					{
						<tr>
							<td>@performance.Year</td>
							<td>@performance.NetReturn %</td>
							<td>@performance.BenchmarkReturn %</td>
							<td>@performance.AssetsInMillions M</td>
							<td>@performance.StandardDeviation %</td>
						</tr>
					}
				}
			</tbody>
		</table>
	</div>

	<footer>
		<p>GIPS Report - Confidential</p>
	</footer>
	<script>
		var performanceData = @Raw(@Newtonsoft.Json.JsonConvert.SerializeObject(Model.PortfolioPerformances));
	    var xValues = performanceData.map(function(item) { return item.Year; });
		var netReturnData = performanceData.map(function(item) { return item.NetReturn; });
		var benchmarkReturnData = performanceData.map(function(item) { return item.BenchmarkReturn; });
		var assetsData = performanceData.map(function(item) { return item.AssetsInMillions; });
		var standardDeviationData = performanceData.map(function(item) { return item.StandardDeviation; });


		var chart = new Chart("performanceChart", {
		  type: "line",
		  data: {
			labels: xValues,
			datasets: [{
			  data: netReturnData,
			  borderColor: "red",
			  fill: false
			},{
			  data: benchmarkReturnData,
			  borderColor: "green",
			  fill: false
			},{
			  data: standardDeviationData,
			  borderColor: "blue",
			  fill: false
			}]
		  },
		  options: {
			legend: {display: false}
		  }
		});

	</script>
</body>
</html>
